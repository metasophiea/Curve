var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,b=[];!(c=a.next()).done;)b.push(c.value);return b};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,c){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+c++,b)}var c=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,d={next:function(){if(b<a.length){var e=b++;return{value:c(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Array.prototype.flat",function(a){return a?a:function(a){a=void 0===a?1:a;for(var c=[],d=0;d<this.length;d++){var e=this[d];Array.isArray(e)&&0<a?(e=Array.prototype.flat.call(e,a-1),c.push.apply(c,e)):c.push(e)}return c}},"es9","es5");$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var g=a[e];if(c.call(b,g,e,a))return{i:e,v:g}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).i}},"es6","es3");$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,c){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var e=c.length;b=b||0;for(0>b&&(b=Math.max(b+e,0));b<e;b++){var g=c[b];if(g===a||Object.is(g,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function c(){this.batch_=null}function b(a){return a instanceof e?a:new e(function(c,b){c(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;c.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})}this.batch_.push(a)};var d=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(a){d(a,0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var b=a[c];a[c]=null;try{b()}catch(u){this.asyncThrow_(u)}}}this.batch_=null};c.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(t){c.reject(t)}};e.prototype.createResolveAndReject_=function(){function a(a){return function(e){b||(b=!0,a.call(c,e))}}var c=this,b=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var c=void 0;try{c=a.then}catch(t){this.reject_(t);return}"function"==typeof c?
this.settleSameAsThenable_(c,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)g.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var g=new c;e.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};e.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(u){b.reject(u)}};e.prototype.then=function(a,c){function b(a,c){return"function"==typeof a?function(c){try{d(a(c))}catch(m){g(m)}}:c}var d,g,h=new e(function(a,c){d=a;g=c});this.callWhenSettled_(b(a,d),b(c,g));return h};
e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,c){function b(){switch(e.state_){case 1:a(e.result_);break;case 2:c(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?g.asyncExecute(b):this.onSettledCallbacks_.push(b)};e.resolve=b;e.reject=function(a){return new e(function(c,b){b(a)})};e.race=function(a){return new e(function(c,e){for(var d=$jscomp.makeIterator(a),g=d.next();!g.done;g=d.next())b(g.value).callWhenSettled_(c,
e)})};e.all=function(a){var c=$jscomp.makeIterator(a),d=c.next();return d.done?b([]):new e(function(a,e){function g(c){return function(b){f[c]=b;h--;0==h&&a(f)}}var f=[],h=0;do f.push(void 0),h++,b(d.value).callWhenSettled_(g(f.length-1),e),d=c.next();while(!d.done)})};return e},"es6","es3");
var library=new function(){this._control=new function(){this.logflow=new function(){var a=!1,c={};this.active=function(c){if(void 0==c)return a;a=c};this.printResults=function(){return c};this.log=function(b){a&&(b in c?c[b]++:c[b]=1)}}};this.math=new function(){this.averageArray=function(a){for(var c=a[0],b=1;b<a.length;b++)c+=a[b];return c/a.length};this.averagePoint=function(a){var c=a.reduce(function(a,c){return{x:a.x+c.x,y:a.y+c.y}});return{x:c.x/a.length,y:c.y/a.length}};this.boundingBoxFromPoints=
function(a){if(0==a.length)return{topLeft:{x:0,y:0},bottomRight:{x:0,y:0}};for(var c=a[0].x,b=a[0].x,d=a[0].y,e=a[0].y,g=1;g<a.length;g++)a[g].x<c?c=a[g].x:a[g].x>b&&(b=a[g].x),a[g].y<d?d=a[g].y:a[g].y>e&&(e=a[g].y);return{topLeft:{x:c,y:d},bottomRight:{x:b,y:e}}};this.cartesianAngleAdjust=function(a,c,b){return 0==b?{x:a,y:c}:{x:a*Math.cos(b)-c*Math.sin(b),y:c*Math.cos(b)+a*Math.sin(b)}};this.convertColour=new function(){this.obj2rgba=function(a){return"rgba("+255*a.r+","+255*a.g+","+255*a.b+","+
a.a+")"};this.rgba2obj=function(a){a=a.split(",");a[0]=a[0].replace("rgba(","");a[3]=a[3].replace(")","");a=a.map(function(a){return parseFloat(a)});return{r:a[0]/255,g:a[1]/255,b:a[2]/255,a:a[3]}}};this.curveGenerator=new function(){this.linear=function(a,c,b){c=void 0===c?0:c;b=void 0===b?1:b;a=Math.abs(void 0===a?2:a)-1;for(var d=[0],e=1;e<a;e++)d.push(e/a);d.push(1);a=b-c;for(e=0;e<d.length;e++)d[e]=d[e]*a+c;return d};this.sin=function(a,c,b){c=void 0===c?0:c;b=void 0===b?1:b;a=Math.abs(void 0===
a?2:a)-1;for(var d=[0],e=1;e<a;e++)d.push(Math.sin(Math.PI/2*(e/a)));d.push(1);a=b-c;for(e=0;e<d.length;e++)d[e]=d[e]*a+c;return d};this.cos=function(a,c,b){c=void 0===c?0:c;b=void 0===b?1:b;a=Math.abs(void 0===a?2:a)-1;for(var d=[0],e=1;e<a;e++)d.push(1-Math.cos(Math.PI/2*(e/a)));d.push(1);a=b-c;for(e=0;e<d.length;e++)d[e]=d[e]*a+c;return d};this.s=function(a,c,b,d){a=void 0===a?2:a;c=void 0===c?0:c;b=void 0===b?1:b;d=void 0===d?8:d;0==d&&(d=1E-6);for(var e=[],g=0;g<a;g++)e.push(1/(1+Math.exp(-d*
(g/a-.5))));a=library.math.normalizeStretchArray(e);b-=c;for(g=0;g<a.length;g++)a[g]=a[g]*b+c;return a};this.exponential=function(a,c,b,d){c=void 0===c?0:c;b=void 0===b?1:b;d=void 0===d?2:d;a=(void 0===a?2:a)-1;for(var e=[],g=0;g<=a;g++)e.push((Math.exp(g/a*d)-1)/(Math.E-1));e=library.math.normalizeStretchArray(e);a=b-c;for(g=0;g<e.length;g++)e[g]=e[g]*a+c;return e}};this.curvePoint=new function(){this.linear=function(a,c,b){c=void 0===c?0:c;return(void 0===a?.5:a)*((void 0===b?1:b)-c)+c};this.sin=
function(a,c,b){c=void 0===c?0:c;return Math.sin(Math.PI/2*(void 0===a?.5:a))*((void 0===b?1:b)-c)+c};this.cos=function(a,c,b){c=void 0===c?0:c;return(1-Math.cos(Math.PI/2*(void 0===a?.5:a)))*((void 0===b?1:b)-c)+c};this.s=function(a,c,b,d){c=void 0===c?0:c;b=void 0===b?1:b;d=void 0===d?8:d;return library.math.normalizeStretchArray([1/(1+Math.exp(-.5*-d)),1/(1+Math.exp(-d*((void 0===a?.5:a)-.5))),1/(1+Math.exp(.5*-d))])[1]*(b-c)+c};this.exponential=function(a,c,b,d){c=void 0===c?0:c;b=void 0===b?
1:b;d=void 0===d?2:d;return library.math.normalizeStretchArray([(Math.exp(0*d)-1)/(Math.E-1),(Math.exp(d*(void 0===a?.5:a))-1)/(Math.E-1),(Math.exp(1*d)-1)/(Math.E-1)])[1]*(b-c)+c}};this.detectOverlap=new function(){var a=this;this.boundingBoxes=function(a,b){return a.bottomRight.y>=b.topLeft.y&&a.bottomRight.x>=b.topLeft.x&&a.topLeft.y<=b.bottomRight.y&&a.topLeft.x<=b.bottomRight.x};this.pointWithinBoundingBox=function(a,b){return!(a.x<b.topLeft.x||a.y<b.topLeft.y||a.x>b.bottomRight.x||a.y>b.bottomRight.y)};
this.pointWithinPoly=function(a,b){for(var c=!1,e=0,g=b.length-1;e<b.length;g=e++){if(a.x==b[e].x&&a.y==b[e].y)return!0;if(b[g].y>=a.y&&b[e].y<=a.y||b[e].y>=a.y&&b[g].y<=a.y)if(b[e].x<a.x&&b[g].x<a.x)c=!c;else{if(b[g].y>b[e].y&&b[g].x>b[e].x)var h=(a.x-b[e].x)/(b[g].x-b[e].x)-(a.y-b[e].y)/(b[g].y-b[e].y)+1;else b[g].y<=b[e].y&&b[g].x<=b[e].x?h=(a.x-b[g].x)/(b[e].x-b[g].x)-(a.y-b[g].y)/(b[e].y-b[g].y)+1:b[g].y>b[e].y&&b[g].x<b[e].x?h=(a.x-b[g].x)/(b[e].x-b[g].x)+(a.y-b[e].y)/(b[g].y-b[e].y):b[g].y<=
b[e].y&&b[g].x>=b[e].x&&(h=(a.x-b[e].x)/(b[g].x-b[e].x)+(a.y-b[g].y)/(b[e].y-b[g].y));if(1==h)return!0;1<h&&(c=!c)}}return c};this.lineSegments=function(a,b){var c=(b[1].y-b[0].y)*(a[1].x-a[0].x)-(b[1].x-b[0].x)*(a[1].y-a[0].y);if(0==c)return null;var e=((b[1].x-b[0].x)*(a[0].y-b[0].y)-(b[1].y-b[0].y)*(a[0].x-b[0].x))/c;b=((a[1].x-a[0].x)*(a[0].y-b[0].y)-(a[1].y-a[0].y)*(a[0].x-b[0].x))/c;return{x:a[0].x+e*(a[1].x-a[0].x),y:a[0].y+e*(a[1].y-a[0].y),inSeg1:0<=e&&1>=e,inSeg2:0<=b&&1>=b}};this.overlappingPolygons=
function(c,b){for(var d=0;d<c.length;d++)if(a.pointWithinPoly(c[d],b))return!0;for(d=0;d<b.length;d++)if(a.pointWithinPoly(b[d],c))return!0;var e=Array.apply(null,{length:c.length}).map(Number.call,Number).concat([0]),g=Array.apply(null,{length:b.length}).map(Number.call,Number).concat([0]);for(d=0;d<e.length-1;d++)for(var h=0;h<g.length-1;h++){var x=a.lineSegments([c[e[d]],c[e[d+1]]],[b[g[h]],b[g[h+1]]]);if(null!=x&&x.inSeg1&&x.inSeg2)return!0}return!1};this.overlappingPolygonWithPolygons=function(c,
b){for(var d=0;d<b.length;d++)if(a.boundingBoxes(c.boundingBox,b[d].boundingBox)&&a.overlappingPolygons(c.points,b[d].points))return!0;return!1};this.overlappingLineWithPolygons=function(a,b){var c={topLeft:{x:0,y:0},bottomRight:{x:0,y:0}};a.x1>a.x2?(c.topLeft.x=a.x2,c.bottomRight.x=a.x1):(c.topLeft.x=a.x1,c.bottomRight.x=a.x2);a.y1>a.y2?(c.topLeft.y=a.y2,c.bottomRight.y=a.y1):(c.topLeft.y=a.y1,c.bottomRight.y=a.y2);var e=[];b.forEach(function(b,d){if(library.math.detectOverlap.boundingBoxes(c,b.boundingBox)){a:{for(var g=
b.points.length-1,h=0;h<b.points.length;g=h++)if(g=library.math.detectOverlap.lineSegments([{x:a.x1,y:a.y1},{x:a.x2,y:a.y2}],[{x:b.points[g].x,y:b.points[g].y},{x:b.points[h].x,y:b.points[h].y}]),null!=g&&g.inSeg1&&g.inSeg2){b=!0;break a}b=!1}b&&e.push(d)}});return e}};this.getAngleOfTwoPoints=function(a,c){if(a.x==c.x&&a.y==c.y)return 0;var b=c.x-a.x;a=c.y-a.y;c=Math.atan(a/b);0>b?c=Math.PI+c:0>a&&(c=2*Math.PI+c);return c};this.getDifferenceOfArrays=function(a,c){function b(a,c){a.forEach(function(a){a=
c.indexOf(a);-1!=a&&c.splice(a,1)});return c}return{a:b(c,a.slice()),b:b(a,c.slice())}};this.getIndexOfSequence=function(a,c){function b(a,c){var b=Object.keys(a);if(0==b.length)return a==c;for(var e=0;e<b.length;e++)if(!c.hasOwnProperty(b[e])||a[b[e]]!=c[b[e]])return!1;return!0}if(0!=a.length&&0!=c.length){var d=0;for(d=0;d<a.length-c.length+1;d++)if(b(a[d],c[0])){for(var e=!0,g=1;g<c.length;g++)if(!b(a[d+g],c[g])){e=!1;break}if(e)return d}}};this.largestValueFound=function(a){if(0!=a.length)return a.reduce(function(a,
b){return Math.abs(a)>Math.abs(b)?a:b})};this.normalizeStretchArray=function(a){var c=a.reduce(function(a,c,b,d){return c>d[a]?b:a},0),b=Math.abs(a[c]);a=a.map(function(a){return a/b});if(0==a[0]&&1==a[a.length-1])return a;var d=0!=a[0]?a[0]:a[a.length-1];return a=a.map(function(a){return(a-d)/(1-d)})};this.relativeDistance=function(a,c,b,d,e){c=(d-c)/(b-c);if(void 0===e||!e){if(1<c)return a;if(0>c)return 0}return c*a};this.removeTheseElementsFromThatArray=function(a,c){a.forEach(function(a){return c.splice(c.indexOf(a),
1)});return c};this.seconds2time=function(a){var c={h:0,m:0,s:0};c.h=Math.floor(a/3600);a-=3600*c.h;c.m=Math.floor(a/60);a-=60*c.m;c.s=a;return c};this.cartesian2polar=function(a,c){return{dis:Math.pow(Math.pow(a,2)+Math.pow(c,2),.5),ang:0===a?0===c?0:0<c?.5*Math.PI:1.5*Math.PI:0===c?0<=a?0:Math.PI:0<=a?Math.atan(c/a):Math.atan(c/a)+Math.PI}};this.polar2cartesian=function(a,c){return{x:c*Math.cos(a),y:c*Math.sin(a)}};this.blendColours=function(a,c,b){return{r:(1-b)*a.r+b*c.r,g:(1-b)*a.g+b*c.g,b:(1-
b)*a.b+b*c.b,a:(1-b)*a.a+b*c.a}};this.multiBlendColours=function(a,c){if(0==c)return a[0];if(1==c)return a[a.length-1];c*=a.length-1;return library.math.blendColours(a[~~c],a[~~c+1],c%1)};this.polygonToSubTriangles=function(a,c){if("flatArray"==(void 0===c?"XYArray":c)){c=[];for(var b=0;b<a.length;b+=2)c.push({x:a[b+0],y:a[b+1]});a=[c]}var d=a.reverse().map(function(a){return a.length});d.forEach(function(a,c){0<c&&(d[c]=a+d[c-1])});d.pop();return _thirdparty.earcut(a.flat().map(function(a){return[a.x,
a.y]}).flat(),d)};this.unionPolygons=function(a,c){return _thirdparty.PolyBool.union({regions:a.map(function(a){return a.map(function(a){return[a.x,a.y]})})},{regions:c.map(function(a){return a.map(function(a){return[a.x,a.y]})})}).regions.map(function(a){return a.map(function(a){return{x:a[0],y:a[1]}})})};this.pathExtrapolation=function(a,c,b,d,e,g,h){function x(a){var c=[(a[0]+a[2])/2,(a[1]+a[3])/2],b=[];b=b.concat(c);for(var f=2;f<a.length;f+=2)b=b.concat([a[f],a[f+1]]);b=b.concat([a[0],a[1]]);
return b=b.concat(c)}function t(a,c){for(var b=[],f=_canvas_.library.math.cartesianAngleAdjust(c,0,a[0].departAngle-Math.PI/2),e={x:-f.x,y:-f.y},d=1;d<a.length-1;d++){var g=f,h=e;f=_canvas_.library.math.cartesianAngleAdjust(c,0,a[d].departAngle-Math.PI/2);e={x:-f.x,y:-f.y};a[d].joiningAngle!=Math.PI&&(a[d].joiningAngle<Math.PI?b.push([{x:a[d].point.x,y:a[d].point.y},{x:a[d].point.x+h.x,y:a[d].point.y+h.y},{x:a[d].point.x+e.x,y:a[d].point.y+e.y}]):a[d].joiningAngle>Math.PI&&b.push([{x:a[d].point.x,
y:a[d].point.y},{x:a[d].point.x+g.x,y:a[d].point.y+g.y},{x:a[d].point.x+f.x,y:a[d].point.y+f.y}]))}return b}function u(a,c,b){b=void 0===b?5:b;var e=[];1>b&&(b=1);for(var f=_canvas_.library.math.cartesianAngleAdjust(c,0,a[0].departAngle-Math.PI/2),d={x:-f.x,y:-f.y},g=1;g<a.length-1;g++){var h=[],u=f,l=d;f=_canvas_.library.math.cartesianAngleAdjust(c,0,a[g].departAngle-Math.PI/2);d={x:-f.x,y:-f.y};if(a[g].joiningAngle!=Math.PI)if(a[g].joiningAngle<Math.PI){h.push({x:a[g].point.x,y:a[g].point.y});h.push({x:a[g].point.x+
l.x,y:a[g].point.y+l.y});for(var q=Math.PI-a[g].joiningAngle,n=Math.floor(Math.abs(q)/Math.PI*(2+b)),B=1;B<n;B++){var k=q/n*B;k=_canvas_.library.math.cartesianAngleAdjust(l.x,l.y,-k);h.push({x:a[g].point.x+k.x,y:a[g].point.y+k.y})}h.push({x:a[g].point.x+d.x,y:a[g].point.y+d.y})}else if(a[g].joiningAngle>Math.PI){h.push({x:a[g].point.x,y:a[g].point.y});h.push({x:a[g].point.x+u.x,y:a[g].point.y+u.y});q=Math.PI-a[g].joiningAngle;n=Math.floor(Math.abs(q)/Math.PI*(2+b));for(B=1;B<n;B++)k=q/n*B,k=_canvas_.library.math.cartesianAngleAdjust(u.x,
u.y,-k),h.push({x:a[g].point.x+k.x,y:a[g].point.y+k.y});h.push({x:a[g].point.x+f.x,y:a[g].point.y+f.y})}e.push(h)}return e}function k(a,c,b){b=void 0===b?4*c:b;for(var e=[],d=_canvas_.library.math.cartesianAngleAdjust(c,0,a[0].departAngle-Math.PI/2),g={x:-d.x,y:-d.y},f=1;f<a.length-1;f++){var h=[],u=d,k=g;d=_canvas_.library.math.cartesianAngleAdjust(c,0,a[f].departAngle-Math.PI/2);g={x:-d.x,y:-d.y};if(a[f].joiningAngle!=Math.PI)if(a[f].joiningAngle<Math.PI){if(Math.abs(a[f].wingWidth)<=b){var l=_canvas_.library.math.cartesianAngleAdjust(0,
a[f].wingWidth,Math.PI/2+a[f].wingAngle);h.push({x:l.x+a[f].point.x,y:l.y+a[f].point.y});h.push({x:a[f].point.x+k.x,y:a[f].point.y+k.y});h.push({x:a[f].point.x,y:a[f].point.y})}else{var n=Math.cos(a[f].joiningAngle/2)*b;l=_canvas_.library.math.cartesianAngleAdjust(0,-n,Math.PI/2+a[f].implementAngle);n=_canvas_.library.math.cartesianAngleAdjust(0,n,Math.PI/2+a[f].departAngle);h.push({x:a[f].point.x,y:a[f].point.y});h.push({x:a[f].point.x+k.x,y:a[f].point.y+k.y});h.push({x:a[f].point.x+k.x+l.x,y:a[f].point.y+
k.y+l.y});h.push({x:a[f].point.x+g.x+n.x,y:a[f].point.y+g.y+n.y})}h.push({x:a[f].point.x+g.x,y:a[f].point.y+g.y})}else a[f].joiningAngle>Math.PI&&(Math.abs(a[f].wingWidth)<=b?(l=_canvas_.library.math.cartesianAngleAdjust(0,-a[f].wingWidth,Math.PI/2+a[f].wingAngle),h.push({x:l.x+a[f].point.x,y:l.y+a[f].point.y}),h.push({x:a[f].point.x+u.x,y:a[f].point.y+u.y}),h.push({x:a[f].point.x,y:a[f].point.y})):(n=Math.cos(a[f].joiningAngle/2)*b,l=_canvas_.library.math.cartesianAngleAdjust(0,n,Math.PI/2+a[f].implementAngle),
n=_canvas_.library.math.cartesianAngleAdjust(0,-n,Math.PI/2+a[f].departAngle),h.push({x:a[f].point.x,y:a[f].point.y}),h.push({x:a[f].point.x+u.x,y:a[f].point.y+u.y}),h.push({x:a[f].point.x+u.x+l.x,y:a[f].point.y+u.y+l.y}),h.push({x:a[f].point.x+d.x+n.x,y:a[f].point.y+d.y+n.y})),h.push({x:a[f].point.x+d.x,y:a[f].point.y+d.y}));e.push(h)}return e}function q(a,b,c){c=void 0===c?5:c;1>c&&(c=1);var e=[],d=[];d.push({x:a[0].point.x,y:a[0].point.y});for(var f=0;f<c+1;f++){var g=_canvas_.library.math.cartesianAngleAdjust(b,
0,a[0].departAngle+Math.PI/2+f/c*Math.PI);d.push({x:a[0].point.x+g.x,y:a[0].point.y+g.y})}e.push(d);d=[];d.push({x:a[a.length-1].point.x,y:a[a.length-1].point.y});for(f=0;f<c+1;f++)g=_canvas_.library.math.cartesianAngleAdjust(b,0,a[a.length-1].implementAngle-Math.PI/2+f/c*Math.PI),d.push({x:a[a.length-1].point.x+g.x,y:a[a.length-1].point.y+g.y});e.push(d);return e}c=void 0===c?10:c;b=void 0===b?"none":b;d=void 0===d?"none":d;g=void 0===g?5:g;h=void 0===h?4*c:h;(void 0===e?0:e)&&(a=x(a));e=function(a,
c){for(var b=[],e=0;e<a.length/2;e++)b.push({point:{x:a[2*e],y:a[2*e+1]}});for(e=0;e<b.length;e++)if(e!=b.length-1&&(a=_canvas_.library.math.getAngleOfTwoPoints(b[e].point,b[e+1].point),void 0!=b[e]&&(b[e].departAngle=a),void 0!=b[e+1]&&(b[e+1].implementAngle=a)),void 0!=b[e].departAngle&&void 0!=b[e].implementAngle){for(b[e].joiningAngle=b[e].departAngle-b[e].implementAngle+Math.PI;0>b[e].joiningAngle;)b[e].joiningAngle+=2*Math.PI;for(;b[e].joiningAngle>=2*Math.PI;)b[e].joiningAngle-=2*Math.PI;for(b[e].wingAngle=
b[e].implementAngle+b[e].joiningAngle/2-Math.PI;0>b[e].wingAngle;)b[e].wingAngle+=2*Math.PI;for(;b[e].wingAngle>2*Math.PI;)b[e].wingAngle-=2*Math.PI;b[e].wingWidth=c/Math.sin(b[e].joiningAngle/2)}return b}(a,c);if(0==e.length)return[];a=function(a,b){for(var c=[],e=1;e<a.length/2;e++){var d=_canvas_.library.math.getAngleOfTwoPoints({x:a[2*e-2],y:a[2*e-1]},{x:a[2*e],y:a[2*e+1]});d=_canvas_.library.math.cartesianAngleAdjust(b,0,Math.PI/2+d);var f=-d.x,g=-d.y;c.push([{x:a[2*e-2]+d.x,y:a[2*e-1]+d.y},
{x:a[2*e-2]+f,y:a[2*e-1]+g},{x:a[2*e]+f,y:a[2*e+1]+g},{x:a[2*e]+d.x,y:a[2*e+1]+d.y}])}return c}(a,c);"flat"==d&&(a=a.concat(t(e,c)));"round"==d&&(a=a.concat(u(e,c,g)));"sharp"==d&&(a=a.concat(k(e,c,h)));"round"==b&&(a=a.concat(q(e,c,g)));return library.math.polygonToSubTriangles(a.map(function(a){return[a]}).reduce(function(a,b){return library.math.unionPolygons(a,b)}))};this.fitPolyIn=function(a,c,b,d){function e(a,b){return b.map(function(b){return{x:b.x+a.x,y:b.y+a.y}})}function g(a,b){a={points:e(a,
b.points),boundingBox:{}};a.boundingBox=library.math.boundingBoxFromPoints(a.points);return a}b=void 0===b?{active:!1,x:10,y:10,angle:Math.PI/8}:b;d=void 0===d?!1:d;var h={x:0,y:0},x=[[],[],[]],t=library.math.averagePoint(a.points);h=1;var u=100,k=[];for(h=1;h<u+1;h++){k=[];for(var q=2*h+1,f=2*Math.PI/q,y=Math.pow(h,2),l=0;l<q;l++){var m=library.math.polar2cartesian(f*l,y);m.x=b.active?Math.round(m.x/b.x)*b.x:m.x;m.y=b.active?Math.round(m.y/b.y)*b.y:m.y;d&&x[0].push({x:m.x+t.x,y:m.y+t.y});library.math.detectOverlap.overlappingPolygonWithPolygons(g(m,
a),c)||k.push({ang:f*l,dis:y})}if(0!=k.length)break}u=10;if(1==k.length)var r=k[0];else{q=Math.pow(h,2);f=Math.pow(h-1,2);y=[];for(h=0;h<u;h++){var w=[],z=(q-f)/2+f;for(l=0;l<k.length;l++)m=library.math.polar2cartesian(k[l].ang,z),m.x=b.active?Math.round(m.x/b.x)*b.x:m.x,m.y=b.active?Math.round(m.y/b.y)*b.y:m.y,d&&x[1].push({x:m.x+t.x,y:m.y+t.y}),library.math.detectOverlap.overlappingPolygonWithPolygons(g(m,a),c)||(w.push({ang:k[l].ang,dis:z}),y.push({ang:k[l].ang,dis:z}));if(1==w.length){r=w[0];
break}0==w.length?f=z:q=z}void 0==r&&(r=y.pop())}u=10;h=library.math.polar2cartesian(r.ang,r.dis);d&&x[2].push({x:h.x+t.x,y:h.y+t.y});r=h.x;k=h.y;for(h=m=l=0;h<u;h++)q=(r-l)/2+l,f=(k-m)/2+m,q=b.active?Math.round(q/b.x)*b.x:q,f=b.active?Math.round(f/b.y)*b.y:f,d&&x[2].push({x:q+t.x,y:k+t.y}),library.math.detectOverlap.overlappingPolygonWithPolygons(g({x:q,y:k},a),c)?l=q:r=q,d&&x[2].push({x:r+t.x,y:f+t.y}),library.math.detectOverlap.overlappingPolygonWithPolygons(g({x:r,y:f},a),c)?m=f:k=f;h={x:r,y:k};
return d?{offset:h,paths:x}:h}}},communicationModuleMaker=function(a,c){var b=this;this.log=function(){};this.function={};this.delayedFunction={};var d=0,e={};a.onmessage=function(c){var d=c.data;d.outgoing?d.cargo.function in b.function?(void 0==d.cargo.arguments&&(d.cargo.arguments=[]),null==d.id?b.function[d.cargo.function].apply(b.function,$jscomp.arrayFromIterable(d.cargo.arguments)):a.postMessage({id:d.id,outgoing:!1,cargo:b.function[d.cargo.function].apply(b.function,$jscomp.arrayFromIterable(d.cargo.arguments))})):
d.cargo.function in b.delayedFunction&&(void 0==d.cargo.arguments&&(d.cargo.arguments=[]),null==d.id?b.delayedFunction[d.cargo.function].apply(b.delayedFunction,$jscomp.arrayFromIterable(d.cargo.arguments)):b.delayedFunction[d.cargo.function].apply(b.delayedFunction,$jscomp.arrayFromIterable([function(b){a.postMessage({id:d.id,outgoing:!1,cargo:b})}].concat(d.cargo.arguments)))):(e[d.id](d.cargo),delete e[d.id])};this.run=function(b,c,x,t){c=void 0===c?[]:c;var g=null;void 0!=x&&(g=d++,e[g]=x);a.postMessage({id:g,
outgoing:!0,cargo:{function:b,arguments:c}},t)}},communicationModule=new communicationModuleMaker(this,"core_engine"),dev={prefix:"core_engine",element:{active:!1,fontStyle:"color:rgb(161, 145, 80); font-style:italic;"},elementLibrary:{active:!1,fontStyle:"color:rgb(129, 80, 161); font-style:italic;"},arrangement:{active:!1,fontStyle:"color:rgb(80, 161, 141); font-style:italic;"},render:{active:!1,fontStyle:"color:rgb(161, 84, 80); font-style:italic;"},viewport:{active:!1,fontStyle:"color:rgb(80, 134, 161); font-style:italic;"},
stats:{active:!1,fontStyle:"color:rgb(87, 80, 161); font-style:italic;"},callback:{active:!1,fontStyle:"color:rgb(122, 163, 82); font-style:italic;"},_interface:{active:!1,fontStyle:"color:rgb(77, 171, 169); font-style:italic;"},log:{element:function(a){dev.element.active&&console.log("%c"+dev.prefix+"e.element"+(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))).join(" "),dev.element.fontStyle)},elementLibrary:function(a,c,b){dev.elementLibrary.active&&
console.log("%c"+dev.prefix+".elementLibrary."+a+"["+c+"]"+(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))).slice(2).join(" "),dev.elementLibrary.fontStyle)},arrangement:function(a){dev.arrangement.active&&console.log("%c"+dev.prefix+".arrangement"+(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))).join(" "),dev.arrangement.fontStyle)},render:function(a){dev.render.active&&console.log("%c"+dev.prefix+".render"+
(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))).join(" "),dev.render.fontStyle)},viewport:function(a){dev.viewport.active&&console.log("%c"+dev.prefix+"e.viewport"+(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))).join(" "),dev.viewport.fontStyle)},stats:function(a){dev.stats.active&&console.log("%c"+dev.prefix+".stats"+(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))).join(" "),
dev.stats.fontStyle)},callback:function(a){dev.callback.active&&console.log("%c"+dev.prefix+".callback"+(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))).join(" "),dev.callback.fontStyle)},_interface:function(a){dev._interface.active&&console.log("%c"+dev.prefix+"._interface"+(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))).join(" "),dev._interface.fontStyle)}}},report={info:function(){console.log.apply(console,
$jscomp.arrayFromIterable(["core_engine.report.info:"].concat.apply(["core_engine.report.info:"],$jscomp.arrayFromIterable(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))))))},warning:function(){console.warn.apply(console,$jscomp.arrayFromIterable(["core_engine.report.warning:"].concat.apply(["core_engine.report.warning:"],$jscomp.arrayFromIterable(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))))))},error:function(){console.error.apply(console,
$jscomp.arrayFromIterable(["core_engine.report.error:"].concat.apply(["core_engine.report.error:"],$jscomp.arrayFromIterable(new (Function.prototype.bind.apply(Array,[null].concat($jscomp.arrayFromIterable(arguments))))))))}},element=new function(){function a(){var a=d.findIndex(function(a){return void 0==a});return-1!=a?a:d.length}function c(a){return a.getId()}var b=new function(){this.rectangle=function(a,b){function c(a,b){a=void 0===a?!0:a;void 0==b&&(b=d.parent&&!z?d.parent.getOffset():{x:0,
y:0,scale:1,angle:0});var c=library.math.cartesianAngleAdjust(q,f,b.angle),e=c.x*b.scale+b.x;c=c.y*b.scale+b.y;var g=b.scale*w;b=-(b.angle+y);d.extremities.points=[];for(var n=0;n<C.length;n+=2){var B=g*m*(C[n]-l.x),h=g*r*(C[n+1]-l.y);d.extremities.points.push({x:B*Math.cos(b)+h*Math.sin(b)+e,y:h*Math.cos(b)-B*Math.sin(b)+c})}d.extremities.boundingBox=library.math.boundingBoxFromPoints(d.extremities.points);a&&d.parent&&d.parent.updateExtremities()}function e(){d.extremities.points.forEach(function(a){return render.drawDot(a.x,
a.y)});render.drawDot(d.extremities.boundingBox.topLeft.x,d.extremities.boundingBox.topLeft.y,3,{r:0,g:1,b:1,a:.5});render.drawDot(d.extremities.boundingBox.bottomRight.x,d.extremities.boundingBox.bottomRight.y,3,{r:0,g:1,b:1,a:.5})}var d=this;this.getType=function(){return"rectangle"};this.getId=function(){return b};this.name=a;this.parent=void 0;this.dotFrame=!1;this.extremities={points:[],boundingBox:{bottomRight:{x:0,y:0},topLeft:{x:0,y:0}}};var g=!1;this.ignored=function(a){if(void 0==a)return g;
g=a;c()};var k={r:1,g:0,b:0,a:1};this.colour=function(a){if(void 0==a)return k;k=a;c()};var q=0,f=0,y=0,l={x:0,y:0},m=10,r=10,w=1,z=!1;this.x=function(a){if(void 0==a)return q;q=a;c()};this.y=function(a){if(void 0==a)return f;f=a;c()};this.angle=function(a){if(void 0==a)return y;y=a;c()};this.anchor=function(a){if(void 0==a)return l;l=a;c()};this.width=function(a){if(void 0==a)return m;m=a;c()};this.height=function(a){if(void 0==a)return r;r=a;c()};this.scale=function(a){if(void 0==a)return w;w=a;
c()};this._static=function(a){if(void 0==a)return z;z=a;c()};this.unifiedAttribute=function(a){if(void 0==a)return{x:q,y:f,angle:y,anchor:l,width:m,height:r,scale:w,ignored:g,colour:k,_static:z};"ignored"in a&&(g=a.ignored);"colour"in a&&(k=a.colour);"x"in a&&(q=a.x);"y"in a&&(f=a.y);"angle"in a&&(y=a.angle);"anchor"in a&&(l=a.anchor);"width"in a&&(m=a.width);"height"in a&&(r=a.height);"scale"in a&&(w=a.scale);"_static"in a&&(w=a._static);c()};this.getAddress=function(){return(void 0!=d.parent?d.parent.getAddress():
"")+"/"+d.name};var C=[0,0,1,0,1,1,0,1],p=void 0,A=void 0,v,n;this.computeExtremities=c;this.render=function(a,b){b=void 0===b?{x:0,y:0,scale:1,angle:0}:b;var c=library.math.cartesianAngleAdjust(q,f,b.angle),g=c.x*b.scale+b.x;c=c.y*b.scale+b.y;var h=b.scale*w;b=-(b.angle+y);void 0==n&&(n=render.produceProgram(d.getType(),"#version 300 es\n                        //constants\n                            in vec2 point;\n            \n                        //variables\n                            struct location{\n                                vec2 xy;\n                                float scale;\n                                float angle;\n                            };\n                            uniform location adjust;\n            \n                            uniform vec2 resolution;\n                            uniform vec2 dimensions;\n                            uniform vec2 anchor;\n            \n                        void main(){\n                            //using the 'adjust' values; perform anchored rotation, and leave shape with it's anchor over the chosen point\n                                vec2 P = dimensions * adjust.scale * (point - anchor);\n                                P = vec2( P.x*cos(adjust.angle) + P.y*sin(adjust.angle), P.y*cos(adjust.angle) - P.x*sin(adjust.angle) ) + adjust.xy;\n            \n                            //convert from unit space to clipspace\n                                gl_Position = vec4( (((P / resolution) * 2.0) - 1.0) * vec2(1, -1), 0, 1 );\n                        }\n                    ",
"#version 300 es\n                        precision mediump float;\n                        out vec4 outputColor;\n                        uniform vec4 colour;\n                                                                                    \n                        void main(){\n                            outputColor = colour;\n                        }\n                    "));a.useProgram(n);void 0==p?(A=a.getAttribLocation(n,"point"),p=a.createBuffer(),a.enableVertexAttribArray(A),a.bindBuffer(a.ARRAY_BUFFER,
p),a.vertexAttribPointer(A,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,new Float32Array(C),a.STATIC_DRAW)):(a.bindBuffer(a.ARRAY_BUFFER,p),a.vertexAttribPointer(A,2,a.FLOAT,!1,0,0));void 0==v&&(v={"adjust.xy":a.getUniformLocation(n,"adjust.xy"),"adjust.scale":a.getUniformLocation(n,"adjust.scale"),"adjust.angle":a.getUniformLocation(n,"adjust.angle"),resolution:a.getUniformLocation(n,"resolution"),dimensions:a.getUniformLocation(n,"dimensions"),anchor:a.getUniformLocation(n,"anchor"),colour:a.getUniformLocation(n,
"colour")});a.uniform2f(v["adjust.xy"],g,c);a.uniform1f(v["adjust.scale"],h);a.uniform1f(v["adjust.angle"],b);a.uniform2f(v.resolution,a.canvas.width,a.canvas.height);a.uniform2f(v.dimensions,m,r);a.uniform2f(v.anchor,l.x,l.y);a.uniform4f(v.colour,k.r,k.g,k.b,k.a);a.drawArrays(a.TRIANGLE_FAN,0,4);d.dotFrame&&e()};this._dump=function(){report.info(d.getAddress(),"._dump()");report.info(d.getAddress(),"._dump -> id: "+b);report.info(d.getAddress(),"._dump -> parent: "+JSON.stringify(d.parent));report.info(d.getAddress(),
"._dump -> dotFrame: "+d.dotFrame);report.info(d.getAddress(),"._dump -> extremities: "+JSON.stringify(d.extremities));report.info(d.getAddress(),"._dump -> ignored: "+g);report.info(d.getAddress(),"._dump -> colour: "+JSON.stringify(k));report.info(d.getAddress(),"._dump -> x: "+q);report.info(d.getAddress(),"._dump -> y: "+f);report.info(d.getAddress(),"._dump -> angle: "+y);report.info(d.getAddress(),"._dump -> anchor: "+JSON.stringify(l));report.info(d.getAddress(),"._dump -> width: "+m);report.info(d.getAddress(),
"._dump -> height: "+r);report.info(d.getAddress(),"._dump -> scale: "+w);report.info(d.getAddress(),"._dump -> _static: "+z)};this._interface=new function(){this.ignored=d.ignored;this.colour=d.colour;this.x=d.x;this.y=d.y;this.angle=this.angle=d.angle;this.anchor=d.anchor;this.width=d.width;this.scale=d.scale;this._static=d._static;this.unifiedAttribute=d.unifiedAttribute;this.getAddress=d.getAddress;this._dump=d._dump}};this.group=function(a,b){function c(a){return void 0==a?!1:0==a.name.length?
(console.warn('group error: element with no name being inserted into group "'+f.getAddress()+'", therefore; the element will not be added'),!1):void 0!=A[a.name]?(console.warn('group error: element with name "'+a.name+'" already exists in group "'+f.getAddress()+'", therefore; the element will not be added'),!1):!0}function d(){var a=0,b=0,c=0,d=0;p.forEach(function(e){e=library.math.boundingBoxFromPoints(e.extremities.points);e.bottomRight.x>b?b=e.bottomRight.x:e.topLeft.x<a&&(a=e.topLeft.x);e.bottomRight.y>
c?c=e.bottomRight.y:e.topLeft.y<d&&(d=e.topLeft.y)});f.extremities.points=[{x:a,y:c},{x:b,y:c},{x:b,y:d},{x:a,y:d}]}function e(a){a=void 0===a?!0:a;f.extremities.points=[];v.active&&void 0!=v.stencil?f.extremities.points=v.stencil.extremities.points.slice():d();f.extremities.boundingBox=library.math.boundingBoxFromPoints(f.extremities.points);a&&f.parent&&f.parent.updateExtremities()}function g(a,b){a=void 0===a?!0:a;void 0==b&&(b=f.parent&&!f._static()?f.parent.getOffset():{x:0,y:0,scale:1,angle:0});
var c=library.math.cartesianAngleAdjust(l,m,b.angle),d={x:c.x*b.scale+b.x,y:c.y*b.scale+b.y,scale:b.scale*w,angle:b.angle+r};p.forEach(function(a){return a.computeExtremities(!1,d)});void 0!=v.stencil&&v.stencil.computeExtremities(!1,d);e(a,b)}function k(a){var b=f.parent&&!f._static()?f.parent.getOffset():{x:0,y:0,scale:1,angle:0},c=library.math.cartesianAngleAdjust(l,m,b.angle);a.computeExtremities(!1,{x:c.x*b.scale+b.x,y:c.y*b.scale+b.y,scale:b.scale*w,angle:b.angle+r});f.extremities.boundingBox=
library.math.boundingBoxFromPoints(f.extremities.points.concat(a.extremities.points));f.extremities.points=[{x:f.extremities.boundingBox.topLeft.x,y:f.extremities.boundingBox.topLeft.y},{x:f.extremities.boundingBox.bottomRight.x,y:f.extremities.boundingBox.topLeft.y},{x:f.extremities.boundingBox.bottomRight.x,y:f.extremities.boundingBox.bottomRight.y},{x:f.extremities.boundingBox.topLeft.x,y:f.extremities.boundingBox.bottomRight.y}];f.parent&&f.parent.updateExtremities()}function q(a){var b={topLeft:{x:f.extremities.boundingBox.topLeft.x-
a.extremities.boundingBox.topLeft.x,y:f.extremities.boundingBox.topLeft.y-a.extremities.boundingBox.topLeft.y},bottomRight:{x:a.extremities.boundingBox.bottomRight.x-f.extremities.boundingBox.bottomRight.x,y:a.extremities.boundingBox.bottomRight.y-f.extremities.boundingBox.bottomRight.y}};0!=b.topLeft.x&&0!=b.topLeft.y&&0!=b.bottomRight.x&&0!=b.bottomRight.y||["topLeft","bottomRight"].forEach(function(a){["x","y"].forEach(function(c){if(0==b[a][c]){for(var d=!1,e=void 0,g=void 0,n=0;n<p.length;n++){var h=
Math.abs(p[n].extremities.boundingBox[a][c]-f.extremities.boundingBox[a][c]);if(void 0==e||e>h)if(e=h,g=p[n].extremities.boundingBox[a][c],0==e){d=!0;break}}d||(f.extremities.boundingBox[a][c]=g)}})})}var f=this;this.getType=function(){return"group"};this.getId=function(){return b};this.name=a;this.parent=void 0;this.dotFrame=!1;this.extremities={points:[],boundingBox:{bottomRight:{x:0,y:0},topLeft:{x:0,y:0}}};var y=!1;this.ignored=function(a){if(void 0==a)return y;y=a;g()};var l=0,m=0,r=0,w=1,z=
!1,C=!1;this.x=function(a){if(void 0==a)return l;l=a;g()};this.y=function(a){if(void 0==a)return m;m=a;g()};this.angle=function(a){if(void 0==a)return r;r=a;g()};this.scale=function(a){if(void 0==a)return w;w=a;g()};this.heedCamera=function(a){if(void 0==a)return z;z=a;g()};this._static=function(a){if(void 0==a)return C;C=a;g()};this.unifiedAttribute=function(a){if(void 0==a)return{x:l,y:m,angle:r,scale:w,ignored:y,heedCamera:z,_static:C};"ignored"in a&&(y=a.ignored);"x"in a&&(l=a.x);"y"in a&&(m=
a.y);"angle"in a&&(r=a.angle);"scale"in a&&(w=a.scale);"heedCamera"in a&&(w=a.heedCamera);"_static"in a&&(w=a._static);g()};this.getAddress=function(){return(void 0!=f.parent?f.parent.getAddress():"")+"/"+f.name};var p=[],A={};this.children=function(){return p};this.getChildByName=function(a){return A[a]};this.getChildIndexByName=function(a){return p.indexOf(p.find(function(b){return b.name==a}))};this.contains=function(a){return p.find(function(b){return b==a})};this.append=function(a){if(c(a)&&
(p.push(a),a.parent=this,k(a),A[a.name]=a,void 0!=a.onadd))a.onadd(!1)};this.prepend=function(a){if(c(a)&&(p.unshift(a),a.parent=this,k(a),A[a.name]=a,void 0!=a.onadd))a.onadd(!0)};this.remove=function(a){if(void 0!=a){if(void 0!=a.onremove)a.onremove();p.splice(p.indexOf(a),1);q(a);a.parent=void 0;delete A[a.name]}};this.clear=function(){p=[];A={}};this.getElementsUnderPoint=function(a,b){for(var c=[],d=p.length-1;0<=d;d--)p[d].ignored()||library.math.detectOverlap.pointWithinBoundingBox({x:a,y:b},
p[d].extremities.boundingBox)&&("group"==p[d].getType()?c=c.concat(p[d].getElementsUnderPoint(a,b)):library.math.detectOverlap.pointWithinPoly({x:a,y:b},p[d].extremities.points)&&(c=c.concat(p[d])));return c};this.getElementsUnderArea=function(a){for(var b=[],c=p.length-1;0<=c;c--)p[c].ignored()||library.math.detectOverlap.boundingBoxes(library.math.boundingBoxFromPoints(a),item.extremities.boundingBox)&&("group"==p[c].getType()?b=b.concat(item.getElementUnderArea(a)):library.math.detectOverlap.overlappingPolygons(a,
item.extremities.points)&&(b=b.concat(p[c])));return b};this.getTree=function(){var a={name:this.name,type:"group",children:[]};p.forEach(function(b){"group"==b.getType()?a.children.push(b.getTree()):a.children.push({type:b.getType(),name:b.name})});return a};var v={stencil:void 0,active:!1};this.stencil=function(a){if(void 0==a)return v.stencil;v.stencil=a;v.stencil.parent=this;v.active&&g()};this.clipActive=function(a){if(void 0==a)return v.active;v.active=a;g()};this.getOffset=function(){if(this.parent){var a=
this.parent.getOffset(),b=library.math.cartesianAngleAdjust(l,m,a.angle);return{x:b.x*a.scale+a.x,y:b.y*a.scale+a.y,scale:a.scale*w,angle:a.angle+r}}return{x:l,y:m,scale:w,angle:r}};this.computeExtremities=g;this.updateExtremities=e;this.render=function(a,b){var c=library.math.cartesianAngleAdjust(l,m,b.angle),d={x:c.x*b.scale+b.x,y:c.y*b.scale+b.y,scale:b.scale*w,angle:b.angle+r};v.active&&void 0!=v.stencil&&(a.enable(a.STENCIL_TEST),a.colorMask(!1,!1,!1,!1),a.stencilFunc(a.ALWAYS,1,255),a.stencilOp(a.KEEP,
a.KEEP,a.REPLACE),a.stencilMask(255),v.stencil.render(a,d),a.colorMask(!0,!0,!0,!0),a.stencilFunc(a.EQUAL,1,255));p.forEach(function(b){library.math.detectOverlap.boundingBoxes(v.active?f.extremities.boundingBox:viewport.getBoundingBox(),b.extremities.boundingBox)&&b.render(a,d)});v.active&&(a.disable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT));f.dotFrame&&(render.drawDot(f.extremities.boundingBox.topLeft.x,f.extremities.boundingBox.topLeft.y,3,{r:0,g:0,b:0,a:.75}),render.drawDot(f.extremities.boundingBox.bottomRight.x,
f.extremities.boundingBox.bottomRight.y,3,{r:0,g:0,b:0,a:.75}))};this._dump=function(){report.info(f.getAddress(),"._dump()");report.info(f.getAddress(),"._dump -> id: "+b);report.info(f.getAddress(),"._dump -> parent: "+JSON.stringify(f.parent));report.info(f.getAddress(),"._dump -> dotFrame: "+f.dotFrame);report.info(f.getAddress(),"._dump -> extremities: "+JSON.stringify(f.extremities));report.info(f.getAddress(),"._dump -> ignored: "+y);report.info(f.getAddress(),"._dump -> x: "+l);report.info(f.getAddress(),
"._dump -> y: "+m);report.info(f.getAddress(),"._dump -> angle: "+r);report.info(f.getAddress(),"._dump -> scale: "+w);report.info(f.getAddress(),"._dump -> heedCamera: "+z);report.info(f.getAddress(),"._dump -> _static: "+C);report.info(f.getAddress(),"._dump -> children: "+JSON.stringify(p));report.info(f.getAddress(),"._dump -> childRegistry: "+JSON.stringify(A));report.info(f.getAddress(),"._dump -> clipping: "+JSON.stringify(v))};this._interface=new function(){this.ignored=f.ignored;this.x=f.x;
this.y=f.y;this.angle=f.angle;this.scale=f.scale;this.heedCamera=f.heedCamera;this._static=f._static;this.unifiedAttribute=f.unifiedAttribute;this.getAddress=f.getAddress;this.children=function(){return f.children().map(function(a){return element.getIdFromElement(a)})};this.getChildByName=function(a){return element.getIdFromElement(f.getChildByName(a))};this.getChildIndexByName=f.getChildIndexByName;this.contains=function(a){return f.contains(element.getElementFromId(a))};this.append=function(a){return f.append(element.getElementFromId(a))};
this.prepend=function(a){return f.prepend(element.getElementFromId(a))};this.remove=function(a){return f.remove(element.getElementFromId(a))};this.clear=f.clear;this.getElementsUnderPoint=function(a,b){return element.getIdFromElement(f.getElementsUnderPoint(a,b))};this.getElementsUnderArea=function(a){return element.getIdFromElement(f.getElementsUnderArea(a))};this.getTree=f.getTree;this.stencil=f.stencil;this.clipActive=f.clipActive;this._dump=f._dump}}};this.getAvailableElements=function(){return Object.keys(b)};
var d=[];this.getElementFromId=function(a){return d[a]};this.getIdFromElement=c;this.getCreatedElements=function(){return d};this.create_skipDatabase=function(a,c){return new b[a](c,-1)};this.create=function(c,g){if(void 0==c)report.error("elememt.createElement: type argument not provided - element will not be produced");else if(void 0==g)report.error("elememt.createElement: name argument not provided - element will not be produced");else if(void 0==b[c])report.error('elememt.createElement: type "'+
c+'" does not exist - element will not be produced');else{var e=a();d[e]=new b[c](g,e);return d[e]}};this.delete=function(a){d[c(a)]=void 0};this.deleteAllCreated=function(){for(var a=0;a<d.length;a++)this.delete(d[a])};this.getTypeById=function(a){return a.getType()};this._dump=function(){report.info("element._dump()");Object.keys(b).forEach(function(a){report.info("element._dump -> elementLibrary: "+a)});0==reatedElements.length?report.info("element._dump -> there are no created elements"):1==reatedElements.length?
report.info("element._dump -> there is 1 created element"):report.info("element._dump -> there are "+d.length+" created elements");d.forEach(function(a){report.info("element._dump -> createdElements: "+JSON.stringify(a))})}},arrangement=new function(){var a=element.create_skipDatabase("group","root");this.new=function(){a=core.shape.create("group")};this.get=function(){return a};this.set=function(c){a=c};this.prepend=function(c){a.prepend(c)};this.append=function(c){a.append(c)};this.remove=function(c){a.remove(c)};
this.clear=function(){a.clear()};this.getElementByAddress=function(c){c=c.split("/");c.shift();c.shift();var b=a;c.forEach(function(a){b=b.getChildByName(a)});return b};this.getElementsUnderPoint=function(c,b){return a.getElementsUnderPoint(c,b)};this.getElementsUnderArea=function(c){return a.getElementsUnderArea(c)};this.printTree=function(c){function b(a,e){e=void 0===e?"":e;a.children.forEach(function(a){"spaced"==c?(console.log(e+"- "+a.name),"group"==a.type&&b(a,e+"- ")):"tabular"==c?(console.log(e+
"- \t"+a.name),"group"==a.type&&b(a,e+"-\t")):"address"==c&&(console.log(e+"/"+a.name),"group"==a.type&&b(a,e+"/"+a.name))})}c=void 0===c?"spaced":c;b(a.getTree(),"/root")};this._dump=function(){a._dump()}},render=new function(){function a(a){(void 0===a?0:a)||h.clear(h.COLOR_BUFFER_BIT|h.STENCIL_BUFFER_BIT);arrangement.get().render(h,{x:0,y:0,scale:1,angle:0});a=g.transferToImageBitmap();_interface.printToScreen(a)}function c(b){x=requestAnimationFrame(c);if(k.active){var d=Date.now(),e=d-k.previousRenderTime;
if(e<k.interval)return;k.previousRenderTime=d-e%k.interval}try{a()}catch(l){render.active(!1),console.error("major animation error"),console.error(l)}stats.collect(b)}var b=this,d=!0;this.isBusy=function(){return d};var e={defaultCanvasSize:{width:800,height:600},currentCanvasSize:{width:800,height:600},selectedCanvasSize:{width:800,height:600},devicePixelRatio:1},g=new OffscreenCanvas(e.defaultCanvasSize.width,e.defaultCanvasSize.height),h=g.getContext("webgl2",{alpha:!1,preserveDrawingBuffer:!0,
stencil:!0}),x=void 0,t={r:1,g:1,b:1,a:1};h.enable(h.BLEND);h.blendFunc(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA);var u={};this.produceProgram=function(a,b,c){function d(a,b){function c(a,b){var c=h.createShader(a);h.shaderSource(c,b);h.compileShader(c);if(h.getShaderParameter(c,h.COMPILE_STATUS))return c;console.error("major error in core's \""+a+'" shader creation');console.error(h.getShaderInfoLog(c));h.deleteShader(c)}var d=h.createProgram();h.attachShader(d,c(h.VERTEX_SHADER,a));h.attachShader(d,c(h.FRAGMENT_SHADER,
b));h.linkProgram(d);if(h.getProgramParameter(d,h.LINK_STATUS))return d;console.error("major error in core's program creation");console.error(h.getProgramInfoLog(d));h.deleteProgram(d)}a in u||(u[a]=d(b,c),h.useProgram(u[a]));return u[a]};this.clearColour=function(a){if(void 0==a)return t;t=a;h.clearColor(t.r,t.g,t.b,1)};this.adjustCanvasSize=function(a,c){function f(a,c){c*=e.devicePixelRatio;void 0!=c?e.currentCanvasSize[a]!=c&&(e.currentCanvasSize[a]=c,g[a]=e.currentCanvasSize[a]):e.currentCanvasSize[a]!=
e.defaultCanvasSize[a]&&(e.currentCanvasSize[a]=e.defaultCanvasSize[a],g[a]=e.currentCanvasSize[a]);b.refreshCoordinates();k[a]=!1;d=k.width||k.height}function h(a){var b=a[0].toUpperCase()+a.slice(1);_interface.getCanvasAttributes([b],[!0]).then(function(c){function d(a,b){report.error("Canvas element "+a+" is of an unparseable format: "+b);f(a,e.defaultCanvasSize[a])}e.selectedCanvasSize[a]=c[0];var g=e.selectedCanvasSize[a];g.indexOf("%")==g.length-1?_interface.getCanvasParentAttributes(["offset"+
b]).then(function(b){b=b[0];var c=parseFloat(g.slice(0,-1))/100;isNaN(c)?d(a,g):f(a,b*c)}):-1!=g.indexOf("px")?(c=parseFloat(g.slice(0,-2)),isNaN(c)?d(a,g):f(a,c)):(c=parseFloat(g),isNaN(c)?d(a,g):f(a,c))})}var k={width:!1,height:!1};d=!0;_interface.getWindowAttributes(["devicePixelRatio"]).then(function(b){e.devicePixelRatio=b[0];k={width:!0,height:!0};void 0!=a?f("width",a*e.devicePixelRatio):h("width");void 0!=c?f("height",c*e.devicePixelRatio):h("height")})};this.refreshCoordinates=function(){var a=
h.canvas.width,b=h.canvas.height,c;if(1==e.devicePixelRatio){var d=c=0;var g=a;var k=b}else c=0,d=-b,g=2*a,k=2*b;h.viewport(c,d,g,k);_interface.setCanvasAttributes([{name:"width",value:a/e.devicePixelRatio},{name:"height",value:b/e.devicePixelRatio}])};this.refresh=function(a){this.clearColour(t);this.frameRateLimit(this.frameRateLimit());this.adjustCanvasSize();var b=setInterval(function(){render.isBusy()||(clearInterval(b),a&&a())},1)};var k={active:!1,previousRenderTime:Date.now(),limit:30,interval:0};
this.activeLimitToFrameRate=function(a){if(void 0==a)return k.active;k.active=a};this.frameRateLimit=function(a){if(void 0==a)return k.limit;k.limit=a;k.interval=1E3/k.limit};this.frame=function(b){a(void 0===b?!1:b)};this.active=function(a){if(void 0==a)return void 0!=x;a?void 0==x&&c():void 0!=x&&(cancelAnimationFrame(x),x=void 0)};this.getCanvasSize=function(){return{width:e.currentCanvasSize.width/e.devicePixelRatio,height:e.currentCanvasSize.height/e.devicePixelRatio}};this._dump=function(){report.info("render._dump()");
report.info("render._dump -> pageData: "+JSON.stringify(e));report.info("render._dump -> storedPrograms: "+JSON.stringify(u));report.info("render._dump -> frameRateControl: "+JSON.stringify(k));report.info("render._dump -> clearColour: "+JSON.stringify(t))}},viewport=new function(){function a(){var a=render.getCanvasSize();d.points.tl={x:0,y:0};d.points.tr={x:a.width,y:0};d.points.bl={x:0,y:a.height};d.points.br={x:a.width,y:a.height};d.boundingBox=library.math.boundingBoxFromPoints([d.points.tl,
d.points.tr,d.points.br,d.points.bl])}var c=this,b={position:{x:0,y:0},scale:1,angle:0},d={points:{tl:{x:0,y:0},tr:{x:0,y:0},bl:{x:0,y:0},br:{x:0,y:0}},boundingBox:{topLeft:{x:0,y:0},bottomRight:{x:0,y:0}}},e={x:void 0,y:void 0,stopScrollActive:!1};this.adapter=new function(){this.windowPoint2workspacePoint=function(a,b){var c=viewport.position(),d=viewport.scale(),e=viewport.angle();a={x:a,y:b};a.x=(a.x-c.x)/d;a.y=(a.y-c.y)/d;return a=library.math.cartesianAngleAdjust(a.x,a.y,-e)}};this.position=
function(d,e){if(void 0==d||void 0==e)return{x:b.position.x,y:b.position.y};b.position.x=d;b.position.y=e;arrangement.get().children().forEach(function(a){a.heedCamera&&a.unifiedAttribute({x:b.position.x,y:b.position.y})});a();c.onCameraAdjust(Object.assign({},b))};this.scale=function(d){if(void 0==d)return b.scale;b.scale=0>=d?1:d;arrangement.get().children().forEach(function(a){a.heedCamera&&a.scale(b.scale)});a();c.onCameraAdjust(Object.assign({},b))};this.angle=function(d){if(void 0==d)return b.angle;
b.angle=d;arrangement.get().children().forEach(function(a){a.heedCamera&&a.angle(b.angle)});a();c.onCameraAdjust(Object.assign({},b))};this.getElementsUnderPoint=function(a,b){a=this.adapter.windowPoint2canvasPoint(a,b);return arrangement.getElementUnderPoint(a.x,a.y)};this.getElementsUnderArea=function(a){var b=this;return arrangement.getElementsUnderArea(a.map(function(a){return b.adapter.windowPoint2canvasPoint(a.x,a.y)}))};this.calculateViewportExtremities=a;this.refresh=function(){a()};this.getBoundingBox=
function(){return d.boundingBox};this.mousePosition=function(a,b){if(void 0==a||void 0==b)return{x:e.x,y:e.y};e.x=a;e.y=b};this.stopMouseScroll=function(a){if(void 0==a)return e.stopScrollActive;e.stopScrollActive=a;if(!a)_interface["document.body.style.overflow"]("")};this._dump=function(){report.info("viewport._dump()");report.info("viewport._dump -> state: "+JSON.stringify(b));report.info("viewport._dump -> viewbox: "+JSON.stringify(d));report.info("viewport._dump -> mouseData: "+JSON.stringify(e))};
this.onCameraAdjust=function(a){}},stats=new function(){var a=!1,c=0,b={compute:function(a){this.frameTimeArray.push(1E3/(a-c));30<=this.frameTimeArray.length&&this.frameTimeArray.shift();this.rate=library.math.averageArray(this.frameTimeArray);c=a},counter:0,frameTimeArray:[],rate:0};this.collect=function(c){a&&b.compute(c)};this.active=function(b){if(void 0==b)return a;a=b};this.getReport=function(){return{framesPerSecond:b.rate}}},callback=new function(){function a(a,b,c){return{point:0<c?viewport.adapter.windowPoint2workspacePoint(a.X,
a.Y):void 0,elements:3<c?arrangement.getElementsUnderPoint(a.X,a.Y):void 0}}var c=this,b=this,d="onmousedown onmouseup onmousemove onmouseenter onmouseleave onwheel onclick ondblclick onmouseenterelement onmouseleaveelement onkeydown onkeyup".split(" ");this.listCallbackTypes=function(){return d};var e={};d.forEach(function(a){return e[a]=!0});this.getElementCallbackState=function(a){return e[a]};this.activateElementCallback=function(a){e[a]=!0};this.disactivateElementCallback=function(a){e[a]=!1};
this.activateAllElementCallbacks=function(){var a=this;d.forEach(function(b){return a.activateElementCallback(b)})};this.disactivateAllElementCallbacks=function(){var a=this;d.forEach(function(b){return a.disactivateElementCallback(b)})};this.activateAllElementCallbacks();this.attachCallback=function(a,b){a[b]=function(){}};this.removeCallback=function(a,b){a[b]=void 0;delete a[b]};this.functions={};this.coupling={};for(var g=0;g<d.length;g++)this.coupling[d[g]]=function(c){return function(d){var e=
a(d,c,b.functions[c].length);b.functions[c](e.point.x,e.point.y,d,e.elements)}}(d[g]);this.coupling.onmouseenter=function(a){if(viewport.stopMouseScroll())_interface["document.body.style.overflow"]("hidden")};this.coupling.onmouseleave=function(a){if(viewport.stopMouseScroll())_interface["document.body.style.overflow"]("")};var h=[];this.coupling.onmousemove=function(a){viewport.mousePosition(a.X,a.Y);var c=arrangement.getElementsUnderPoint(a.X,a.Y),d=viewport.adapter.windowPoint2workspacePoint(a.X,
a.Y),f=library.math.getDifferenceOfArrays(h,c);if(e.onmouseenter){if(0<f.b.length)b.functions.onmouseenterelement(d.x,d.y,a,f.b);if(0<f.a.length)b.functions.onmouseleaveelement(d.x,d.y,a,f.a)}f.b.forEach(function(a){h.push(a)});f.a.forEach(function(a){h.splice(h.indexOf(a),1)});if(b.functions.onmousemove)b.functions.onmousemove(d.x,d.y,a,c)};this.coupling.onwheel=function(c){if(b.functions.onwheel){var d=a(c,"onwheel",b.functions.onwheel.length);b.functions.onwheel(d.point.x,d.point.y,c,d.elements)}};
["onkeydown","onkeyup"].forEach(function(d){c.coupling[d]=function(c){return function(d){var e=viewport.mousePosition();d.X=e.x;d.Y=e.y;e=viewport.adapter.windowPoint2workspacePoint(d.X,d.Y);if(b.functions[c]){var g=a(d,c,b.functions[c].length);b.functions[c](e.x,e.y,d,g.elements)}}}(d)});var x=[];this.coupling.onmousedown=function(a){var c=arrangement.getElementsUnderPoint(a.X,a.Y),d=viewport.adapter.windowPoint2workspacePoint(a.X,a.Y);x=c;if(b.functions.onmousedown)b.functions.onmousedown(d.x,d.y,
a,c)};this.coupling.onmouseup=function(c){if(b.functions.onmouseup){var d=a(c,"onmouseup",b.functions.onmouseup.length);b.functions.onmouseup(d.point.x,d.point.y,c,d.elements)}};var t=[];this.coupling.onclick=function(c){if(b.functions.onclick){var d=a(c,"onclick",b.functions.onclick.length);d.elements=d.elements.filter(function(a){return x.includes(a)});t=d.elements;b.functions.onclick(d.point.x,d.point.y,c,d.elements)}};this.coupling.ondblclick=function(c){if(b.functions.ondblclick){var d=a(c,"ondblclick",
b.functions.ondblclick.length);d.elements=d.elements.filter(function(a){return t.includes(a)});b.functions.ondblclick(d.point.x,d.point.y,c,d.elements)}}};communicationModule.function.areYouReady=function(){return!0};communicationModule.delayedFunction.refresh=function(a){render.refresh(function(){viewport.refresh();a()})};
communicationModule.function.createSetAppend=function(a,c,b,d){var e=element.create(a,c);a=element.getIdFromElement(e);Object.keys(b).forEach(function(a){e[a].apply(e,[b[a]])});-1==d||void 0==d?arrangement.append(e):element.getElementFromId(d).append(a);return a};communicationModule.function["_dump.element"]=function(){element._dump()};communicationModule.function["_dump.arrangement"]=function(){arrangement._dump()};communicationModule.function["_dump.render"]=function(){render._dump()};
communicationModule.function["_dump.viewport"]=function(){viewport._dump()};communicationModule.function["_dump.callback"]=function(){callback._dump()};communicationModule.function["boatload.element.executeMethod"]=function(a){a.forEach(function(a){communicationModule.function["element.executeMethod"](a.id,a.method,a.argumentList)})};communicationModule.function["element.getAvailableElements"]=function(){return element.getAvailableElements()};
communicationModule.function["element.getCreatedElements"]=function(){return element.getCreatedElements().map(function(a){return element.getIdFromElement(a)})};communicationModule.function["element.create"]=function(a,c){return element.getIdFromElement(element.create(a,c))};communicationModule.function["element.delete"]=function(a){element.delete(element.getElementFromId(a))};communicationModule.function["element.deleteAllCreated"]=function(){element.deleteAllCreated()};
communicationModule.function["element.getTypeById"]=function(a){return element.getTypeById(element.getElementFromId(a))};communicationModule.function["element.executeMethod"]=function(a,c,b){b=void 0===b?[]:b;return element.getElementFromId(a)._interface[c].apply(element.getElementFromId(a)._interface,$jscomp.arrayFromIterable(b))};communicationModule.function["arrangement.new"]=function(){arrangement.new()};communicationModule.function["arrangement.prepend"]=function(a){arrangement.prepend(element.getElementFromId(a))};
communicationModule.function["arrangement.append"]=function(a){arrangement.append(element.getElementFromId(a))};communicationModule.function["arrangement.remove"]=function(a){arrangement.remove(element.getElementFromId(a))};communicationModule.function["arrangement.clear"]=function(){arrangement.clear()};communicationModule.function["arrangement.getElementAddress"]=function(a){return element.getElementFromId(a).getAddress()};communicationModule.function["arrangement.getElementByAddress"]=function(a){return element.getIdFromElement(arrangement.getElementByAddress(a))};
communicationModule.function["arrangement.getElementsUnderPoint"]=function(a,c){return arrangement.getElementsUnderPoint(a,c).map(function(a){return element.getIdFromElement(a)})};communicationModule.function["arrangement.getElementsUnderArea"]=function(a){return arrangement.getElementsUnderArea(a).map(function(a){return element.getIdFromElement(a)})};communicationModule.function["arrangement.printTree"]=function(a){arrangement.printTree(a)};communicationModule.delayedFunction["render.refresh"]=function(a){render.refresh(a)};
communicationModule.function["render.clearColour"]=function(a){return render.clearColour(a)};communicationModule.function["render.adjustCanvasSize"]=function(a,c){render.adjustCanvasSize(a,c)};communicationModule.function["render.getCanvasSize"]=function(){return render.getCanvasSize()};communicationModule.function["render.activeLimitToFrameRate"]=function(a){return render.activeLimitToFrameRate(a)};communicationModule.function["render.frameRateLimit"]=function(a){return render.frameRateLimit(a)};
communicationModule.function["render.frame"]=function(){render.frame()};communicationModule.function["render.active"]=function(a){return render.active(a)};communicationModule.function["viewport.refresh"]=function(){viewport.refresh()};communicationModule.function["viewport.position"]=function(a,c){return viewport.position(a,c)};communicationModule.function["viewport.scale"]=function(a){return viewport.scale(a)};communicationModule.function["viewport.angle"]=function(a){return viewport.angle(a)};
communicationModule.function["viewport.getElementsUnderPoint"]=function(a,c){return viewport.getElementsUnderPoint(a,c)};communicationModule.function["viewport.getElementsUnderArea"]=function(a){return viewport.getElementsUnderArea(a)};communicationModule.function["viewport.getMousePosition"]=function(){return viewport.mousePosition()};communicationModule.function["viewport.getBoundingBox"]=function(){return viewport.getBoundingBox()};communicationModule.function["viewport.stopMouseScroll"]=function(a){return viewport.stopMouseScroll(a)};
communicationModule.function["stats.active"]=function(a){return stats.active(a)};communicationModule.function["stats.getReport"]=function(){return stats.getReport()};communicationModule.function["callback.listCallbackTypes"]=function(){return callback.listCallbackTypes()};communicationModule.function["callback.getCallbackTypeState"]=function(a){return callback.getCallbackTypeState(a)};communicationModule.function["callback.activateCallbackType"]=function(a){callback.activateCallbackType(a)};
communicationModule.function["callback.disactivateCallbackType"]=function(a){callback.disactivateCallbackType(a)};communicationModule.function["callback.activateAllCallbackTypes"]=function(){callback.activateAllCallbackTypes()};communicationModule.function["callback.disactivateAllCallbackTypes"]=function(){callback.disactivateAllCallbackTypes()};communicationModule.function["callback.attachCallback"]=function(a,c){callback.attachCallback(element.getElementFromId(a),c)};
communicationModule.function["callback.removeCallback"]=function(a,c){callback.removeCallback(element.getElementFromId(a),c)};callback.listCallbackTypes().forEach(function(a){communicationModule.function["callback.coupling."+a]=function(c){callback.coupling[a](c)}});
var _interface=new function(){this.go=function(){communicationModule.run("go")};this.printToScreen=function(a){communicationModule.run("printToScreen",[a],void 0,[a])};this.onViewportAdjust=function(a){communicationModule.run("onViewportAdjust",[a])};this.getCanvasAttributes=function(a,c){a=void 0===a?[]:a;c=void 0===c?[]:c;return new Promise(function(b,d){communicationModule.run("getCanvasAttributes",[a,c],b)})};this.setCanvasAttributes=function(a,c,b){a=void 0===a?[]:a;c=void 0===c?[]:c;b=void 0===
b?[]:b;communicationModule.run("setCanvasAttributes",[a,c,b])};this.getCanvasParentAttributes=function(a,c){a=void 0===a?[]:a;c=void 0===c?[]:c;return new Promise(function(b,d){communicationModule.run("getCanvasParentAttributes",[a,c],b)})};this.getDocumentAttributes=function(a){a=void 0===a?[]:a;return new Promise(function(c,b){communicationModule.run("getDocumentAttributes",[a],c)})};this.setDocumentAttributes=function(a,c){a=void 0===a?[]:a;c=void 0===c?[]:c;communicationModule.run("setDocumentAttributes",
[a,c])};this.getWindowAttributes=function(a){a=void 0===a?[]:a;return new Promise(function(c,b){communicationModule.run("getWindowAttributes",[a],c)})};this.setWindowAttributes=function(a,c){a=void 0===a?[]:a;c=void 0===c?[]:c;communicationModule.run("setWindowAttributes",[a,c])}};callback.listCallbackTypes().forEach(function(a){callback.functions[a]=function(c,b,d,e){communicationModule.run("callback."+a,[c,b,d,e.map(function(a){return element.getIdFromElement(a)})])}});
render.refresh(function(){viewport.refresh();_interface.go()});
