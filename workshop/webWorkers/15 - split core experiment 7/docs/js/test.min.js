var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(q){var m=0;return function(){return m<q.length?{done:!1,value:q[m++]}:{done:!0}}};$jscomp.arrayIterator=function(q){return{next:$jscomp.arrayIteratorImpl(q)}};$jscomp.makeIterator=function(q){var m="undefined"!=typeof Symbol&&Symbol.iterator&&q[Symbol.iterator];return m?m.call(q):$jscomp.arrayIterator(q)};$jscomp.arrayFromIterator=function(q){for(var m,b=[];!(m=q.next()).done;)b.push(m.value);return b};
$jscomp.arrayFromIterable=function(q){return q instanceof Array?q:$jscomp.arrayFromIterator($jscomp.makeIterator(q))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(q,m,b){q!=Array.prototype&&q!=Object.prototype&&(q[m]=b.value)};
$jscomp.getGlobal=function(q){return"undefined"!=typeof window&&window===q?q:"undefined"!=typeof global&&null!=global?global:q};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(q,m){this.$jscomp$symbol$id_=q;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:m})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function q(b){if(this instanceof q)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+m++,b)}var m=0;return q}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var q=$jscomp.global.Symbol.iterator;q||(q=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[q]&&$jscomp.defineProperty(Array.prototype,q,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var q=$jscomp.global.Symbol.asyncIterator;q||(q=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(q){$jscomp.initSymbolIterator();q={next:q};q[$jscomp.global.Symbol.iterator]=function(){return this};return q};
$jscomp.iteratorFromArray=function(q,m){$jscomp.initSymbolIterator();q instanceof String&&(q+="");var b=0,a={next:function(){if(b<q.length){var c=b++;return{value:m(c,q[c]),done:!1}}a.next=function(){return{done:!0,value:void 0}};return a.next()}};a[Symbol.iterator]=function(){return a};return a};
$jscomp.polyfill=function(q,m,b,a){if(m){b=$jscomp.global;q=q.split(".");for(a=0;a<q.length-1;a++){var c=q[a];c in b||(b[c]={});b=b[c]}q=q[q.length-1];a=b[q];m=m(a);m!=a&&null!=m&&$jscomp.defineProperty(b,q,{configurable:!0,writable:!0,value:m})}};$jscomp.polyfill("Array.prototype.keys",function(q){return q?q:function(){return $jscomp.iteratorFromArray(this,function(m){return m})}},"es6","es3");
$jscomp.polyfill("Array.prototype.flat",function(q){return q?q:function(m){m=void 0===m?1:m;for(var b=[],a=0;a<this.length;a++){var c=this[a];Array.isArray(c)&&0<m?(c=Array.prototype.flat.call(c,m-1),b.push.apply(b,c)):b.push(c)}return b}},"es9","es5");
$jscomp.polyfill("Array.from",function(q){return q?q:function(m,b,a){b=null!=b?b:function(a){return a};var c=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&m[Symbol.iterator];if("function"==typeof f){m=f.call(m);for(var e=0;!(f=m.next()).done;)c.push(b.call(a,f.value,e++))}else for(f=m.length,e=0;e<f;e++)c.push(b.call(a,m[e],e));return c}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var q={},m=Object.create(new $jscomp.global.Proxy(q,{get:function(b,a,c){return b==q&&"q"==a&&c==m}}));return!0===m.q}catch(b){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(q,m){return Object.prototype.hasOwnProperty.call(q,m)};
$jscomp.polyfill("WeakMap",function(q){function m(){if(!q||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),b=new q([[a,2],[c,3]]);if(2!=b.get(a)||3!=b.get(c))return!1;b.delete(a);b.set(c,4);return!b.has(a)&&4==b.get(c)}catch(n){return!1}}function b(){}function a(a){if(!$jscomp.owns(a,f)){var c=new b;$jscomp.defineProperty(a,f,{value:c})}}function c(c){var e=Object[c];e&&(Object[c]=function(c){if(c instanceof b)return c;a(c);return e(c)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(q&&
$jscomp.ES6_CONFORMANCE)return q}else if(m())return q;var f="$jscomp_hidden_"+Math.random();c("freeze");c("preventExtensions");c("seal");var e=0,k=function(a){this.id_=(e+=Math.random()+1).toString();if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};k.prototype.set=function(c,b){a(c);if(!$jscomp.owns(c,f))throw Error("WeakMap key fail: "+c);c[f][this.id_]=b;return this};k.prototype.get=function(a){return $jscomp.owns(a,f)?a[f][this.id_]:void 0};k.prototype.has=
function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};k.prototype.delete=function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(q){function m(){if($jscomp.ASSUME_NO_NATIVE_MAP||!q||"function"!=typeof q||!q.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new q($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var b=c.entries(),e=b.next();if(e.done||e.value[0]!=a||"s"!=e.value[1])return!1;e=b.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!b.next().done?!1:!0}catch(v){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(q&&$jscomp.ES6_CONFORMANCE)return q}else if(m())return q;$jscomp.initSymbolIterator();var b=new WeakMap,a=function(a){this.data_={};this.head_=e();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};a.prototype.set=function(a,b){a=0===a?0:a;var e=c(this,a);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=b:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,
value:b},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};a.prototype.delete=function(a){a=c(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=e();this.size=0};a.prototype.has=function(a){return!!c(this,a).entry};
a.prototype.get=function(a){return(a=c(this,a).entry)&&a.value};a.prototype.entries=function(){return f(this,function(a){return[a.key,a.value]})};a.prototype.keys=function(){return f(this,function(a){return a.key})};a.prototype.values=function(){return f(this,function(a){return a.value})};a.prototype.forEach=function(a,c){for(var b=this.entries(),e;!(e=b.next()).done;)e=e.value,a.call(c,e[1],e[0],this)};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(a,c){var e=c&&typeof c;"object"==
e||"function"==e?b.has(c)?e=b.get(c):(e=""+ ++k,b.set(c,e)):e="p_"+c;var f=a.data_[e];if(f&&$jscomp.owns(a.data_,e))for(a=0;a<f.length;a++){var h=f[a];if(c!==c&&h.key!==h.key||c===h.key)return{id:e,list:f,index:a,entry:h}}return{id:e,list:f,index:-1,entry:void 0}},f=function(a,c){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}})},e=function(){var a={};return a.previous=
a.next=a.head=a},k=0;return a},"es6","es3");
$jscomp.polyfill("Set",function(q){function m(){if($jscomp.ASSUME_NO_NATIVE_SET||!q||"function"!=typeof q||!q.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new q($jscomp.makeIterator([a]));if(!c.has(a)||1!=c.size||c.add(a)!=c||1!=c.size||c.add({x:4})!=c||2!=c.size)return!1;var b=c.entries(),e=b.next();if(e.done||e.value[0]!=a||e.value[1]!=a)return!1;e=b.next();return e.done||e.value[0]==a||4!=e.value[0].x||e.value[1]!=e.value[0]?!1:b.next().done}catch(k){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(q&&$jscomp.ES6_CONFORMANCE)return q}else if(m())return q;$jscomp.initSymbolIterator();var b=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};b.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};b.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};b.prototype.clear=function(){this.map_.clear();
this.size=0};b.prototype.has=function(a){return this.map_.has(a)};b.prototype.entries=function(){return this.map_.entries()};b.prototype.values=function(){return this.map_.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,c){var b=this;this.map_.forEach(function(e){return a.call(c,e,e,b)})};return b},"es6","es3");
$jscomp.polyfill("Object.entries",function(q){return q?q:function(m){var b=[],a;for(a in m)$jscomp.owns(m,a)&&b.push([a,m[a]]);return b}},"es8","es3");$jscomp.findInternal=function(q,m,b){q instanceof String&&(q=String(q));for(var a=q.length,c=0;c<a;c++){var f=q[c];if(m.call(b,f,c,q))return{i:c,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(q){return q?q:function(m,b){return $jscomp.findInternal(this,m,b).v}},"es6","es3");
$jscomp.checkStringArgs=function(q,m,b){if(null==q)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(m instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return q+""};
$jscomp.polyfill("String.prototype.codePointAt",function(q){return q?q:function(m){var b=$jscomp.checkStringArgs(this,null,"codePointAt"),a=b.length;m=Number(m)||0;if(0<=m&&m<a){m|=0;var c=b.charCodeAt(m);if(55296>c||56319<c||m+1===a)return c;m=b.charCodeAt(m+1);return 56320>m||57343<m?c:1024*(c-55296)+m+9216}}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(q){return q?q:function(m,b,a){var c=this.length||0;0>b&&(b=Math.max(0,c+b));if(null==a||a>c)a=c;a=Number(a);0>a&&(a=Math.max(0,c+a));for(b=Number(b||0);b<a;b++)this[b]=m;return this}},"es6","es3");$jscomp.polyfill("Math.sign",function(q){return q?q:function(m){m=Number(m);return 0===m||isNaN(m)?m:0<m?1:-1}},"es6","es3");
$jscomp.polyfill("Math.trunc",function(q){return q?q:function(m){m=Number(m);if(isNaN(m)||Infinity===m||-Infinity===m||0===m)return m;var b=Math.floor(Math.abs(m));return 0>m?-b:b}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(q){function m(){this.batch_=null}function b(a){return a instanceof c?a:new c(function(c,b){c(a)})}if(q&&!$jscomp.FORCE_POLYFILL_PROMISE)return q;m.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})}this.batch_.push(a)};var a=$jscomp.global.setTimeout;m.prototype.asyncExecuteFunction=function(c){a(c,0)};m.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var b=a[c];a[c]=null;try{b()}catch(h){this.asyncThrow_(h)}}}this.batch_=null};m.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var c=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(p){c.reject(p)}};c.prototype.createResolveAndReject_=function(){function a(a){return function(e){b||(b=!0,a.call(c,e))}}var c=this,b=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};c.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof c)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};c.prototype.resolveToNonPromiseObj_=function(a){var c=void 0;try{c=a.then}catch(p){this.reject_(p);return}"function"==typeof c?
this.settleSameAsThenable_(c,a):this.fulfill_(a)};c.prototype.reject_=function(a){this.settle_(2,a)};c.prototype.fulfill_=function(a){this.settle_(1,a)};c.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)f.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var f=new m;c.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};c.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(h){b.reject(h)}};c.prototype.then=function(a,b){function e(a,c){return"function"==typeof a?function(c){try{k(a(c))}catch(A){f(A)}}:c}var k,f,n=new c(function(a,c){k=a;f=c});this.callWhenSettled_(e(a,k),e(b,f));return n};
c.prototype.catch=function(a){return this.then(void 0,a)};c.prototype.callWhenSettled_=function(a,c){function b(){switch(e.state_){case 1:a(e.result_);break;case 2:c(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?f.asyncExecute(b):this.onSettledCallbacks_.push(b)};c.resolve=b;c.reject=function(a){return new c(function(c,b){b(a)})};c.race=function(a){return new c(function(c,e){for(var k=$jscomp.makeIterator(a),f=k.next();!f.done;f=k.next())b(f.value).callWhenSettled_(c,
e)})};c.all=function(a){var e=$jscomp.makeIterator(a),f=e.next();return f.done?b([]):new c(function(a,c){function k(c){return function(b){h[c]=b;p--;0==p&&a(h)}}var h=[],p=0;do h.push(void 0),p++,b(f.value).callWhenSettled_(k(h.length-1),c),f=e.next();while(!f.done)})};return c},"es6","es3");
for(var __canvasPrefix="workspace",__canvasElements=document.getElementsByTagName("canvas"),$jscomp$loop$2={},__canvasElements_count=0;__canvasElements_count<__canvasElements.length;$jscomp$loop$2={$jscomp$loop$prop$randomRectangleCount$3:$jscomp$loop$2.$jscomp$loop$prop$randomRectangleCount$3},__canvasElements_count++)if(__canvasElements[__canvasElements_count].hasAttribute(__canvasPrefix)){var tester=function(q,m){function b(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function a(c,
f){if(b(c)!=b(f))return!1;if("boolean"==typeof c||"string"==typeof c)return c===f;if("number"==typeof c)return 1E-14>Math.abs(c)&&(c=0),1E-14>Math.abs(f)&&(f=0),1E-14>Math.abs(c-f)?!0:c===f;if("undefined"===typeof c||"undefined"===typeof f||null===c||null===f)return c===f;if("function"==b(c)){c=c.toString();f=f.toString();var e=c.substring(0,c.indexOf("{"));e=e.substring(e.indexOf("(")+1,e.lastIndexOf(")"));c=c.substring(c.indexOf("{")+1,c.lastIndexOf("}"));var k=f.substring(0,f.indexOf("{"));k=k.substring(k.indexOf("(")+
1,k.lastIndexOf(")"));f=f.substring(f.indexOf("{")+1,f.lastIndexOf("}"));return e.trim()==k.trim()&&c.trim()==f.trim()}if("object"==typeof c){e=Object.keys(c);k=Object.keys(f);if(e.length!=k.length)return!1;for(var p=0;p<e.length;p++)if(-1==e.indexOf(k[p])||!a(c[e[p]],f[e[p]]))return!1;return!0}return!1}if(a(q,m))return console.log("%cpass","color: green;"),!0;console.log(q,"!=",m);console.log("%cfail","color: red;");return!1},_canvas_=__canvasElements[__canvasElements_count];_canvas_.library=new function(){this.versionInformation=
{tick:0,lastDateModified:{y:2019,m:10,d:4}};var q=this;this._control=new function(){this.logflow=new function(){var b=!1,a={};this.active=function(a){if(void 0==a)return b;b=a};this.printResults=function(){return a};this.log=function(c){b&&(c in a?a[c]++:a[c]=1)}}};this.math=new function(){this.averageArray=function(b){for(var a=b[0],c=1;c<b.length;c++)a+=b[c];return a/b.length};this.averagePoint=function(b){var a=b.reduce(function(a,b){return{x:a.x+b.x,y:a.y+b.y}});return{x:a.x/b.length,y:a.y/b.length}};
this.boundingBoxFromPoints=function(b){if(0==b.length)return{topLeft:{x:0,y:0},bottomRight:{x:0,y:0}};for(var a=b[0].x,c=b[0].x,f=b[0].y,e=b[0].y,k=1;k<b.length;k++)b[k].x<a?a=b[k].x:b[k].x>c&&(c=b[k].x),b[k].y<f?f=b[k].y:b[k].y>e&&(e=b[k].y);return{topLeft:{x:a,y:f},bottomRight:{x:c,y:e}}};this.cartesianAngleAdjust=function(b,a,c){return 0==c?{x:b,y:a}:{x:b*Math.cos(c)-a*Math.sin(c),y:a*Math.cos(c)+b*Math.sin(c)}};this.convertColour=new function(){this.obj2rgba=function(b){return"rgba("+255*b.r+
","+255*b.g+","+255*b.b+","+b.a+")"};this.rgba2obj=function(b){b=b.split(",");b[0]=b[0].replace("rgba(","");b[3]=b[3].replace(")","");b=b.map(function(a){return parseFloat(a)});return{r:b[0]/255,g:b[1]/255,b:b[2]/255,a:b[3]}}};this.curveGenerator=new function(){this.linear=function(b,a,c){a=void 0===a?0:a;c=void 0===c?1:c;b=Math.abs(void 0===b?2:b)-1;for(var f=[0],e=1;e<b;e++)f.push(e/b);f.push(1);b=c-a;for(e=0;e<f.length;e++)f[e]=f[e]*b+a;return f};this.sin=function(b,a,c){a=void 0===a?0:a;c=void 0===
c?1:c;b=Math.abs(void 0===b?2:b)-1;for(var f=[0],e=1;e<b;e++)f.push(Math.sin(Math.PI/2*(e/b)));f.push(1);b=c-a;for(e=0;e<f.length;e++)f[e]=f[e]*b+a;return f};this.cos=function(b,a,c){a=void 0===a?0:a;c=void 0===c?1:c;b=Math.abs(void 0===b?2:b)-1;for(var f=[0],e=1;e<b;e++)f.push(1-Math.cos(Math.PI/2*(e/b)));f.push(1);b=c-a;for(e=0;e<f.length;e++)f[e]=f[e]*b+a;return f};this.s=function(b,a,c,f){b=void 0===b?2:b;a=void 0===a?0:a;c=void 0===c?1:c;f=void 0===f?8:f;0==f&&(f=1E-6);for(var e=[],k=0;k<b;k++)e.push(1/
(1+Math.exp(-f*(k/b-.5))));b=q.math.normalizeStretchArray(e);c-=a;for(k=0;k<b.length;k++)b[k]=b[k]*c+a;return b};this.exponential=function(b,a,c,f){a=void 0===a?0:a;c=void 0===c?1:c;f=void 0===f?2:f;b=(void 0===b?2:b)-1;for(var e=[],k=0;k<=b;k++)e.push((Math.exp(k/b*f)-1)/(Math.E-1));e=q.math.normalizeStretchArray(e);b=c-a;for(k=0;k<e.length;k++)e[k]=e[k]*b+a;return e}};this.curvePoint=new function(){this.linear=function(b,a,c){a=void 0===a?0:a;return(void 0===b?.5:b)*((void 0===c?1:c)-a)+a};this.sin=
function(b,a,c){a=void 0===a?0:a;return Math.sin(Math.PI/2*(void 0===b?.5:b))*((void 0===c?1:c)-a)+a};this.cos=function(b,a,c){a=void 0===a?0:a;return(1-Math.cos(Math.PI/2*(void 0===b?.5:b)))*((void 0===c?1:c)-a)+a};this.s=function(b,a,c,f){a=void 0===a?0:a;c=void 0===c?1:c;f=void 0===f?8:f;return q.math.normalizeStretchArray([1/(1+Math.exp(-.5*-f)),1/(1+Math.exp(-f*((void 0===b?.5:b)-.5))),1/(1+Math.exp(.5*-f))])[1]*(c-a)+a};this.exponential=function(b,a,c,f){a=void 0===a?0:a;c=void 0===c?1:c;f=
void 0===f?2:f;return q.math.normalizeStretchArray([(Math.exp(0*f)-1)/(Math.E-1),(Math.exp(f*(void 0===b?.5:b))-1)/(Math.E-1),(Math.exp(1*f)-1)/(Math.E-1)])[1]*(c-a)+a}};this.detectOverlap=new function(){var b=this;this.boundingBoxes=function(a,c){return a.bottomRight.y>=c.topLeft.y&&a.bottomRight.x>=c.topLeft.x&&a.topLeft.y<=c.bottomRight.y&&a.topLeft.x<=c.bottomRight.x};this.pointWithinBoundingBox=function(a,c){return!(a.x<c.topLeft.x||a.y<c.topLeft.y||a.x>c.bottomRight.x||a.y>c.bottomRight.y)};
this.pointWithinPoly=function(a,c){for(var b=!1,e=0,k=c.length-1;e<c.length;k=e++){if(a.x==c[e].x&&a.y==c[e].y)return!0;if(c[k].y>=a.y&&c[e].y<=a.y||c[e].y>=a.y&&c[k].y<=a.y)if(c[e].x<a.x&&c[k].x<a.x)b=!b;else{if(c[k].y>c[e].y&&c[k].x>c[e].x)var p=(a.x-c[e].x)/(c[k].x-c[e].x)-(a.y-c[e].y)/(c[k].y-c[e].y)+1;else c[k].y<=c[e].y&&c[k].x<=c[e].x?p=(a.x-c[k].x)/(c[e].x-c[k].x)-(a.y-c[k].y)/(c[e].y-c[k].y)+1:c[k].y>c[e].y&&c[k].x<c[e].x?p=(a.x-c[k].x)/(c[e].x-c[k].x)+(a.y-c[e].y)/(c[k].y-c[e].y):c[k].y<=
c[e].y&&c[k].x>=c[e].x&&(p=(a.x-c[e].x)/(c[k].x-c[e].x)+(a.y-c[k].y)/(c[e].y-c[k].y));if(1==p)return!0;1<p&&(b=!b)}}return b};this.lineSegments=function(a,c){var b=(c[1].y-c[0].y)*(a[1].x-a[0].x)-(c[1].x-c[0].x)*(a[1].y-a[0].y);if(0==b)return null;var e=((c[1].x-c[0].x)*(a[0].y-c[0].y)-(c[1].y-c[0].y)*(a[0].x-c[0].x))/b;c=((a[1].x-a[0].x)*(a[0].y-c[0].y)-(a[1].y-a[0].y)*(a[0].x-c[0].x))/b;return{x:a[0].x+e*(a[1].x-a[0].x),y:a[0].y+e*(a[1].y-a[0].y),inSeg1:0<=e&&1>=e,inSeg2:0<=c&&1>=c}};this.overlappingPolygons=
function(a,c){for(var f=0;f<a.length;f++)if(b.pointWithinPoly(a[f],c))return!0;for(f=0;f<c.length;f++)if(b.pointWithinPoly(c[f],a))return!0;var e=Array.apply(null,{length:a.length}).map(Number.call,Number).concat([0]),k=Array.apply(null,{length:c.length}).map(Number.call,Number).concat([0]);for(f=0;f<e.length-1;f++)for(var p=0;p<k.length-1;p++){var h=b.lineSegments([a[e[f]],a[e[f+1]]],[c[k[p]],c[k[p+1]]]);if(null!=h&&h.inSeg1&&h.inSeg2)return!0}return!1};this.overlappingPolygonWithPolygons=function(a,
c){for(var f=0;f<c.length;f++)if(b.boundingBoxes(a.boundingBox,c[f].boundingBox)&&b.overlappingPolygons(a.points,c[f].points))return!0;return!1};this.overlappingLineWithPolygons=function(a,c){var b={topLeft:{x:0,y:0},bottomRight:{x:0,y:0}};a.x1>a.x2?(b.topLeft.x=a.x2,b.bottomRight.x=a.x1):(b.topLeft.x=a.x1,b.bottomRight.x=a.x2);a.y1>a.y2?(b.topLeft.y=a.y2,b.bottomRight.y=a.y1):(b.topLeft.y=a.y1,b.bottomRight.y=a.y2);var e=[];c.forEach(function(c,f){if(q.math.detectOverlap.boundingBoxes(b,c.boundingBox)){a:{for(var k=
c.points.length-1,p=0;p<c.points.length;k=p++)if(k=q.math.detectOverlap.lineSegments([{x:a.x1,y:a.y1},{x:a.x2,y:a.y2}],[{x:c.points[k].x,y:c.points[k].y},{x:c.points[p].x,y:c.points[p].y}]),null!=k&&k.inSeg1&&k.inSeg2){c=!0;break a}c=!1}c&&e.push(f)}});return e}};this.getAngleOfTwoPoints=function(b,a){if(b.x==a.x&&b.y==a.y)return 0;var c=a.x-b.x;b=a.y-b.y;a=Math.atan(b/c);0>c?a=Math.PI+a:0>b&&(a=2*Math.PI+a);return a};this.getDifferenceOfArrays=function(b,a){function c(a,c){a.forEach(function(a){a=
c.indexOf(a);-1!=a&&c.splice(a,1)});return c}return{a:c(a,b.slice()),b:c(b,a.slice())}};this.getIndexOfSequence=function(b,a){function c(a,c){var b=Object.keys(a);if(0==b.length)return a==c;for(var e=0;e<b.length;e++)if(!c.hasOwnProperty(b[e])||a[b[e]]!=c[b[e]])return!1;return!0}if(0!=b.length&&0!=a.length){var f=0;for(f=0;f<b.length-a.length+1;f++)if(c(b[f],a[0])){for(var e=!0,k=1;k<a.length;k++)if(!c(b[f+k],a[k])){e=!1;break}if(e)return f}}};this.largestValueFound=function(b){if(0!=b.length)return b.reduce(function(a,
c){return Math.abs(a)>Math.abs(c)?a:c})};this.normalizeStretchArray=function(b){var a=b.reduce(function(a,c,b,f){return c>f[a]?b:a},0),c=Math.abs(b[a]);b=b.map(function(a){return a/c});if(0==b[0]&&1==b[b.length-1])return b;var f=0!=b[0]?b[0]:b[b.length-1];return b=b.map(function(a){return(a-f)/(1-f)})};this.relativeDistance=function(b,a,c,f,e){a=(f-a)/(c-a);if(void 0===e||!e){if(1<a)return b;if(0>a)return 0}return a*b};this.removeTheseElementsFromThatArray=function(b,a){b.forEach(function(c){return a.splice(a.indexOf(c),
1)});return a};this.seconds2time=function(b){var a={h:0,m:0,s:0};a.h=Math.floor(b/3600);b-=3600*a.h;a.m=Math.floor(b/60);b-=60*a.m;a.s=b;return a};this.cartesian2polar=function(b,a){return{dis:Math.pow(Math.pow(b,2)+Math.pow(a,2),.5),ang:0===b?0===a?0:0<a?.5*Math.PI:1.5*Math.PI:0===a?0<=b?0:Math.PI:0<=b?Math.atan(a/b):Math.atan(a/b)+Math.PI}};this.polar2cartesian=function(b,a){return{x:a*Math.cos(b),y:a*Math.sin(b)}};this.blendColours=function(b,a,c){return{r:(1-c)*b.r+c*a.r,g:(1-c)*b.g+c*a.g,b:(1-
c)*b.b+c*a.b,a:(1-c)*b.a+c*a.a}};this.multiBlendColours=function(b,a){if(0==a)return b[0];if(1==a)return b[b.length-1];a*=b.length-1;return q.math.blendColours(b[~~a],b[~~a+1],a%1)};this.polygonToSubTriangles=function(b,a){if("flatArray"==(void 0===a?"XYArray":a)){a=[];for(var c=0;c<b.length;c+=2)a.push({x:b[c+0],y:b[c+1]});b=[a]}var f=b.reverse().map(function(a){return a.length});f.forEach(function(a,c){0<c&&(f[c]=a+f[c-1])});f.pop();return m.earcut(b.flat().map(function(a){return[a.x,a.y]}).flat(),
f)};this.unionPolygons=function(b,a){return m.PolyBool.union({regions:b.map(function(a){return a.map(function(a){return[a.x,a.y]})})},{regions:a.map(function(a){return a.map(function(a){return[a.x,a.y]})})}).regions.map(function(a){return a.map(function(a){return{x:a[0],y:a[1]}})})};this.pathExtrapolation=function(b,a,c,f,e,k,p){function h(a){var c=[(a[0]+a[2])/2,(a[1]+a[3])/2],b=[];b=b.concat(c);for(var e=2;e<a.length;e+=2)b=b.concat([a[e],a[e+1]]);b=b.concat([a[0],a[1]]);return b=b.concat(c)}function r(a,
c){for(var b=[],e=_canvas_.library.math.cartesianAngleAdjust(c,0,a[0].departAngle-Math.PI/2),k={x:-e.x,y:-e.y},f=1;f<a.length-1;f++){var n=e,h=k;e=_canvas_.library.math.cartesianAngleAdjust(c,0,a[f].departAngle-Math.PI/2);k={x:-e.x,y:-e.y};a[f].joiningAngle!=Math.PI&&(a[f].joiningAngle<Math.PI?b.push([{x:a[f].point.x,y:a[f].point.y},{x:a[f].point.x+h.x,y:a[f].point.y+h.y},{x:a[f].point.x+k.x,y:a[f].point.y+k.y}]):a[f].joiningAngle>Math.PI&&b.push([{x:a[f].point.x,y:a[f].point.y},{x:a[f].point.x+n.x,
y:a[f].point.y+n.y},{x:a[f].point.x+e.x,y:a[f].point.y+e.y}]))}return b}function n(a,c,b){b=void 0===b?5:b;var e=[];1>b&&(b=1);for(var f=_canvas_.library.math.cartesianAngleAdjust(c,0,a[0].departAngle-Math.PI/2),k={x:-f.x,y:-f.y},n=1;n<a.length-1;n++){var h=[],v=f,w=k;f=_canvas_.library.math.cartesianAngleAdjust(c,0,a[n].departAngle-Math.PI/2);k={x:-f.x,y:-f.y};if(a[n].joiningAngle!=Math.PI)if(a[n].joiningAngle<Math.PI){h.push({x:a[n].point.x,y:a[n].point.y});h.push({x:a[n].point.x+w.x,y:a[n].point.y+
w.y});for(var p=Math.PI-a[n].joiningAngle,r=Math.floor(Math.abs(p)/Math.PI*(2+b)),x=1;x<r;x++){var F=p/r*x;F=_canvas_.library.math.cartesianAngleAdjust(w.x,w.y,-F);h.push({x:a[n].point.x+F.x,y:a[n].point.y+F.y})}h.push({x:a[n].point.x+k.x,y:a[n].point.y+k.y})}else if(a[n].joiningAngle>Math.PI){h.push({x:a[n].point.x,y:a[n].point.y});h.push({x:a[n].point.x+v.x,y:a[n].point.y+v.y});p=Math.PI-a[n].joiningAngle;r=Math.floor(Math.abs(p)/Math.PI*(2+b));for(x=1;x<r;x++)F=p/r*x,F=_canvas_.library.math.cartesianAngleAdjust(v.x,
v.y,-F),h.push({x:a[n].point.x+F.x,y:a[n].point.y+F.y});h.push({x:a[n].point.x+f.x,y:a[n].point.y+f.y})}e.push(h)}return e}function v(a,c,b){b=void 0===b?4*c:b;for(var e=[],f=_canvas_.library.math.cartesianAngleAdjust(c,0,a[0].departAngle-Math.PI/2),k={x:-f.x,y:-f.y},n=1;n<a.length-1;n++){var h=[],v=f,w=k;f=_canvas_.library.math.cartesianAngleAdjust(c,0,a[n].departAngle-Math.PI/2);k={x:-f.x,y:-f.y};if(a[n].joiningAngle!=Math.PI)if(a[n].joiningAngle<Math.PI){if(Math.abs(a[n].wingWidth)<=b){var p=_canvas_.library.math.cartesianAngleAdjust(0,
a[n].wingWidth,Math.PI/2+a[n].wingAngle);h.push({x:p.x+a[n].point.x,y:p.y+a[n].point.y});h.push({x:a[n].point.x+w.x,y:a[n].point.y+w.y});h.push({x:a[n].point.x,y:a[n].point.y})}else{var r=Math.cos(a[n].joiningAngle/2)*b;p=_canvas_.library.math.cartesianAngleAdjust(0,-r,Math.PI/2+a[n].implementAngle);r=_canvas_.library.math.cartesianAngleAdjust(0,r,Math.PI/2+a[n].departAngle);h.push({x:a[n].point.x,y:a[n].point.y});h.push({x:a[n].point.x+w.x,y:a[n].point.y+w.y});h.push({x:a[n].point.x+w.x+p.x,y:a[n].point.y+
w.y+p.y});h.push({x:a[n].point.x+k.x+r.x,y:a[n].point.y+k.y+r.y})}h.push({x:a[n].point.x+k.x,y:a[n].point.y+k.y})}else a[n].joiningAngle>Math.PI&&(Math.abs(a[n].wingWidth)<=b?(p=_canvas_.library.math.cartesianAngleAdjust(0,-a[n].wingWidth,Math.PI/2+a[n].wingAngle),h.push({x:p.x+a[n].point.x,y:p.y+a[n].point.y}),h.push({x:a[n].point.x+v.x,y:a[n].point.y+v.y}),h.push({x:a[n].point.x,y:a[n].point.y})):(r=Math.cos(a[n].joiningAngle/2)*b,p=_canvas_.library.math.cartesianAngleAdjust(0,r,Math.PI/2+a[n].implementAngle),
r=_canvas_.library.math.cartesianAngleAdjust(0,-r,Math.PI/2+a[n].departAngle),h.push({x:a[n].point.x,y:a[n].point.y}),h.push({x:a[n].point.x+v.x,y:a[n].point.y+v.y}),h.push({x:a[n].point.x+v.x+p.x,y:a[n].point.y+v.y+p.y}),h.push({x:a[n].point.x+f.x+r.x,y:a[n].point.y+f.y+r.y})),h.push({x:a[n].point.x+f.x,y:a[n].point.y+f.y}));e.push(h)}return e}function m(a,c,b){b=void 0===b?5:b;1>b&&(b=1);var e=[],n=[];n.push({x:a[0].point.x,y:a[0].point.y});for(var f=0;f<b+1;f++){var k=_canvas_.library.math.cartesianAngleAdjust(c,
0,a[0].departAngle+Math.PI/2+f/b*Math.PI);n.push({x:a[0].point.x+k.x,y:a[0].point.y+k.y})}e.push(n);n=[];n.push({x:a[a.length-1].point.x,y:a[a.length-1].point.y});for(f=0;f<b+1;f++)k=_canvas_.library.math.cartesianAngleAdjust(c,0,a[a.length-1].implementAngle-Math.PI/2+f/b*Math.PI),n.push({x:a[a.length-1].point.x+k.x,y:a[a.length-1].point.y+k.y});e.push(n);return e}a=void 0===a?10:a;c=void 0===c?"none":c;f=void 0===f?"none":f;k=void 0===k?5:k;p=void 0===p?4*a:p;(void 0===e?0:e)&&(b=h(b));e=function(a,
c){for(var b=[],e=0;e<a.length/2;e++)b.push({point:{x:a[2*e],y:a[2*e+1]}});for(e=0;e<b.length;e++)if(e!=b.length-1&&(a=_canvas_.library.math.getAngleOfTwoPoints(b[e].point,b[e+1].point),void 0!=b[e]&&(b[e].departAngle=a),void 0!=b[e+1]&&(b[e+1].implementAngle=a)),void 0!=b[e].departAngle&&void 0!=b[e].implementAngle){for(b[e].joiningAngle=b[e].departAngle-b[e].implementAngle+Math.PI;0>b[e].joiningAngle;)b[e].joiningAngle+=2*Math.PI;for(;b[e].joiningAngle>=2*Math.PI;)b[e].joiningAngle-=2*Math.PI;for(b[e].wingAngle=
b[e].implementAngle+b[e].joiningAngle/2-Math.PI;0>b[e].wingAngle;)b[e].wingAngle+=2*Math.PI;for(;b[e].wingAngle>2*Math.PI;)b[e].wingAngle-=2*Math.PI;b[e].wingWidth=c/Math.sin(b[e].joiningAngle/2)}return b}(b,a);if(0==e.length)return[];b=function(a,b){for(var c=[],e=1;e<a.length/2;e++){var n=_canvas_.library.math.getAngleOfTwoPoints({x:a[2*e-2],y:a[2*e-1]},{x:a[2*e],y:a[2*e+1]});n=_canvas_.library.math.cartesianAngleAdjust(b,0,Math.PI/2+n);var f=-n.x,k=-n.y;c.push([{x:a[2*e-2]+n.x,y:a[2*e-1]+n.y},
{x:a[2*e-2]+f,y:a[2*e-1]+k},{x:a[2*e]+f,y:a[2*e+1]+k},{x:a[2*e]+n.x,y:a[2*e+1]+n.y}])}return c}(b,a);"flat"==f&&(b=b.concat(r(e,a)));"round"==f&&(b=b.concat(n(e,a,k)));"sharp"==f&&(b=b.concat(v(e,a,p)));"round"==c&&(b=b.concat(m(e,a,k)));return q.math.polygonToSubTriangles(b.map(function(a){return[a]}).reduce(function(a,b){return q.math.unionPolygons(a,b)}))};this.fitPolyIn=function(b,a,c,f){function e(a,b){return b.map(function(b){return{x:b.x+a.x,y:b.y+a.y}})}function k(a,b){a={points:e(a,b.points),
boundingBox:{}};a.boundingBox=q.math.boundingBoxFromPoints(a.points);return a}c=void 0===c?{active:!1,x:10,y:10,angle:Math.PI/8}:c;f=void 0===f?!1:f;var p={x:0,y:0},h=[[],[],[]],r=q.math.averagePoint(b.points);p=1;var n=100,v=[];for(p=1;p<n+1;p++){v=[];for(var m=2*p+1,F=2*Math.PI/m,A=Math.pow(p,2),x=0;x<m;x++){var u=q.math.polar2cartesian(F*x,A);u.x=c.active?Math.round(u.x/c.x)*c.x:u.x;u.y=c.active?Math.round(u.y/c.y)*c.y:u.y;f&&h[0].push({x:u.x+r.x,y:u.y+r.y});q.math.detectOverlap.overlappingPolygonWithPolygons(k(u,
b),a)||v.push({ang:F*x,dis:A})}if(0!=v.length)break}n=10;if(1==v.length)var C=v[0];else{m=Math.pow(p,2);F=Math.pow(p-1,2);A=[];for(p=0;p<n;p++){var y=[],K=(m-F)/2+F;for(x=0;x<v.length;x++)u=q.math.polar2cartesian(v[x].ang,K),u.x=c.active?Math.round(u.x/c.x)*c.x:u.x,u.y=c.active?Math.round(u.y/c.y)*c.y:u.y,f&&h[1].push({x:u.x+r.x,y:u.y+r.y}),q.math.detectOverlap.overlappingPolygonWithPolygons(k(u,b),a)||(y.push({ang:v[x].ang,dis:K}),A.push({ang:v[x].ang,dis:K}));if(1==y.length){C=y[0];break}0==y.length?
F=K:m=K}void 0==C&&(C=A.pop())}n=10;p=q.math.polar2cartesian(C.ang,C.dis);f&&h[2].push({x:p.x+r.x,y:p.y+r.y});C=p.x;v=p.y;for(p=u=x=0;p<n;p++)m=(C-x)/2+x,F=(v-u)/2+u,m=c.active?Math.round(m/c.x)*c.x:m,F=c.active?Math.round(F/c.y)*c.y:F,f&&h[2].push({x:m+r.x,y:v+r.y}),q.math.detectOverlap.overlappingPolygonWithPolygons(k({x:m,y:v},b),a)?x=m:C=m,f&&h[2].push({x:C+r.x,y:F+r.y}),q.math.detectOverlap.overlappingPolygonWithPolygons(k({x:C,y:F},b),a)?u=F:v=F;p={x:C,y:v};return f?{offset:p,paths:h}:p}};this.gsls=
new function(){this.geometry="\n                        #define PI 3.141592653589793\n                    \n                        vec2 cartesian2polar(vec2 xy){\n                            float dis = pow(pow(xy.x,2.0)+pow(xy.y,2.0),0.5);\n                            float ang = 0.0;\n                    \n                            if(xy.x == 0.0){\n                                if(xy.y == 0.0){ang = 0.0;}\n                                else if(xy.y > 0.0){ang = 0.5*PI;}\n                                else{ang = 1.5*PI;}\n                            }\n                            else if(xy.y == 0.0){\n                                if(xy.x >= 0.0){ang = 0.0;}else{ang = PI;}\n                            }\n                            else if(xy.x >= 0.0){ ang = atan(xy.y/xy.x); }\n                            else{ /*if(xy.x < 0.0)*/ ang = atan(xy.y/xy.x) + PI; }\n                    \n                            return vec2(ang,dis);\n                        }\n                        vec2 polar2cartesian(vec2 ad){\n                            return vec2( ad[1]*cos(ad[0]), ad[1]*sin(ad[0]) );\n                        }\n                        vec2 cartesianAngleAdjust(vec2 xy, float angle){\n                            // //v1\n                            // if(angle == 0.0 || mod(angle,PI*2.0) == 0.0){ return xy; }\n                            //\n                            // vec2 polar = cartesian2polar( xy );\n                            // polar[0] += angle;\n                            // return polar2cartesian( polar );\n                    \n                            //v2\n                            if(angle == 0.0 || mod(angle,PI*2.0) == 0.0){ return xy; }\n                            return vec2( xy.x*cos(angle) - xy.y*sin(angle), xy.y*cos(angle) + xy.x*sin(angle) ); \n                        }\n                    "};
this.structure=new function(){this.functionListRunner=function(b,a){return function(c,f){for(var e=0;e<b.length;e++){for(var k=!0,p=0;p<b[e].requiredKeys.length;p++){k=!0;for(var h=0;h<b[e].requiredKeys[p].length&&(k=k&&a[b[e].requiredKeys[p][h]],k);h++);if(k)break}if(k&&b[e].function(c,f))break}}};this.signalRegistry=function(b,a,c){b=void 0===b?-1:b;a=void 0===a?-1:a;c=void 0===c?-1:c;var f=[],e=[],k=[],p=[],h={},r=[];this.__dump=function(){console.log("---- signalRegistry dump ----");console.log("\tsignals");
for(var a=0;a<f.length;a++)console.log("\t\t",a," "+JSON.stringify(f[a]));console.log("\tselectedSignals");for(a=0;a<tselectedSignals.length;a++)console.log("\t\t",a," "+JSON.stringify(tselectedSignals[a]));console.log("\tevents");for(a=0;a<k.length;a++)console.log("\t\t",a," "+JSON.stringify(k[a]));console.log("\tevents_byID");for(a=0;a<p.length;a++)console.log("\t\t",a," "+JSON.stringify(p[a]));console.log("\tevents_byPosition");var b=Object.keys(h);for(a=0;a<b.length;a++)console.log("\t\t",b[a],
" "+JSON.stringify(h[b[a]]));console.log("\tpositions");for(a=0;a<r.length;a++)console.log("\t\t",a," "+JSON.stringify(r[a]))};this.export=function(){return JSON.parse(JSON.stringify({signals:f,selectedSignals:e,events:k,events_byID:p,events_byPosition:h,positions:r}))};this.import=function(a){f=JSON.parse(JSON.stringify(a.signals));e=JSON.parse(JSON.stringify(a.selectedSignals));k=JSON.parse(JSON.stringify(a.events));p=JSON.parse(JSON.stringify(a.events_byID));h=JSON.parse(JSON.stringify(a.events_byPosition));
r=JSON.parse(JSON.stringify(a.positions))};this.getAllSignals=function(){return JSON.parse(JSON.stringify(f))};this.getAllEvents=function(){return JSON.parse(JSON.stringify(k))};this.getSignal=function(a){if(void 0!=f[a])return JSON.parse(JSON.stringify(f[a]))};this.eventsBetween=function(a,b){for(var c=void 0==b?Array.from(new Set(r.filter(function(b){return b==a}))):Array.from(new Set(r.filter(function(c){return c>=a&&c<b}))),e=[],f=0;f<c.length;f++){c[f]=h[String(c[f])];for(var n=0;n<c[f].length;n++)e.push(k[c[f][n]])}return e.sort(function(a,
b){return a.position<b.position?-1:a.position>b.position?1:0})};this.add=function(e,v){if(void 0!=e&&"line"in e&&"position"in e&&"length"in e){"strength"in e||(e.strength=1);0>e.line&&(e.line=0);0>e.length&&(e.length=0);0>e.position&&(e.position=0);0>e.strength&&(e.strength=0);-1<a&&e.line>a-1&&(e.line=a-1);-1<c&&e.length>c&&(e.length=c);-1<b&&e.position>b&&(e.position=b-e.length);-1<b&&e.position+e.length>b&&(e.length=b-e.position);-1<b&&e.position+e.length>b&&(e.position=b-e.length);1<e.strength&&
(e.strength=1);var n=0;if(void 0==v)for(;void 0!=f[n];)n++;else n=v;f[n]=JSON.parse(JSON.stringify(e));e=[{signalID:n,line:e.line,position:e.position,strength:e.strength},{signalID:n,line:e.line,position:e.position+e.length,strength:0}];for(v=0;void 0!=k[v];)v++;k[v]=e[0];p[n]=[v];void 0==h[e[0].position]?h[e[0].position]=[v]:h[e[0].position].push(v);for(r.push(e[0].position);void 0!=k[v];)v++;k[v]=e[1];p[n]=p[n].concat(v);void 0==h[e[1].position]?h[e[1].position]=[v]:h[e[1].position].push(v);r.push(e[1].position);
return n}};this.remove=function(a){if(void 0!=f[a]){delete f[a];for(var b=0;b<p[a].length;b++){var c=p[a][b];h[k[c].position].splice(h[k[c].position].indexOf(c),1);r.splice(r.indexOf(k[c].position),1);0==h[k[c].position].length&&delete h[k[c].position];delete k[c]}delete p[a]}};this.update=function(a,c){void 0!=c&&("line"in c||(c.line=f[a].line),-1<b&&("position"in c&&"length"in c?c.length+c.position>b&&(c.length=b-c.position):("position"in c?f[a].length+c.position>=b&&(c.position=b-f[a].length):
c.position=f[a].position,"length"in c?c.length+c.position>b&&(c.length=b-c.position):c.length=f[a].length)),"strength"in c||(c.strength=f[a].strength),this.remove(a),this.add(c,a))};this.reset=function(){f=[];e=[];k=[];p=[];h={};r=[]}}};this.audio=new function(){this.context=new (window.AudioContext||window.webkitAudioContext);this.changeAudioParam=function(a,b,c,f,r,n){n=void 0===n?!0:n;if(null==c)return b.value;n&&b.cancelScheduledValues(0);try{switch(r){case "linear":b.linearRampToValueAtTime(c,
a.currentTime+f);break;case "exponential":console.warn("2018-4-18 - changeAudioParam:exponential doesn't work on chrome");0==c&&(c=1E-4);b.exponentialRampToValueAtTime(c,a.currentTime+f);break;case "s":for(var e=c-b.value,k=q.math.curveGenerator.s(10),h=0;h<k.length;h++)k[h]=b.value+k[h]*e;b.setValueCurveAtTime(new Float32Array(k),a.currentTime,f);break;default:b.setTargetAtTime(c,a.currentTime,.01)}}catch(A){console.log("could not change param (possibly due to an overlap, or bad target value)"),
console.log("audioParam:",b,"target:",c,"time:",f,"curve:",r,"cancelScheduledValues:",n),console.log(A)}};this.loadAudioFile=function(a,b,c){c=void 0===c?"":c;switch(void 0===b?"file":b){case "url":b=new XMLHttpRequest;b.open("GET",c,!0);b.responseType="arraybuffer";b.onload=function(){q.audio.context.decodeAudioData(this.response,function(b){a({buffer:b,name:c.split("/").pop(),duration:b.duration})},function(a){console.warn("Error with decoding audio data"+a.err)})};b.send();break;default:var e=
document.createElement("input");e.type="file";e.onchange=function(){var b=this.files[0],c=new FileReader;c.readAsArrayBuffer(b);c.onload=function(c){q.audio.context.decodeAudioData(c.target.result,function(c){a({buffer:c,name:b.name,duration:c.duration})});e.remove()}};document.body.appendChild(e);e.click()}};this.waveformSegment=function(a,b,c){b=void 0===b?{start:0,end:1}:b;c=void 0===c?1E4:c;var e=a.getChannelData(0);b.start=b.start?b.start:0;b.end=b.end?b.end:1;var f=a.length*b.start;a=a.length*
b.end;c=(a-f)/c;for(b=[];f<a;f+=Math.round(c))b.push(q.math.largestValueFound(e.slice(f,f+Math.round(c))));return b};this.loadBuffer=function(a,b,c,f){a=a.createBufferSource();a.buffer=b;a.connect(c);a.onended=f;return a};this.destination=this.context.createGain();this.destination.connect(this.context.destination);this.destination._gain=1;this.destination.masterGain=function(a){if(void 0==a)return this.destination._gain;this._gain=a;q.audio.changeAudioParam(q.audio.context,this.gain,this._gain,.01,
"instant",!0)};this.names_frequencies_split={0:{C:16.35,"C#":17.32,D:18.35,"D#":19.45,E:20.6,F:21.83,"F#":23.12,G:24.5,"G#":25.96,A:27.5,"A#":29.14,B:30.87},1:{C:32.7,"C#":34.65,D:36.71,"D#":38.89,E:41.2,F:43.65,"F#":46.25,G:49,"G#":51.91,A:55,"A#":58.27,B:61.74},2:{C:65.41,"C#":69.3,D:73.42,"D#":77.78,E:82.41,F:87.31,"F#":92.5,G:98,"G#":103.8,A:110,"A#":116.5,B:123.5},3:{C:130.8,"C#":138.6,D:146.8,"D#":155.6,E:164.8,F:174.6,"F#":185,G:196,"G#":207.7,A:220,"A#":233.1,B:246.9},4:{C:261.6,"C#":277.2,
D:293.7,"D#":311.1,E:329.6,F:349.2,"F#":370,G:392,"G#":415.3,A:440,"A#":466.2,B:493.9},5:{C:523.3,"C#":554.4,D:587.3,"D#":622.3,E:659.3,F:698.5,"F#":740,G:784,"G#":830.6,A:880,"A#":932.3,B:987.8},6:{C:1047,"C#":1109,D:1175,"D#":1245,E:1319,F:1397,"F#":1480,G:1568,"G#":1661,A:1760,"A#":1865,B:1976},7:{C:2093,"C#":2217,D:2349,"D#":2489,E:2637,F:2794,"F#":2960,G:3136,"G#":3322,A:3520,"A#":3729,B:3951},8:{C:4186,"C#":4435,D:4699,"D#":4978,E:5274,F:5588,"F#":5920,G:6272,"G#":6645,A:7040,"A#":7459,B:7902}};
this.names_frequencies={};for(var b=Object.entries(this.names_frequencies_split),a=0;a<b.length;a++)for(var c=Object.entries(this.names_frequencies_split[a]),f=0;f<c.length;f++)this.names_frequencies[b[a][0]+c[f][0]]=c[f][1];this.frequencies_names={};b=Object.entries(this.names_frequencies);for(a=0;a<b.length;a++)this.frequencies_names[b[a][1]]=b[a][0];b="0C 0C# 0D 0D# 0E 0F 0F# 0G 0G# 0A 0A# 0B 1C 1C# 1D 1D# 1E 1F 1F# 1G 1G# 1A 1A# 1B 2C 2C# 2D 2D# 2E 2F 2F# 2G 2G# 2A 2A# 2B 3C 3C# 3D 3D# 3E 3F 3F# 3G 3G# 3A 3A# 3B 4C 4C# 4D 4D# 4E 4F 4F# 4G 4G# 4A 4A# 4B 5C 5C# 5D 5D# 5E 5F 5F# 5G 5G# 5A 5A# 5B 6C 6C# 6D 6D# 6E 6F 6F# 6G 6G# 6A 6A# 6B 7C 7C# 7D 7D# 7E 7F 7F# 7G 7G# 7A 7A# 7B 8C 8C# 8D 8D# 8E 8F 8F# 8G 8G# 8A 8A# 8B".split(" ");
this.midinumbers_names={};for(a=0;a<b.length;a++)this.midinumbers_names[a+24]=b[a];this.names_midinumbers={};b=Object.entries(this.midinumbers_names);for(a=0;a<b.length;a++)this.names_midinumbers[b[a][1]]=parseInt(b[a][0]);this.num2name=function(a){return this.midinumbers_names[a]};this.num2freq=function(a){return this.names_frequencies[this.midinumbers_names[a]]};this.name2num=function(a){return this.names_midinumbers[a]};this.name2freq=function(a){return this.names_frequencies[a]};this.freq2num=
function(a){return this.names_midinumbers[this.frequencies_names[a]]};this.freq2name=function(a){return this.frequencies_names[a]}};this.font=new function(){this.listAllAvailableGlyphs=function(b){var a=this.decodeFont(b);return Object.keys(a.glyphs.glyphs).map(function(b){return String.fromCharCode(a.glyphs.glyphs[b].unicode)})};this.decodeFont=function(b){return m.opentype.parse(b)};this.getAllAvailableGlyphDrawingPaths=function(b,a){a=void 0!=a?a:Object.keys(b.glyphs.glyphs).map(function(a){return String.fromCharCode(b.glyphs.glyphs[a].unicode)});
for(var c=a.map(function(a){return b.getPath(a,0,0,1)}),f={},e=0;e<a.length;e++)f[a[e]]=c[e].commands;return f};this.convertPathToPoints=function(b,a){a=void 0===a?2:a;var c=[],f=[];b.forEach(function(b){switch(b.type){case "M":f.push({x:b.x,y:b.y});break;case "L":f.push({x:b.x,y:b.y});break;case "Q":var e=f[f.length-1].x,p=f[f.length-1].y,h=b.x1,r=b.y1,n=b.x;b=b.y;for(var v=1;v<=a;v++){var m=v/a;f.push({x:e+m*(2*(h-e)+m*(n-2*h+e)),y:p+m*(2*(r-p)+m*(b-2*r+p))})}break;case "Z":case "z":c=c.concat(f),
f=[]}});return c};this.getTrianglesFromGlyphPath=function(b,a){a=void 0===a?2:a;if(0==b.length)return[];var c=Infinity,f=Infinity,e=0,k=0;b.forEach(function(a){a.x<f&&(f=a.x);a.y<c&&(c=a.y);a.x>k&&(k=a.x);a.y>e&&(e=a.y)});var p=[],h=[];b.forEach(function(a){h.push(a);"Z"==a.type&&(p.push(h),h=[])});p=p.map(function(b){return q.font.convertPathToPoints(b,a)});p=p.map(function(a){var b=_canvas_.library.math.boundingBoxFromPoints(a);return{vector:a,size:(b.bottomRight.x-b.topLeft.x)*(b.bottomRight.y-
b.topLeft.y)}}).sort(function(a,b){return a.size<=b.size?1:-1}).map(function(a){return a.vector});var r=[];p.forEach(function(a){for(var b=!1,c=0;c<r.length;c++)if(q.math.detectOverlap.overlappingPolygons(a,r[c].path)){r[c].path=r[c].path.concat(a);r[c].regions.unshift(a);b=!0;break}b||r.push({path:a,regions:[a]})});var n=[];r.forEach(function(a){n=n.concat(q.math.polygonToSubTriangles(a.regions))});return n};this.extractGlyphs=function(b,a){var c=q.font.decodeFont(b),f=q.font.getAllAvailableGlyphDrawingPaths(c,
a),e={};Object.keys(f).forEach(function(a){var b=c.glyphs.glyphs[a.charCodeAt(0)];e[a]={vector:q.font.getTrianglesFromGlyphPath(f[a]),ascender:c.ascender,descender:c.descender,leftSideBearing:b.leftSideBearing,advanceWidth:b.advanceWidth,xMax:b.xMax,yMax:b.yMax,xMin:b.xMin,yMin:b.yMin,top:Infinity,left:Infinity,bottom:0,right:0};for(b=0;b<e[a].vector.length;b+=2)e[a].vector[b]<e[a].left?e[a].left=e[a].vector[b]:e[a].vector[b]>e[a].right&&(e[a].right=e[a].vector[b]),e[a].vector[b+1]<e[a].top?e[a].top=
e[a].vector[b+1]:e[a].vector[b+1]>e[a].bottom&&(e[a].bottom=e[a].vector[b+1])});var k=0,p=0,h=0;Object.keys(e).forEach(function(a){var b=e[a].bottom-e[a].top;b>k&&(k=b);a=e[a].right-e[a].left;a>p&&(p=a)});h=k<p?k:p;Object.keys(e).forEach(function(a){for(var b=0;b<e[a].vector.length;b+=2)e[a].vector[b]/=h,e[a].vector[b+1]/=h;e[a].top/=h;e[a].bottom/=h;e[a].left/=h;e[a].right/=h});return e}};this.misc=new function(){this.padString=function(b,a,c,f){c=void 0===c?" ":c;if(1>c.length)return b;b=""+b;if("l"==
(void 0===f?"l":f))for(;b.length<a;)b=c+b;else for(;b.length<a;)b+=c;return b};this.compressString=function(b){return m.lzString.compress(b)};this.decompressString=function(b){return m.lzString.decompress(b)};this.serialize=function(b,a){a=void 0===a?!0:a;b=JSON.stringify(b,function(a,b){switch({}.toString.call(b).match(/\s([a-zA-Z]+)/)[1].toLowerCase()){case "function":return{__uniqueType:"function",__value:b.toString(),__name:b.name};case "arraybuffer":return{__uniqueType:"arraybuffer",__value:btoa(String.fromCharCode(new Uint8Array(b)))};
case "audiobuffer":a=[];for(var c=0;c<b.numberOfChannels;c++)a.push(Array.from(b.getChannelData(c)));return{__uniqueType:"audiobuffer",__channelData:a,__sampleRate:b.sampleRate,__numberOfChannels:b.numberOfChannels,__length:b.length};default:return b}});a&&(b=q.misc.compressString(b));return b};this.unserialize=function(b,a){if(void 0!==b)return(void 0===a||a)&&(b=q.misc.decompressString(b)),JSON.parse(b,function(a,b){if("object"==typeof b&&null!=b&&"__uniqueType"in b)switch(b.__uniqueType){case "function":a=
b.__value.substring(0,b.__value.indexOf("{"));a=a.substring(a.indexOf("(")+1,a.lastIndexOf(")"));b=b.__value.substring(b.__value.indexOf("{")+1,b.__value.lastIndexOf("}"));b=Function(a,b);break;case "arraybuffer":b=atob(b.__value);for(a=0;a<b.length;a++)b[a]=b[a].charCodeAt(0);b=new ArrayBuffer(b);break;case "audiobuffer":var c=q.audio.context.createBuffer(b.__numberOfChannels,b.__length,b.__sampleRate);for(a=0;a<c.numberOfChannels;a++){workingBuffer=c.getChannelData(a);for(var f=0;f<c.length;f++)workingBuffer[f]=
b.__channelData[a][f]}b=c;break;default:b=b.__value}return b})};this.openFile=function(b,a){a=void 0===a?"readAsBinaryString":a;var c=document.createElement("input");c.type="file";c.onchange=function(){var c=new FileReader;switch(a){case "readAsArrayBuffer":c.readAsArrayBuffer(this.files[0]);break;default:c.readAsBinaryString(this.files[0])}c.onloadend=function(){b&&b(c.result)}};c.click()};this.printFile=function(b,a){var c=document.createElement("a");c.href=URL.createObjectURL(new Blob([a]));c.download=
b;c.click()};this.loadFileFromURL=function(b,a,c,f){c=void 0===c?"blob":c;var e=new XMLHttpRequest;void 0!=a&&(e.onloadend=function(b){200==b.target.status?a(b.target.response):void 0!=f?f():console.warn("library.misc.loadFileFromURL error: could not find the file",b.target.responseURL)});e.open("get",b,!0);e.responseType=c;e.send()}};var m=new function(){var b=this;(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?b(exports):"function"===typeof define&&define.amd?define(["exports"],
b):b(a.martinez={})})(this,function(a){function b(a,b){return a>b?1:a<b?-1:0}function f(a,b,c,e,k){var l=k-e;return 0<l?(l=e+Math.floor(l/2),a={key:b[l],data:c[l],parent:a},a.left=f(a,b,c,e,l),a.right=f(a,b,c,l+1,k),a):null}function e(a,b,c,f,k){if(!(c>=f)){for(var l=a[c+f>>1],G=c-1,n=f+1;;){do G++;while(0>k(a[G],l));do n--;while(0<k(a[n],l));if(G>=n)break;var h=a[G];a[G]=a[n];a[n]=h;h=b[G];b[G]=b[n];b[n]=h}e(a,b,c,n,k);e(a,b,n+1,f,k)}}function k(a,b,c){null===b?(a.inOut=!1,a.otherInOut=!0):(a.isSubject===
b.isSubject?(a.inOut=!b.inOut,a.otherInOut=b.otherInOut):(a.inOut=!b.otherInOut,a.otherInOut=b.isVertical()?!b.inOut:b.inOut),b&&(a.prevInResult=!p(b,c)||b.isVertical()?b.prevInResult:b));a.inResult=p(a,c)}function p(a,b){switch(a.type){case 0:switch(b){case 0:return!a.otherInOut;case 1:return a.otherInOut;case 2:return a.isSubject&&a.otherInOut||!a.isSubject&&!a.otherInOut;case 3:return!0}break;case 2:return 0===b||1===b;case 3:return 2===b}return!1}function h(a,b){return a[0]===b[0]&&a[1]===b[1]?
!0:!1}function r(a,b,c){return(a[0]-c[0])*(b[1]-c[1])-(b[0]-c[0])*(a[1]-c[1])}function n(a,b){var c=a.point,l=b.point;if(c[0]>l[0])return 1;if(c[0]<l[0])return-1;if(c[1]!==l[1])return c[1]>l[1]?1:-1;a=a.left!==b.left?a.left?1:-1:0!==r(c,a.otherEvent.point,b.otherEvent.point)?a.isBelow(b.otherEvent.point)?-1:1:!a.isSubject&&b.isSubject?1:-1;return a}function v(a,b,c){var l=new w(b,!1,a,a.isSubject);b=new w(b,!0,a.otherEvent,a.isSubject);h(a.point,a.otherEvent.point)&&console.warn("what is that, a collapsed segment?",
a);l.contourId=b.contourId=a.contourId;0<n(b,a.otherEvent)&&(a.otherEvent.left=!0,b.left=!1);a.otherEvent.otherEvent=b;a.otherEvent=l;c.push(b);c.push(l);return c}function m(a,b){return a[0]*b[1]-a[1]*b[0]}function q(a,b,c,e,f){function l(a,b,c){return[a[0]+b*c[0],a[1]+b*c[1]]}b=[b[0]-a[0],b[1]-a[1]];e=[e[0]-c[0],e[1]-c[1]];var G=[c[0]-a[0],c[1]-a[1]],k=m(b,e),n=b[0]*b[0]+b[1]*b[1];if(0<k*k){n=m(G,e)/k;if(0>n||1<n)return null;G=m(G,b)/k;return 0>G||1<G?null:0===n||1===n?f?null:[l(a,n,b)]:0===G||1===
G?f?null:[l(c,G,e)]:[l(a,n,b)]}k=m(G,b);if(0<k*k)return null;c=(b[0]*G[0]+b[1]*G[1])/n;G=c+(b[0]*e[0]+b[1]*e[1])/n;e=Math.min(c,G);c=Math.max(c,G);return 1>=e&&0<=c?1===e?f?null:[l(a,0<e?e:0,b)]:0===c?f?null:[l(a,1>c?c:1,b)]:f&&0===e&&1===c?null:[l(a,0<e?e:0,b),l(a,1>c?c:1,b)]:null}function A(a,b,c){var l=q(a.point,a.otherEvent.point,b.point,b.otherEvent.point),e=l?l.length:0;if(0===e||1===e&&(h(a.point,b.point)||h(a.otherEvent.point,b.otherEvent.point))||2===e&&a.isSubject===b.isSubject)return 0;
if(1===e)return h(a.point,l[0])||h(a.otherEvent.point,l[0])||v(a,l[0],c),h(b.point,l[0])||h(b.otherEvent.point,l[0])||v(b,l[0],c),1;l=[];var f=e=!1;h(a.point,b.point)?e=!0:1===n(a,b)?l.push(b,a):l.push(a,b);h(a.otherEvent.point,b.otherEvent.point)?f=!0:1===n(a.otherEvent,b.otherEvent)?l.push(b.otherEvent,a.otherEvent):l.push(a.otherEvent,b.otherEvent);if(e&&f||e)return b.type=1,a.type=b.inOut===a.inOut?2:3,e&&!f&&v(l[1].otherEvent,l[0].point,c),2;if(f)return v(l[0],l[1].point,c),3;if(l[0]!==l[3].otherEvent)return v(l[0],
l[1].point,c),v(l[1],l[2].point,c),3;v(l[0],l[1].point,c);v(l[3].otherEvent,l[2].point,c);return 3}function x(a,b){if(a===b)return 0;if(0!==r(a.point,a.otherEvent.point,b.point)||0!==r(a.point,a.otherEvent.point,b.otherEvent.point))return h(a.point,b.point)?a.isBelow(b.otherEvent.point)?-1:1:a.point[0]===b.point[0]?a.point[1]<b.point[1]?-1:1:1===n(a,b)?b.isAbove(a.point)?-1:1:a.isBelow(b.point)?-1:1;if(a.isSubject===b.isSubject){var c=a.point,l=b.point;if(c[0]===l[0]&&c[1]===l[1])return c=a.otherEvent.point,
l=b.otherEvent.point,c[0]===l[0]&&c[1]===l[1]?0:a.contourId>b.contourId?1:-1}else return a.isSubject?-1:1;return 1===n(a,b)?1:-1}function u(a,b){if(!(this instanceof u))return new u(a,b);this.data=a||[];this.length=this.data.length;this.compare=b||C;if(0<this.length)for(a=(this.length>>1)-1;0<=a;a--)this._down(a)}function C(a,b){return a<b?-1:a>b?1:0}function y(a,b,c,e,f,k){var l;var G=0;for(l=a.length-1;G<l;G++){var h=a[G];var p=a[G+1];var N=new w(h,!1,void 0,b);var v=new w(p,!1,N,b);N.otherEvent=
v;if(h[0]!==p[0]||h[1]!==p[1])N.contourId=v.contourId=c,k||(N.isExteriorRing=!1,v.isExteriorRing=!1),0<n(N,v)?v.left=!0:N.left=!0,p=h[0],h=h[1],f[0]=X(f[0],p),f[1]=X(f[1],h),f[2]=Q(f[2],p),f[3]=Q(f[3],h),e.push(N),e.push(v)}}function K(a,b,c){"number"===typeof a[0][0][0]&&(a=[a]);"number"===typeof b[0][0][0]&&(b=[b]);var e,l=null;if(0===a.length*b.length)if(0===c)l=sa;else if(2===c)l=a;else if(1===c||3===c)l=0===a.length?b:a;if(e=l)return e===sa?null:e;l=[Infinity,Infinity,-Infinity,-Infinity];var f=
[Infinity,Infinity,-Infinity,-Infinity];e=a;var G=b,h=new P(null,n),w,p,v;var N=0;for(p=e.length;N<p;N++){var u=e[N];var m=0;for(v=u.length;m<v;m++)(w=0===m)&&la++,y(u[m],!0,la,h,l,w)}N=0;for(p=G.length;N<p;N++)for(u=G[N],m=0,v=u.length;m<v;m++)w=0===m,2===c&&(w=!1),w&&la++,y(u[m],!1,la,h,f,w);e=null;if(l[0]>f[2]||f[0]>l[2]||l[1]>f[3]||f[1]>l[3])if(0===c)e=sa;else if(2===c)e=a;else if(1===c||3===c)e=a.concat(b);if(e)return e===sa?null:e;b=new B(x);a=[];f=Math.min(l[2],f[2]);for(var r;0!==h.length;){e=
h.pop();a.push(e);if(0===c&&e.point[0]>f||2===c&&e.point[0]>l[2])break;e.left?(w=u=b.insert(e),r=b.minNode(),u=u!==r?b.prev(u):null,w=b.next(w),G=u?u.key:null,k(e,G,c),w&&2===A(e,w.key,h)&&(k(e,G,c),k(e,w.key,c)),u&&2===A(u.key,e,h)&&(u=(u=u!==r?b.prev(u):null)?u.key:null,k(G,u,c),k(e,G,c))):(e=e.otherEvent,(w=u=b.find(e))&&w&&(u=u!==r?b.prev(u):null,w=b.next(w),b.remove(e),w&&u&&A(u.key,w.key,h)))}r=[];l=0;for(h=a.length;l<h;l++)f=a[l],(f.left&&f.inResult||!f.left&&f.otherEvent.inResult)&&r.push(f);
for(f=!1;!f;)for(f=!0,l=0,h=r.length;l<h;l++)l+1<h&&1===n(r[l],r[l+1])&&(a=r[l],r[l]=r[l+1],r[l+1]=a,f=!1);l=0;for(h=r.length;l<h;l++)f=r[l],f.pos=l;l=0;for(h=r.length;l<h;l++)f=r[l],f.left||(a=f.pos,f.pos=f.otherEvent.pos,f.otherEvent.pos=a);f={};a=[];l=0;for(h=r.length;l<h;l++)if(!f[l]){b=[[]];r[l].isExteriorRing?2===c&&!r[l].isSubject&&1<a.length?a[a.length-1].push(b[0]):a.push(b):2!==c||r[l].isSubject||0!==a.length?0===a.length?a.push([[b]]):a[a.length-1].push(b[0]):a.push(b);e=a.length-1;G=l;
for(b[0].push(r[l].point);G>=l;)a:{u=r[G],f[G]=!0,u.left?(u.resultInOut=!1,u.contourId=e):(u.otherEvent.resultInOut=!0,u.otherEvent.contourId=e),G=u.pos,f[G]=!0,b[0].push(r[G].point),u=void 0;N=G+1;p=r.length;w=r[G].point;N<p&&(u=r[N].point);for(;N<p&&u[0]===w[0]&&u[1]===w[1];){if(f[N])N++;else{G=N;break a}u=r[N].point}for(N=G-1;f[N]&&N>=l;)N--;G=N}G=-1===G?l:G;u=r[G];f[G]=f[u.pos]=!0;u.otherEvent.resultInOut=!0;u.otherEvent.contourId=e}return a}var B=function(a,c){void 0===a&&(a=b);void 0===c&&(c=
!1);this._compare=a;this._root=null;this._size=0;this._noDuplicates=!!c},z={size:{configurable:!0}};B.prototype.rotateLeft=function(a){var b=a.right;if(b){if(a.right=b.left)b.left.parent=a;b.parent=a.parent}a.parent?a===a.parent.left?a.parent.left=b:a.parent.right=b:this._root=b;b&&(b.left=a);a.parent=b};B.prototype.rotateRight=function(a){var b=a.left;if(b){if(a.left=b.right)b.right.parent=a;b.parent=a.parent}a.parent?a===a.parent.left?a.parent.left=b:a.parent.right=b:this._root=b;b&&(b.right=a);
a.parent=b};B.prototype._splay=function(a){for(;a.parent;){var b=a.parent;b.parent?b.left===a&&b.parent.left===b?(this.rotateRight(b.parent),this.rotateRight(b)):b.right===a&&b.parent.right===b?(this.rotateLeft(b.parent),this.rotateLeft(b)):b.left===a&&b.parent.right===b?(this.rotateRight(b),this.rotateLeft(b)):(this.rotateLeft(b),this.rotateRight(b)):b.left===a?this.rotateRight(b):this.rotateLeft(b)}};B.prototype.splay=function(a){for(var b,c,e,l;a.parent;)b=a.parent,(c=b.parent)&&c.parent?(e=c.parent,
e.left===c?e.left=a:e.right=a,a.parent=e):(a.parent=null,this._root=a),e=a.left,l=a.right,a===b.left?(c&&(c.left===b?(b.right?(c.left=b.right,c.left.parent=c):c.left=null,b.right=c,c.parent=b):(e?(c.right=e,e.parent=c):c.right=null,a.left=c,c.parent=a)),l?(b.left=l,l.parent=b):b.left=null,a.right=b):(c&&(c.right===b?(b.left?(c.right=b.left,c.right.parent=c):c.right=null,b.left=c,c.parent=b):(l?(c.left=l,l.parent=c):c.left=null,a.right=c,c.parent=a)),e?(b.right=e,e.parent=b):b.right=null,a.left=b),
b.parent=a};B.prototype.replace=function(a,b){a.parent?a===a.parent.left?a.parent.left=b:a.parent.right=b:this._root=b;b&&(b.parent=a.parent)};B.prototype.minNode=function(a){void 0===a&&(a=this._root);if(a)for(;a.left;)a=a.left;return a};B.prototype.maxNode=function(a){void 0===a&&(a=this._root);if(a)for(;a.right;)a=a.right;return a};B.prototype.insert=function(a,b){var c=this._root,e=null,l=this._compare;if(this._noDuplicates)for(;c;){e=c;var f=l(c.key,a);if(0===f)return;c=0>l(c.key,a)?c.right:
c.left}else for(;c;)e=c,c=0>l(c.key,a)?c.right:c.left;c={key:a,data:b,left:null,right:null,parent:e};e?0>l(e.key,c.key)?e.right=c:e.left=c:this._root=c;this.splay(c);this._size++;return c};B.prototype.find=function(a){for(var b=this._root,c=this._compare;b;){var e=c(b.key,a);if(0>e)b=b.right;else if(0<e)b=b.left;else return b}return null};B.prototype.contains=function(a){for(var b=this._root,c=this._compare;b;){var e=c(a,b.key);if(0===e)return!0;b=0>e?b.left:b.right}return!1};B.prototype.remove=function(a){a=
this.find(a);if(!a)return!1;this.splay(a);if(a.left)if(a.right){var b=this.minNode(a.right);b.parent!==a&&(this.replace(b,b.right),b.right=a.right,b.right.parent=b);this.replace(a,b);b.left=a.left;b.left.parent=b}else this.replace(a,a.left);else this.replace(a,a.right);this._size--;return!0};B.prototype.removeNode=function(a){if(!a)return!1;this.splay(a);if(a.left)if(a.right){var b=this.minNode(a.right);b.parent!==a&&(this.replace(b,b.right),b.right=a.right,b.right.parent=b);this.replace(a,b);b.left=
a.left;b.left.parent=b}else this.replace(a,a.left);else this.replace(a,a.right);this._size--;return!0};B.prototype.erase=function(a){var b=this.find(a);if(b){this.splay(b);a=b.left;b=b.right;var c=null;a&&(a.parent=null,c=this.maxNode(a),this.splay(c),this._root=c);b&&(a?c.right=b:this._root=b,b.parent=c);this._size--}};B.prototype.pop=function(){var a=this._root,b=null;if(a){for(;a.left;)a=a.left;b={key:a.key,data:a.data};this.remove(a.key)}return b};B.prototype.next=function(a){var b=a;if(b)if(b.right)for(b=
b.right;b&&b.left;)b=b.left;else for(b=a.parent;b&&b.right===a;)a=b,b=b.parent;return b};B.prototype.prev=function(a){var b=a;if(b)if(b.left)for(b=b.left;b&&b.right;)b=b.right;else for(b=a.parent;b&&b.left===a;)a=b,b=b.parent;return b};B.prototype.forEach=function(a){for(var b=this._root,c=[],e=!1,f=0;!e;)b?(c.push(b),b=b.left):0<c.length?(b=c.pop(),a(b,f++),b=b.right):e=!0;return this};B.prototype.range=function(a,b,c,e){for(var f=[],l=this._compare,k=this._root,h;0!==f.length||k;)if(k)f.push(k),
k=k.left;else{k=f.pop();h=l(k.key,b);if(0<h)break;else if(0<=l(k.key,a)&&c.call(e,k))break;k=k.right}return this};B.prototype.keys=function(){for(var a=this._root,b=[],c=[],e=!1;!e;)a?(b.push(a),a=a.left):0<b.length?(a=b.pop(),c.push(a.key),a=a.right):e=!0;return c};B.prototype.values=function(){for(var a=this._root,b=[],c=[],e=!1;!e;)a?(b.push(a),a=a.left):0<b.length?(a=b.pop(),c.push(a.data),a=a.right):e=!0;return c};B.prototype.at=function(a){for(var b=this._root,c=[],e=!1,f=0;!e;)if(b)c.push(b),
b=b.left;else if(0<c.length){b=c.pop();if(f===a)return b;f++;b=b.right}else e=!0;return null};B.prototype.load=function(a,b,c){void 0===a&&(a=[]);void 0===b&&(b=[]);void 0===c&&(c=!1);if(0!==this._size)throw Error("bulk-load: tree is not empty");var l=a.length;c&&e(a,b,0,l-1,this._compare);this._root=f(null,a,b,0,l);this._size=l;return this};B.prototype.min=function(){var a=this.minNode(this._root);return a?a.key:null};B.prototype.max=function(){var a=this.maxNode(this._root);return a?a.key:null};
B.prototype.isEmpty=function(){return null===this._root};z.size.get=function(){return this._size};B.createTree=function(a,b,c,e,f){return(new B(c,f)).load(a,b,e)};Object.defineProperties(B.prototype,z);var w=function(a,b,c,e,f){this.left=b;this.point=a;this.otherEvent=c;this.isSubject=e;this.type=f||0;this.otherInOut=this.inOut=!1;this.prevInResult=null;this.resultInOut=this.inResult=!1;this.isExteriorRing=!0};w.prototype.isBelow=function(a){var b=this.point,c=this.otherEvent.point;return this.left?
0<(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1]):0<(c[0]-a[0])*(b[1]-a[1])-(b[0]-a[0])*(c[1]-a[1])};w.prototype.isAbove=function(a){return!this.isBelow(a)};w.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]};w.prototype.clone=function(){var a=new w(this.point,this.left,this.otherEvent,this.isSubject,this.type);a.inResult=this.inResult;a.prevInResult=this.prevInResult;a.isExteriorRing=this.isExteriorRing;a.inOut=this.inOut;a.otherInOut=this.otherInOut;return a};var P=
u;u.prototype={push:function(a){this.data.push(a);this.length++;this._up(this.length-1)},pop:function(){if(0!==this.length){var a=this.data[0];this.length--;0<this.length&&(this.data[0]=this.data[this.length],this._down(0));this.data.pop();return a}},peek:function(){return this.data[0]},_up:function(a){for(var b=this.data,c=this.compare,e=b[a];0<a;){var f=a-1>>1,k=b[f];if(0<=c(e,k))break;b[a]=k;a=f}b[a]=e},_down:function(a){for(var b=this.data,c=this.compare,e=this.length>>1,f=b[a];a<e;){var k=(a<<
1)+1,l=k+1,h=b[k];l<this.length&&0>c(b[l],h)&&(k=l,h=b[l]);if(0<=c(h,f))break;b[a]=h;a=k}b[a]=f}};P.default=u;var Q=Math.max,X=Math.min,la=0,sa=[];a.union=function(a,b){return K(a,b,1)};a.diff=function(a,b){return K(a,b,2)};a.xor=function(a,b){return K(a,b,3)};a.intersection=function(a,b){return K(a,b,0)};a.operations={UNION:1,DIFFERENCE:2,INTERSECTION:0,XOR:3};Object.defineProperty(a,"__esModule",{value:!0})});this.lzString=function(){var a=String.fromCharCode,b={},f={compress:function(a){return null==
a?"":f._compress(a,6,function(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(a)})},decompress:function(a){if(null==a)return"";if(""==a)return null;a=a.replace(/ /g,"+");return f._decompress(a.length,32,function(c){c=a.charAt(c);if(!b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"]){b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"]={};for(var e=0;65>e;e++)b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"]["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(e)]=
e}return b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"][c]})},_compress:function(a,b,c){if(null==a)return"";var e,f={},k={},p="",m=2,q=3,A=2,x=[],u=0,C=0,y;for(y=0;y<a.length;y+=1){var K=a.charAt(y);Object.prototype.hasOwnProperty.call(f,K)||(f[K]=q++,k[K]=!0);var B=p+K;if(Object.prototype.hasOwnProperty.call(f,B))p=B;else{if(Object.prototype.hasOwnProperty.call(k,p)){if(256>p.charCodeAt(0)){for(e=0;e<A;e++)u<<=1,C==b-1?(C=0,x.push(c(u)),u=0):C++;var z=p.charCodeAt(0);for(e=
0;8>e;e++)u=u<<1|z&1,C==b-1?(C=0,x.push(c(u)),u=0):C++,z>>=1}else{z=1;for(e=0;e<A;e++)u=u<<1|z,C==b-1?(C=0,x.push(c(u)),u=0):C++,z=0;z=p.charCodeAt(0);for(e=0;16>e;e++)u=u<<1|z&1,C==b-1?(C=0,x.push(c(u)),u=0):C++,z>>=1}m--;0==m&&(m=Math.pow(2,A),A++);delete k[p]}else for(z=f[p],e=0;e<A;e++)u=u<<1|z&1,C==b-1?(C=0,x.push(c(u)),u=0):C++,z>>=1;m--;0==m&&(m=Math.pow(2,A),A++);f[B]=q++;p=String(K)}}if(""!==p){if(Object.prototype.hasOwnProperty.call(k,p)){if(256>p.charCodeAt(0)){for(e=0;e<A;e++)u<<=1,C==
b-1?(C=0,x.push(c(u)),u=0):C++;z=p.charCodeAt(0);for(e=0;8>e;e++)u=u<<1|z&1,C==b-1?(C=0,x.push(c(u)),u=0):C++,z>>=1}else{z=1;for(e=0;e<A;e++)u=u<<1|z,C==b-1?(C=0,x.push(c(u)),u=0):C++,z=0;z=p.charCodeAt(0);for(e=0;16>e;e++)u=u<<1|z&1,C==b-1?(C=0,x.push(c(u)),u=0):C++,z>>=1}m--;0==m&&(m=Math.pow(2,A),A++);delete k[p]}else for(z=f[p],e=0;e<A;e++)u=u<<1|z&1,C==b-1?(C=0,x.push(c(u)),u=0):C++,z>>=1;m--;0==m&&A++}z=2;for(e=0;e<A;e++)u=u<<1|z&1,C==b-1?(C=0,x.push(c(u)),u=0):C++,z>>=1;for(;;)if(u<<=1,C==
b-1){x.push(c(u));break}else C++;return x.join("")},_decompress:function(b,c,f){var e=[],k=4,n=4,p=3,m=[],q,A,x=f(0),u=c,C=1;for(q=0;3>q;q+=1)e[q]=q;var y=0;var K=Math.pow(2,2);for(A=1;A!=K;){var B=x&u;u>>=1;0==u&&(u=c,x=f(C++));y|=(0<B?1:0)*A;A<<=1}switch(y){case 0:y=0;K=Math.pow(2,8);for(A=1;A!=K;)B=x&u,u>>=1,0==u&&(u=c,x=f(C++)),y|=(0<B?1:0)*A,A<<=1;var z=a(y);break;case 1:y=0;K=Math.pow(2,16);for(A=1;A!=K;)B=x&u,u>>=1,0==u&&(u=c,x=f(C++)),y|=(0<B?1:0)*A,A<<=1;z=a(y);break;case 2:return""}q=e[3]=
z;for(m.push(z);;){if(C>b)return"";y=0;K=Math.pow(2,p);for(A=1;A!=K;)B=x&u,u>>=1,0==u&&(u=c,x=f(C++)),y|=(0<B?1:0)*A,A<<=1;switch(z=y){case 0:y=0;K=Math.pow(2,8);for(A=1;A!=K;)B=x&u,u>>=1,0==u&&(u=c,x=f(C++)),y|=(0<B?1:0)*A,A<<=1;e[n++]=a(y);z=n-1;k--;break;case 1:y=0;K=Math.pow(2,16);for(A=1;A!=K;)B=x&u,u>>=1,0==u&&(u=c,x=f(C++)),y|=(0<B?1:0)*A,A<<=1;e[n++]=a(y);z=n-1;k--;break;case 2:return m.join("")}0==k&&(k=Math.pow(2,p),p++);if(e[z])z=e[z];else if(z===n)z=q+q.charAt(0);else return null;m.push(z);
e[n++]=q+z.charAt(0);k--;q=z;0==k&&(k=Math.pow(2,p),p++)}}};return f}();(function(a,b){"object"===typeof exports&&"undefined"!==typeof module?b(exports):"function"===typeof define&&define.amd?define(["exports"],b):b(a.opentype={})})(this,function(a){function b(){this.table=new Uint16Array(16);this.trans=new Uint16Array(288)}function f(d,g){this.source=d;this.bitcount=this.tag=this.sourceIndex=0;this.dest=g;this.destLen=0;this.ltree=new b;this.dtree=new b}function e(d,g,a,b){var t;for(t=0;t<a;++t)d[t]=
0;for(t=0;t<30-a;++t)d[t+a]=t/a|0;a=b;for(t=0;30>t;++t)g[t]=a,a+=1<<d[t]}function k(d,g,a,b){var t,I;for(t=0;16>t;++t)d.table[t]=0;for(t=0;t<b;++t)d.table[g[a+t]]++;for(t=I=d.table[0]=0;16>t;++t)rb[t]=I,I+=d.table[t];for(t=0;t<b;++t)g[a+t]&&(d.trans[rb[g[a+t]]++]=t)}function p(d,g,a){if(!g)return a;for(;24>d.bitcount;)d.tag|=d.source[d.sourceIndex++]<<d.bitcount,d.bitcount+=8;var t=d.tag&65535>>>16-g;d.tag>>>=g;d.bitcount-=g;return t+a}function h(d,g){for(;24>d.bitcount;)d.tag|=d.source[d.sourceIndex++]<<
d.bitcount,d.bitcount+=8;var a=0,b=0,c=0,S=d.tag;do b=2*b+(S&1),S>>>=1,++c,a+=g.table[c],b-=g.table[c];while(0<=b);d.tag=S;d.bitcount-=c;return g.trans[a+b]}function m(d,g,a){for(;;){var t=h(d,g);if(256===t)return 0;if(256>t)d.dest[d.destLen++]=t;else{var b;t-=257;t=p(d,Xa[t],Ya[t]);var c=h(d,a);for(b=c=d.destLen-p(d,sb[c],tb[c]);b<c+t;++b)d.dest[d.destLen++]=d.dest[b]}}}function n(d,g,a,b,c){return Math.pow(1-c,3)*d+3*Math.pow(1-c,2)*c*g+3*(1-c)*Math.pow(c,2)*a+Math.pow(c,3)*b}function v(){this.y2=
this.x2=this.y1=this.x1=Number.NaN}function q(){this.commands=[];this.fill="black";this.stroke=null;this.strokeWidth=1}function F(d){throw Error(d);}function A(d,g){d||F(g)}function x(d){return function(){return d}}function u(d,g,a){for(var t=0;t<g.length;t+=1){var b=g[t];this[b.name]=b.value}this.tableName=d;this.fields=g;if(a)for(d=Object.keys(a),g=0;g<d.length;g+=1)t=d[g],b=a[t],void 0!==this[t]&&(this[t]=b)}function C(d,g,a){void 0===a&&(a=g.length);var t=Array(g.length+1);t[0]={name:d+"Count",
type:"USHORT",value:a};for(a=0;a<g.length;a++)t[a+1]={name:d+a,type:"USHORT",value:g[a]};return t}function y(d,g,a){var t=g.length,b=Array(t+1);b[0]={name:d+"Count",type:"USHORT",value:t};for(var c=0;c<t;c++)b[c+1]={name:d+c,type:"TABLE",value:a(g[c],c)};return b}function K(d,g,a){var t=g.length,b=[];b[0]={name:d+"Count",type:"USHORT",value:t};for(d=0;d<t;d++)b=b.concat(a(g[d],d));return b}function B(d){1===d.format?u.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(C("glyph",
d.glyphs))):M.assert(!1,"Can't create coverage table format 2 yet.")}function z(d){u.call(this,"scriptListTable",K("scriptRecord",d,function(d,a){var g=d.script,t=g.defaultLangSys;M.assert(!!t,"Unable to write GSUB: script "+d.tag+" has no default language system.");return[{name:"scriptTag"+a,type:"TAG",value:d.tag},{name:"script"+a,type:"TABLE",value:new u("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new u("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",
type:"USHORT",value:t.reqFeatureIndex}].concat(C("featureIndex",t.featureIndexes)))}].concat(K("langSys",g.langSysRecords,function(d,g){var a=d.langSys;return[{name:"langSysTag"+g,type:"TAG",value:d.tag},{name:"langSys"+g,type:"TABLE",value:new u("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(C("featureIndex",a.featureIndexes)))}]})))}]}))}function w(d){u.call(this,"featureListTable",K("featureRecord",d,function(d,a){var g=
d.feature;return[{name:"featureTag"+a,type:"TAG",value:d.tag},{name:"feature"+a,type:"TABLE",value:new u("featureTable",[{name:"featureParams",type:"USHORT",value:g.featureParams}].concat(C("lookupListIndex",g.lookupListIndexes)))}]}))}function P(d,g){u.call(this,"lookupListTable",y("lookup",d,function(d){var a=g[d.lookupType];M.assert(!!a,"Unable to write GSUB lookup type "+d.lookupType+" tables.");return new u("lookupTable",[{name:"lookupType",type:"USHORT",value:d.lookupType},{name:"lookupFlag",
type:"USHORT",value:d.lookupFlag}].concat(y("subtable",d.subtables,a)))}))}function Q(d,g){return d.getUint8(g)}function X(d,g){return d.getUint16(g,!1)}function la(d,g){return d.getUint32(g,!1)}function sa(d,g){var a=d.getInt16(g,!1);d=d.getUint16(g+2,!1);return a+d/65535}function l(d,g){this.data=d;this.offset=g;this.relativeOffset=0}function G(d,g,a){d.segments.push({end:g,start:g,delta:-(g-a),offset:0,glyphIndex:a})}function N(d){this.font=d}function pb(d){this.cmap=d}function Ja(d,g){this.encoding=
d;this.charset=g}function Ta(d){switch(d.version){case 1:this.names=ta.slice();break;case 2:this.names=Array(d.numberOfGlyphs);for(var g=0;g<d.numberOfGlyphs;g++)this.names[g]=d.glyphNameIndex[g]<ta.length?ta[d.glyphNameIndex[g]]:d.names[d.glyphNameIndex[g]-ta.length];break;case 2.5:this.names=Array(d.numberOfGlyphs);for(g=0;g<d.numberOfGlyphs;g++)this.names[g]=ta[g+d.glyphNameIndex[g]];break;case 3:this.names=[];break;default:this.names=[]}}function Gc(d,g){var a=g||new q;return{configurable:!0,
get:function(){"function"===typeof a&&(a=a());return a},set:function(d){a=d}}}function Y(d){this.bindConstructorValues(d)}function Ka(d,g,a){Object.defineProperty(d,g,{get:function(){return d[a]},set:function(g){d[a]=g},enumerable:!0,configurable:!0})}function Ua(d,g){this.font=d;this.glyphs={};if(Array.isArray(g))for(d=0;d<g.length;d++)this.glyphs[d]=g[d];this.length=g&&g.length||0}function qb(d,g){if(d===g)return!0;if(Array.isArray(d)&&Array.isArray(g)){if(d.length!==g.length)return!1;for(var a=
0;a<d.length;a+=1)if(!qb(d[a],g[a]))return!1;return!0}return!1}function Va(d){return 1240>d.length?107:33900>d.length?1131:32768}function ma(d,g,a){var t=[],b=[],c=H.getCard16(d,g);if(0!==c){var e=H.getByte(d,g+2);var f=g+(c+1)*e+2;for(var k=g+3,l=0;l<c+1;l+=1)t.push(H.getOffset(d,k,e)),k+=e;c=f+t[c]}else c=g+2;for(e=0;e<t.length-1;e+=1)k=H.getBytes(d,f+t[e],f+t[e+1]),a&&(k=a(k)),b.push(k);return{objects:b,startOffset:g,endOffset:c}}function Hc(d,g){if(28===g){var a=d.parseByte();g=d.parseByte();
return a<<8|g}if(29===g){a=d.parseByte();g=d.parseByte();var b=d.parseByte();d=d.parseByte();return a<<24|g<<16|b<<8|d}if(30===g){a="";for(g=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var c=d.parseByte();b=c>>4;c&=15;if(15===b)break;a+=g[b];if(15===c)break;a+=g[c]}return parseFloat(a)}if(32<=g&&246>=g)return g-139;if(247<=g&&250>=g)return a=d.parseByte(),256*(g-247)+a+108;if(251<=g&&254>=g)return a=d.parseByte(),256*-(g-251)-a-108;throw Error("Invalid b0 "+g);}function Wa(d,
g,a){var t=new H.Parser(d,void 0!==g?g:0);g=[];var b=[];for(a=void 0!==a?a:d.length;t.relativeOffset<a;)d=t.parseByte(),21>=d?(12===d&&(d=1200+t.parseByte()),g.push([d,b]),b=[]):b.push(Hc(t,d));a={};for(d=0;d<g.length;d+=1){t=g[d][0];b=g[d][1];b=1===b.length?b[0]:b;if(a.hasOwnProperty(t)&&!isNaN(a[t]))throw Error("Object "+a+" already has key "+t);a[t]=b}return a}function Ba(d,g){return g=390>=g?La[g]:d[g-391]}function Za(d,g,a){for(var t={},b,c=0;c<g.length;c+=1){var e=g[c];if(Array.isArray(e.type)){var f=
[];f.length=e.type.length;for(var k=0;k<e.type.length;k++)b=void 0!==d[e.op]?d[e.op][k]:void 0,void 0===b&&(b=void 0!==e.value&&void 0!==e.value[k]?e.value[k]:null),"SID"===e.type[k]&&(b=Ba(a,b)),f[k]=b;t[e.name]=f}else b=d[e.op],void 0===b&&(b=void 0!==e.value?e.value:null),"SID"===e.type&&(b=Ba(a,b)),t[e.name]=b}return t}function ub(d,g,a,b){for(var t=[],I=0;I<a.length;I+=1){var c=new DataView((new Uint8Array(a[I])).buffer);var e=b;c=Wa(c,0,c.byteLength);e=Za(c,vb,e);e._subrs=[];e._subrsBias=0;
var f=e.private[0];c=e.private[1];if(0!==f&&0!==c){var k=b;f=Wa(d,c+g,f);k=Za(f,$a,k);e._defaultWidthX=k.defaultWidthX;e._nominalWidthX=k.nominalWidthX;0!==k.subrs&&(c=ma(d,c+k.subrs+g),e._subrs=c.objects,e._subrsBias=Va(e._subrs));e._privateDict=k}t.push(e)}return t}function Ic(d,g,a){function t(d,g){u&&n.closePath();n.moveTo(d,g);u=!0}function b(){0===h.length%2||p||(Q=h.shift()+P);w+=h.length>>1;h.length=0;p=!0}function c(a){for(var I,O,S,V,Z,aa,q=0;q<a.length;)switch(O=a[q],q+=1,O){case 1:b();
break;case 3:b();break;case 4:1<h.length&&!p&&(Q=h.shift()+P,p=!0);r+=h.pop();t(m,r);break;case 5:for(;0<h.length;)m+=h.shift(),r+=h.shift(),n.lineTo(m,r);break;case 6:for(;0<h.length;){m+=h.shift();n.lineTo(m,r);if(0===h.length)break;r+=h.shift();n.lineTo(m,r)}break;case 7:for(;0<h.length;){r+=h.shift();n.lineTo(m,r);if(0===h.length)break;m+=h.shift();n.lineTo(m,r)}break;case 8:for(;0<h.length;)e=m+h.shift(),f=r+h.shift(),k=e+h.shift(),l=f+h.shift(),m=k+h.shift(),r=l+h.shift(),n.curveTo(e,f,k,l,
m,r);break;case 10:I=h.pop()+N;(I=x[I])&&c(I);break;case 11:return;case 12:O=a[q];q+=1;switch(O){case 35:e=m+h.shift();f=r+h.shift();k=e+h.shift();l=f+h.shift();I=k+h.shift();O=l+h.shift();S=I+h.shift();V=O+h.shift();Z=S+h.shift();aa=V+h.shift();m=Z+h.shift();r=aa+h.shift();h.shift();n.curveTo(e,f,k,l,I,O);n.curveTo(S,V,Z,aa,m,r);break;case 34:e=m+h.shift();f=r;k=e+h.shift();l=f+h.shift();I=k+h.shift();O=l;S=I+h.shift();V=l;Z=S+h.shift();aa=r;m=Z+h.shift();n.curveTo(e,f,k,l,I,O);n.curveTo(S,V,Z,aa,
m,r);break;case 36:e=m+h.shift();f=r+h.shift();k=e+h.shift();l=f+h.shift();I=k+h.shift();O=l;S=I+h.shift();V=l;Z=S+h.shift();aa=V+h.shift();m=Z+h.shift();n.curveTo(e,f,k,l,I,O);n.curveTo(S,V,Z,aa,m,r);break;case 37:e=m+h.shift();f=r+h.shift();k=e+h.shift();l=f+h.shift();I=k+h.shift();O=l+h.shift();S=I+h.shift();V=O+h.shift();Z=S+h.shift();aa=V+h.shift();Math.abs(Z-m)>Math.abs(aa-r)?m=Z+h.shift():r=aa+h.shift();n.curveTo(e,f,k,l,I,O);n.curveTo(S,V,Z,aa,m,r);break;default:console.log("Glyph "+g.index+
": unknown operator 1200"+O),h.length=0}break;case 14:0<h.length&&!p&&(Q=h.shift()+P,p=!0);u&&(n.closePath(),u=!1);break;case 18:b();break;case 19:case 20:b();q+=w+7>>3;break;case 21:2<h.length&&!p&&(Q=h.shift()+P,p=!0);r+=h.pop();m+=h.pop();t(m,r);break;case 22:1<h.length&&!p&&(Q=h.shift()+P,p=!0);m+=h.pop();t(m,r);break;case 23:b();break;case 24:for(;2<h.length;)e=m+h.shift(),f=r+h.shift(),k=e+h.shift(),l=f+h.shift(),m=k+h.shift(),r=l+h.shift(),n.curveTo(e,f,k,l,m,r);m+=h.shift();r+=h.shift();n.lineTo(m,
r);break;case 25:for(;6<h.length;)m+=h.shift(),r+=h.shift(),n.lineTo(m,r);e=m+h.shift();f=r+h.shift();k=e+h.shift();l=f+h.shift();m=k+h.shift();r=l+h.shift();n.curveTo(e,f,k,l,m,r);break;case 26:for(h.length%2&&(m+=h.shift());0<h.length;)e=m,f=r+h.shift(),k=e+h.shift(),l=f+h.shift(),m=k,r=l+h.shift(),n.curveTo(e,f,k,l,m,r);break;case 27:for(h.length%2&&(r+=h.shift());0<h.length;)e=m+h.shift(),f=r,k=e+h.shift(),l=f+h.shift(),m=k+h.shift(),r=l,n.curveTo(e,f,k,l,m,r);break;case 28:I=a[q];O=a[q+1];h.push((I<<
24|O<<16)>>16);q+=2;break;case 29:I=h.pop()+d.gsubrsBias;(I=d.gsubrs[I])&&c(I);break;case 30:for(;0<h.length;){e=m;f=r+h.shift();k=e+h.shift();l=f+h.shift();m=k+h.shift();r=l+(1===h.length?h.shift():0);n.curveTo(e,f,k,l,m,r);if(0===h.length)break;e=m+h.shift();f=r;k=e+h.shift();l=f+h.shift();r=l+h.shift();m=k+(1===h.length?h.shift():0);n.curveTo(e,f,k,l,m,r)}break;case 31:for(;0<h.length;){e=m+h.shift();f=r;k=e+h.shift();l=f+h.shift();r=l+h.shift();m=k+(1===h.length?h.shift():0);n.curveTo(e,f,k,l,
m,r);if(0===h.length)break;e=m;f=r+h.shift();k=e+h.shift();l=f+h.shift();m=k+h.shift();r=l+(1===h.length?h.shift():0);n.curveTo(e,f,k,l,m,r)}break;default:32>O?console.log("Glyph "+g.index+": unknown operator "+O):247>O?h.push(O-139):251>O?(I=a[q],q+=1,h.push(256*(O-247)+I+108)):255>O?(I=a[q],q+=1,h.push(256*-(O-251)-I-108)):(I=a[q],O=a[q+1],S=a[q+2],V=a[q+3],q+=4,h.push((I<<24|O<<16|S<<8|V)/65536))}}var e,f,k,l,n=new q,h=[],w=0,p=!1,u=!1,m=0,r=0;if(d.isCIDFont){var v=d.tables.cff.topDict._fdArray[d.tables.cff.topDict._fdSelect[g.index]];
var x=v._subrs;var N=v._subrsBias;var C=v._defaultWidthX;var P=v._nominalWidthX}else x=d.tables.cff.topDict._subrs,N=d.tables.cff.topDict._subrsBias,C=d.tables.cff.topDict._defaultWidthX,P=d.tables.cff.topDict._nominalWidthX;var Q=C;c(a);g.advanceWidth=Q;return n}function wb(d,g){La.indexOf(d);var a=g.indexOf(d);0<=a?a+=La.length:(a=La.length+g.length,g.push(d));return a}function xb(d,g,a){for(var t={},b=0;b<d.length;b+=1){var c=d[b],e=g[c.name];void 0===e||qb(e,c.value)||("SID"===c.type&&(e=wb(e,
a)),t[c.op]={name:c.name,type:c.type,value:e})}return t}function yb(d,g){var a=new J.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);a.dict=xb(vb,d,g);return a}function zb(d){var g=new J.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);g.topDicts=[{name:"topDict_0",type:"TABLE",value:d}];return g}function Ab(d,g,a){switch(d){case 0:return"utf-16";case 1:return Jc[a]||Kc[g];case 3:if(1===g||10===g)return"utf-16"}}function ab(d){var g={},a;for(a in d)g[d[a]]=parseInt(a);return g}
function Bb(d,g,a,b,c,e){return new J.Record("NameRecord",[{name:"platformID",type:"USHORT",value:d},{name:"encodingID",type:"USHORT",value:g},{name:"languageID",type:"USHORT",value:a},{name:"nameID",type:"USHORT",value:b},{name:"length",type:"USHORT",value:c},{name:"offset",type:"USHORT",value:e}])}function Cb(d,g){a:{var a=d.length;var b=g.length-a+1,c=0;b:for(;c<b;c++){for(var e=0;e<a;e++)if(g[c+e]!==d[e])continue b;a=c;break a}a=-1}if(0>a)for(a=g.length,b=0,c=d.length;b<c;++b)g.push(d[b]);return a}
function bb(d){for(;0!==d.length%4;)d.push(0);for(var g=0,a=0;a<d.length;a+=4)g+=(d[a]<<24)+(d[a+1]<<16)+(d[a+2]<<8)+d[a+3];return g%=Math.pow(2,32)}function Db(d,g,a,b){return new J.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==d?d:""},{name:"checkSum",type:"ULONG",value:void 0!==g?g:0},{name:"offset",type:"ULONG",value:void 0!==a?a:0},{name:"length",type:"ULONG",value:void 0!==b?b:0}])}function Eb(d){var g=new J.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",
type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);g.tables=d;g.numTables=d.length;var a=Math.pow(2,Math.log(g.numTables)/Math.log(2)|0);g.searchRange=16*a;g.entrySelector=Math.log(a)/Math.log(2)|0;g.rangeShift=16*g.numTables-g.searchRange;a=[];for(var b=[],c=g.sizeOf()+Db().sizeOf()*g.numTables;0!==c%4;)c+=1,b.push({name:"padding",type:"BYTE",value:0});for(var e=0;e<d.length;e+=1){var f=d[e];M.argument(4===
f.tableName.length,"Table name"+f.tableName+" is invalid.");var h=f.sizeOf(),k=Db(f.tableName,bb(f.encode()),c,h);a.push({name:k.tag+" Table Record",type:"RECORD",value:k});b.push({name:f.tableName+" table",type:"RECORD",value:f});c+=h;for(M.argument(!isNaN(c),"Something went wrong calculating the offset.");0!==c%4;)c+=1,b.push({name:"padding",type:"BYTE",value:0})}a.sort(function(d,g){return d.value.tag>g.value.tag?1:-1});g.fields=g.fields.concat(a);g.fields=g.fields.concat(b);return g}function Fb(d,
g,a){for(var t=0;t<g.length;t+=1){var b=d.charToGlyphIndex(g[t]);if(0<b)return d.glyphs.get(b).getMetrics()}return a}function cb(d,g){for(var a=0,b=d.length-1;a<=b;){var c=a+b>>>1,e=d[c].tag;if(e===g)return c;e<g?a=c+1:b=c-1}return-a-1}function Gb(d,g){for(var a=0,b=d.length-1;a<=b;){var c=a+b>>>1,e=d[c];if(e===g)return c;e<g?a=c+1:b=c-1}return-a-1}function Hb(d,g){for(var a,b=0,c=d.length-1;b<=c;){var e=b+c>>>1;a=d[e];var f=a.start;if(f===g)return a;f<g?b=e+1:c=e-1}if(0<b)return a=d[b-1],g>a.end?
0:a}function Ca(d,g){this.font=d;this.tableName=g}function Da(d){Ca.call(this,d,"gpos")}function ba(d){Ca.call(this,d,"gsub")}function Ib(d,g,a){d=d.subtables;for(var t=0;t<d.length;t++){var b=d[t];if(b.substFormat===g)return b}if(a)return d.push(a),a}function Jb(d){for(var g=new ArrayBuffer(d.length),a=new Uint8Array(g),b=0;b<d.length;++b)a[b]=d[b];return g}function va(d,g){if(!d)throw g;}function Kb(d,g,a,b,c){0<(g&b)?(d=d.parseByte(),0===(g&c)&&(d=-d),d=a+d):d=0<(g&c)?a:a+d.parseShort();return d}
function Lc(d,g,a){g=new H.Parser(g,a);d.numberOfContours=g.parseShort();d._xMin=g.parseShort();d._yMin=g.parseShort();d._xMax=g.parseShort();d._yMax=g.parseShort();var t;if(0<d.numberOfContours){var b=d.endPointIndices=[];for(t=0;t<d.numberOfContours;t+=1)b.push(g.parseUShort());d.instructionLength=g.parseUShort();d.instructions=[];for(t=0;t<d.instructionLength;t+=1)d.instructions.push(g.parseByte());var c=b[b.length-1]+1;t=[];for(var e=0;e<c;e+=1)if(a=g.parseByte(),t.push(a),0<(a&8))for(var f=g.parseByte(),
h=0;h<f;h+=1)t.push(a),e+=1;M.argument(t.length===c,"Bad flags.");if(0<b.length){e=[];if(0<c){for(h=0;h<c;h+=1)a=t[h],f={},f.onCurve=!!(a&1),f.lastPointOfContour=0<=b.indexOf(h),e.push(f);for(h=b=0;h<c;h+=1)a=t[h],f=e[h],f.x=Kb(g,a,b,2,16),b=f.x;for(h=b=0;h<c;h+=1)a=t[h],f=e[h],f.y=Kb(g,a,b,4,32),b=f.y}d.points=e}else d.points=[]}else if(0===d.numberOfContours)d.points=[];else{d.isComposite=!0;d.points=[];d.components=[];for(a=!0;a;)t=g.parseUShort(),a={glyphIndex:g.parseUShort(),xScale:1,scale01:0,
scale10:0,yScale:1,dx:0,dy:0},0<(t&1)?0<(t&2)?(a.dx=g.parseShort(),a.dy=g.parseShort()):a.matchedPoints=[g.parseUShort(),g.parseUShort()]:0<(t&2)?(a.dx=g.parseChar(),a.dy=g.parseChar()):a.matchedPoints=[g.parseByte(),g.parseByte()],0<(t&8)?a.xScale=a.yScale=g.parseF2Dot14():0<(t&64)?(a.xScale=g.parseF2Dot14(),a.yScale=g.parseF2Dot14()):0<(t&128)&&(a.xScale=g.parseF2Dot14(),a.scale01=g.parseF2Dot14(),a.scale10=g.parseF2Dot14(),a.yScale=g.parseF2Dot14()),d.components.push(a),a=!!(t&32);if(t&256)for(d.instructionLength=
g.parseUShort(),d.instructions=[],t=0;t<d.instructionLength;t+=1)d.instructions.push(g.parseByte())}}function db(d,g){for(var a=[],b=0;b<d.length;b+=1){var c=d[b];a.push({x:g.xScale*c.x+g.scale01*c.y+g.dx,y:g.scale10*c.x+g.yScale*c.y+g.dy,onCurve:c.onCurve,lastPointOfContour:c.lastPointOfContour})}return a}function Lb(d){var g=new q;if(!d)return g;for(var a=[],b=[],c=0;c<d.length;c+=1){var e=d[c];b.push(e);e.lastPointOfContour&&(a.push(b),b=[])}M.argument(0===b.length,"There are still points left in the current contour.");
for(d=0;d<a.length;++d){b=a[d];c=b[b.length-1];e=b[0];c.onCurve?g.moveTo(c.x,c.y):e.onCurve?g.moveTo(e.x,e.y):g.moveTo(.5*(c.x+e.x),.5*(c.y+e.y));for(var f=0;f<b.length;++f)if(c=e,e=b[(f+1)%b.length],c.onCurve)g.lineTo(c.x,c.y);else{var h=e;e.onCurve||(h={x:.5*(c.x+e.x),y:.5*(c.y+e.y)});g.quadraticCurveTo(c.x,c.y,h.x,h.y)}g.closePath()}return g}function Mc(d,g){if(g.isComposite)for(var a=0;a<g.components.length;a+=1){var b=g.components[a],c=d.get(b.glyphIndex);c.getPath();if(c.points){if(void 0===
b.matchedPoints)c=db(c.points,b);else{if(b.matchedPoints[0]>g.points.length-1||b.matchedPoints[1]>c.points.length-1)throw Error("Matched points out of range in "+g.name);var e=g.points[b.matchedPoints[0]],f=c.points[b.matchedPoints[1]];b={xScale:b.xScale,scale01:b.scale01,scale10:b.scale10,yScale:b.yScale,dx:0,dy:0};f=db([f],b)[0];b.dx=e.x-f.x;b.dy=e.y-f.y;c=db(c.points,b)}g.points=g.points.concat(c)}}return Lb(g.points)}function Mb(d){this.font=d;this.getCommands=function(d){return Nb.getPath(d).commands};
this._fpgmState=this._prepState=void 0;this._errorState=0}function Nc(d){return d}function Ob(d){return Math.sign(d)*Math.round(Math.abs(d))}function Oc(d){return Math.sign(d)*Math.round(Math.abs(2*d))/2}function Pc(d){return Math.sign(d)*(Math.round(Math.abs(d)+.5)-.5)}function Qc(d){return Math.sign(d)*Math.ceil(Math.abs(d))}function Rc(d){return Math.sign(d)*Math.floor(Math.abs(d))}function Ea(d,g){this.x=d;this.y=g;this.axis=void 0;this.slope=g/d;this.normalSlope=-d/g;Object.freeze(this)}function Fa(d,
g){var a=Math.sqrt(d*d+g*g);d/=a;g/=a;return 1===d&&0===g?ea:0===d&&1===g?ia:new Ea(d,g)}function ja(d,g,a,b){this.x=this.xo=Math.round(64*d)/64;this.y=this.yo=Math.round(64*g)/64;this.lastPointOfContour=a;this.onCurve=b;this.nextPointOnContour=this.prevPointOnContour=void 0;this.yTouched=this.xTouched=!1;Object.preventExtensions(this)}function na(d,g){this.env=d;this.stack=[];this.prog=g;switch(d){case "glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case "prep":this.fv=this.pv=this.dpv=
ea,this.round=Ob}}function Ma(d){d=d.tZone=Array(d.gZone.length);for(var g=0;g<d.length;g++)d[g]=new ja(0,0)}function Pb(d,g){var a=d.prog,b=d.ip,c=1;do{var e=a[++b];if(88===e)c++;else if(89===e)c--;else if(64===e)b+=a[b+1]+1;else if(65===e)b+=2*a[b+1]+1;else if(176<=e&&183>=e)b+=e-176+1;else if(184<=e&&191>=e)b+=2*(e-184+1);else if(g&&1===c&&27===e)break}while(0<c);d.ip=b}function Qb(d,g){a.DEBUG&&console.log(g.step,"SVTCA["+d.axis+"]");g.fv=g.pv=g.dpv=d}function Rb(d,g){a.DEBUG&&console.log(g.step,
"SPVTCA["+d.axis+"]");g.pv=g.dpv=d}function Sb(d,g){a.DEBUG&&console.log(g.step,"SFVTCA["+d.axis+"]");g.fv=d}function Tb(d,g){var b=g.stack,c=b.pop(),e=b.pop();b=g.z2[c];var f=g.z1[e];a.DEBUG&&console.log("SPVTL["+d+"]",c,e);d?(d=b.y-f.y,c=f.x-b.x):(d=f.x-b.x,c=f.y-b.y);g.pv=g.dpv=Fa(d,c)}function Ub(d,g){var b=g.stack,c=b.pop(),e=b.pop();b=g.z2[c];var f=g.z1[e];a.DEBUG&&console.log("SFVTL["+d+"]",c,e);d?(d=b.y-f.y,c=f.x-b.x):(d=f.x-b.x,c=f.y-b.y);g.fv=Fa(d,c)}function eb(d){a.DEBUG&&console.log(d.step,
"POP[]");d.stack.pop()}function Vb(d,g){var b=g.stack.pop(),c=g.z0[b],e=g.fv,f=g.pv;a.DEBUG&&console.log(g.step,"MDAP["+d+"]",b);var h=f.distance(c,Ga);d&&(h=g.round(h));e.setRelative(c,Ga,h,f);e.touch(c);g.rp0=g.rp1=b}function Wb(d,g){var b=g.z2,c=b.length-2;a.DEBUG&&console.log(g.step,"IUP["+d.axis+"]");for(var e=0;e<c;e++)if(g=b[e],!d.touched(g)){var f=g.prevTouched(d);if(f!==g){var h=g.nextTouched(d);f===h&&d.setRelative(g,g,d.distance(f,f,!1,!0),d,!0);d.interpolate(g,f,h,d)}}}function Xb(d,g){for(var b=
g.stack,c=(d?g.z0:g.z1)[d?g.rp1:g.rp2],e=g.fv,f=g.pv,h=g.loop,k=g.z2;h--;){var l=b.pop(),n=k[l],m=f.distance(c,c,!1,!0);e.setRelative(n,n,m,f);e.touch(n);a.DEBUG&&console.log(g.step,(1<g.loop?"loop "+(g.loop-h)+": ":"")+"SHP["+(d?"rp1":"rp2")+"]",l)}g.loop=1}function Yb(d,g){var b=(d?g.z0:g.z1)[d?g.rp1:g.rp2],c=g.fv,e=g.pv,f=g.stack.pop(),h=g.z2[g.contours[f]],k=h;a.DEBUG&&console.log(g.step,"SHC["+d+"]",f);d=e.distance(b,b,!1,!0);do k!==b&&c.setRelative(k,k,d,e),k=k.nextPointOnContour;while(k!==
h)}function Zb(d,g){var b=(d?g.z0:g.z1)[d?g.rp1:g.rp2],c=g.fv,e=g.pv,f=g.stack.pop();a.DEBUG&&console.log(g.step,"SHZ["+d+"]",f);switch(f){case 0:d=g.tZone;break;case 1:d=g.gZone;break;default:throw Error("Invalid zone");}g=e.distance(b,b,!1,!0);f=d.length-2;for(var h=0;h<f;h++)b=d[h],c.setRelative(b,b,g,e)}function $b(d,g){var b=g.stack,c=b.pop()/64;b=b.pop();var e=g.z1[b],f=g.fv;f.setRelative(e,g.z0[g.rp0],c,g.pv);f.touch(e);a.DEBUG&&console.log(g.step,"MSIRP["+d+"]",c,b);g.rp1=g.rp0;g.rp2=b;d&&
(g.rp0=b)}function ac(d,g){var b=g.stack,c=b.pop();b=b.pop();var e=g.z0[b],f=g.fv,h=g.pv,k=g.cvt[c];a.DEBUG&&console.log(g.step,"MIAP["+d+"]",c,"(",k,")",b);c=h.distance(e,Ga);d&&(Math.abs(c-k)<g.cvCutIn&&(c=k),c=g.round(c));f.setRelative(e,Ga,c,h);0===g.zp0&&(e.xo=e.x,e.yo=e.y);f.touch(e);g.rp0=g.rp1=b}function bc(d,g){var b=g.stack,c=b.pop(),e=g.z2[c];a.DEBUG&&console.log(g.step,"GC["+d+"]",c);b.push(64*g.dpv.distance(e,Ga,d,!1))}function cc(d,g){var b=g.stack,c=b.pop();b=b.pop();var e=g.dpv.distance(g.z0[b],
g.z1[c],d,d);a.DEBUG&&console.log(g.step,"MD["+d+"]",c,b,"->",e);g.stack.push(Math.round(64*e))}function fb(d,g){var b=g.stack,c=b.pop(),e=g.fv,f=g.pv,h=g.ppem,k=g.deltaBase+16*(d-1),l=g.deltaShift,n=g.z0;a.DEBUG&&console.log(g.step,"DELTAP["+d+"]",c,b);for(d=0;d<c;d++){var m=b.pop(),w=b.pop();k+((w&240)>>4)===h&&(w=(w&15)-8,0<=w&&w++,a.DEBUG&&console.log(g.step,"DELTAPFIX",m,"by",w*l),m=n[m],e.setRelative(m,m,w*l,f))}}function Na(d,g){d=g.stack;var b=d.pop();a.DEBUG&&console.log(g.step,"ROUND[]");
d.push(64*g.round(b/64))}function gb(d,g){var b=g.stack,c=b.pop(),e=g.ppem,f=g.deltaBase+16*(d-1),h=g.deltaShift;a.DEBUG&&console.log(g.step,"DELTAC["+d+"]",c,b);for(d=0;d<c;d++){var k=b.pop(),l=b.pop();f+((l&240)>>4)===e&&(l=(l&15)-8,0<=l&&l++,l*=h,a.DEBUG&&console.log(g.step,"DELTACFIX",k,"by",l),g.cvt[k]+=l)}}function dc(d,g){var b=g.stack,c=b.pop(),e=b.pop();b=g.z2[c];var f=g.z1[e];a.DEBUG&&console.log(g.step,"SDPVTL["+d+"]",c,e);d?(d=b.y-f.y,c=f.x-b.x):(d=f.x-b.x,c=f.y-b.y);g.dpv=Fa(d,c)}function oa(d,
g){var b=g.stack,c=g.prog,e=g.ip;a.DEBUG&&console.log(g.step,"PUSHB["+d+"]");for(var f=0;f<d;f++)b.push(c[++e]);g.ip=e}function pa(d,g){var b=g.ip,c=g.prog,e=g.stack;a.DEBUG&&console.log(g.ip,"PUSHW["+d+"]");for(var f=0;f<d;f++){var h=c[++b]<<8|c[++b];h&32768&&(h=-((h^65535)+1));e.push(h)}g.ip=b}function E(d,g,b,c,e,f){var t=f.stack,I=d&&t.pop();t=t.pop();var O=f.z0[f.rp0],h=f.z1[t],S=f.minDis,k=f.fv,l=f.dpv,n;var m=n=l.distance(h,O,!0,!0);var w=0<=m?1:-1;m=Math.abs(m);if(d){var p=f.cvt[I];c&&Math.abs(m-
p)<f.cvCutIn&&(m=p)}b&&m<S&&(m=S);c&&(m=f.round(m));k.setRelative(h,O,w*m,l);k.touch(h);a.DEBUG&&console.log(f.step,(d?"MIRP[":"MDRP[")+(g?"M":"m")+(b?">":"_")+(c?"R":"_")+(0===e?"Gr":1===e?"Bl":2===e?"Wh":"")+"]",d?I+"("+f.cvt[I]+","+p+")":"",t,"(d =",n,"->",w*m,")");f.rp1=f.rp0;f.rp2=t;g&&(f.rp0=t)}function wa(d){this.char=d;this.state={};this.activeState=null}function hb(d,g,a){this.contextName=a;this.startIndex=d;this.endOffset=g}function Sc(d,g,a){this.contextName=d;this.openRange=null;this.ranges=
[];this.checkStart=g;this.checkEnd=a}function fa(d,g){this.context=d;this.index=g;this.length=d.length;this.current=d[g];this.backtrack=d.slice(0,g);this.lookahead=d.slice(g+1)}function Oa(d){this.eventId=d;this.subscribers=[]}function Tc(d){var g=this,a="start end next newToken contextStart contextEnd insertToken removeToken removeRange replaceToken replaceRange composeRUD updateContextsRanges".split(" ");a.forEach(function(d){Object.defineProperty(g.events,d,{value:new Oa(d)})});d&&a.forEach(function(a){var b=
d[a];"function"===typeof b&&g.events[a].subscribe(b)});"insertToken removeToken removeRange replaceToken replaceRange composeRUD".split(" ").forEach(function(d){g.events[d].subscribe(g.updateContextsRanges)})}function T(d){this.tokens=[];this.registeredContexts={};this.contextCheckers=[];this.events={};this.registeredModifiers=[];Tc.call(this,d)}function qa(d){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(d)}function ec(d){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(d)}
function ra(d){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(d)}function fc(d){var g=this.features.arab;d=this.tokenizer.getRangeTokens(d);if(1!==d.length){var a=function(d,a,b){if(g.hasOwnProperty(d)&&(b=g[d].lookup(b)||null,b=(1===b.length&&12===b[0].id&&b[0].substitution)[0],0<=b))return a.setState(d,b)},b=new fa(d,0),c=new fa(d.map(function(d){return d.char}),0);d.forEach(function(d,g){if(!ra(d.char)){b.setCurrentIndex(g);
c.setCurrentIndex(g);g=0;a:{var t=[].concat(c.backtrack);for(var I=t.length-1;0<=I;I--){var e=t[I],O=ec(e);e=ra(e);if(!O&&!e){t=!0;break a}if(O){t=!1;break a}}t=!1}t&&(g|=1);a:{if(!ec(c.current))for(t=0;t<c.lookahead.length;t++)if(!ra(c.lookahead[t])){t=!0;break a}t=!1}t&&(g|=2);switch(g){case 1:a("fina",d,b);break;case 2:a("init",d,b);break;case 3:a("medi",d,b)}}})}}function ka(d){this.baseDir=d||"ltr";this.tokenizer=new T;this.features=[]}function Uc(){var d=this;this.tokenizer.getContextRanges("arabicSentence").forEach(function(g){var a=
d.tokenizer.getRangeTokens(g);d.tokenizer.replaceRange(g.startIndex,g.endOffset,a.reverse())})}function gc(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw Error("glyphIndex modifier is required to apply arabic presentation features.");}function Vc(){var d=this;this.features.hasOwnProperty("arab")&&(gc.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(g){fc.call(d,g)}))}function Wc(){var d=this;this.features.hasOwnProperty("arab")&&this.features.arab.hasOwnProperty("rlig")&&
(gc.call(this),this.tokenizer.getContextRanges("arabicWord").forEach(function(g){var a=d.features.arab;if(a.hasOwnProperty("rlig")){g=d.tokenizer.getRangeTokens(g);for(var b=0;b<g.length;b++){var c=new fa(g,b),e=a.rlig.lookup(c)||null,f=1===e.length&&63===e[0].id&&e[0].substitution;e=1===e.length&&41===e[0].id&&e[0].substitution[0];var h=g[b];if(e)for(h.setState("rlig",[e.ligGlyph]),f=0;f<e.components.length;f++){h=e.components[f];var k=c.get(f+1);k.activeState.value===h&&(k.state.deleted=!0)}else f&&
(c=f&&1===f.length&&12===f[0].id&&f[0].substitution)&&0<=c&&h.setState("rlig",c)}}}))}function Ha(d,g){this.font=d;this.features={};ib=g?g:ib}function hc(d,g,a,b){this.tag=d;this.featureRef=g;this.lookups=a.lookups;this.script=b}function Ia(d){this.table=d}function ic(d){this.ligatureSets=d}function jc(d,a,b){this.lookups=d;this.subtable=b;this.lookupTable=a;b.hasOwnProperty("coverage")&&(this.coverage=new Ia(b.coverage));b.hasOwnProperty("inputCoverage")&&(this.inputCoverage=b.inputCoverage.map(function(d){return new Ia(d)}));
b.hasOwnProperty("backtrackCoverage")&&(this.backtrackCoverage=b.backtrackCoverage.map(function(d){return new Ia(d)}));b.hasOwnProperty("lookaheadCoverage")&&(this.lookaheadCoverage=b.lookaheadCoverage.map(function(d){return new Ia(d)}));b.hasOwnProperty("ligatureSets")&&(this.ligatureSets=new ic(b.ligatureSets))}function jb(d,a){this.index=d;this.subtables=a[d].subtables.map(function(g){return new jc(a,a[d],g)})}function Xc(d,a){this.lookups=a.map(function(a){return new jb(a,d)})}function kb(d,a){for(var g=
[],b=0;b<d.length;b++){var c=d[b],e=a.current.activeState.value;e=Array.isArray(e)?e[0]:e;c=c.lookup(e);-1!==c&&g.push(c)}return g.length!==d.length?-1:g}function Yc(d){if(d.context.length<this.inputCoverage.length+this.lookaheadCoverage.length+this.backtrackCoverage.length)return[];var a=kb(this.inputCoverage,d);if(-1===a||d.lookahead.length<this.lookaheadCoverage.length)return[];for(var b=d.lookahead.slice(this.inputCoverage.length-1);b.length&&ra(b[0].char);)b.shift();b=new fa(b,0);var c=kb(this.lookaheadCoverage,
b);b=[].concat(d.backtrack);for(b.reverse();b.length&&ra(b[0].char);)b.shift();if(b.length<this.backtrackCoverage.length)return[];b=new fa(b,0);var e=kb(this.backtrackCoverage,b);b=[];if(a.length===this.inputCoverage.length&&c.length===this.lookaheadCoverage.length&&e.length===this.backtrackCoverage.length)for(c=this.subtable.lookupRecords,e=0;e<c.length;e++)for(var f=c[e],h=0;h<a.length;h++){var k=new fa([d.get(h)],0);k=(new jb(f.lookupListIndex,this.lookups)).lookup(k);b=b.concat(k)}return b}function R(d){d=
d||{};d.empty||(va(d.familyName,"When creating a new Font object, familyName is required."),va(d.styleName,"When creating a new Font object, styleName is required."),va(d.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),va(d.ascender,"When creating a new Font object, ascender is required."),va(d.descender,"When creating a new Font object, descender is required."),va(0>d.descender,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:d.familyName||" "},fontSubfamily:{en:d.styleName||
" "},fullName:{en:d.fullName||d.familyName+" "+d.styleName},postScriptName:{en:d.postScriptName||(d.familyName+d.styleName).replace(/\s/g,"")},designer:{en:d.designer||" "},designerURL:{en:d.designerURL||" "},manufacturer:{en:d.manufacturer||" "},manufacturerURL:{en:d.manufacturerURL||" "},license:{en:d.license||" "},licenseURL:{en:d.licenseURL||" "},version:{en:d.version||"Version 0.1"},description:{en:d.description||" "},copyright:{en:d.copyright||" "},trademark:{en:d.trademark||" "}},this.unitsPerEm=
d.unitsPerEm||1E3,this.ascender=d.ascender,this.descender=d.descender,this.createdTimestamp=d.createdTimestamp,this.tables={os2:{usWeightClass:d.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:d.widthClass||this.usWidthClasses.MEDIUM,fsSelection:d.fsSelection||this.fsSelectionValues.REGULAR}});this.supported=!0;this.glyphs=new xa.GlyphSet(this,d.glyphs||[]);this.encoding=new N(this);this.position=new Da(this);this.substitution=new ba(this);this.tables=this.tables||{};Object.defineProperty(this,
"hinting",{get:function(){if(this._hinting)return this._hinting;if("truetype"===this.outlinesFormat)return this._hinting=new Mb(this)}})}function kc(d,a){var g=JSON.stringify(d),b=256,c;for(c in a){var e=parseInt(c);if(e&&!(256>e)){if(JSON.stringify(a[c])===g)return e;b<=e&&(b=e+1)}}a[b]=d;return b}function Zc(d,a,b){b=kc(a.name,b);return[{name:"tag_"+d,type:"TAG",value:a.tag},{name:"minValue_"+d,type:"FIXED",value:a.minValue<<16},{name:"defaultValue_"+d,type:"FIXED",value:a.defaultValue<<16},{name:"maxValue_"+
d,type:"FIXED",value:a.maxValue<<16},{name:"flags_"+d,type:"USHORT",value:0},{name:"nameID_"+d,type:"USHORT",value:b}]}function $c(d,a,b){var g={};d=new H.Parser(d,a);g.tag=d.parseTag();g.minValue=d.parseFixed();g.defaultValue=d.parseFixed();g.maxValue=d.parseFixed();d.skip("uShort",1);g.name=b[d.parseUShort()]||{};return g}function ad(d,a,b,c){c=kc(a.name,c);c=[{name:"nameID_"+d,type:"USHORT",value:c},{name:"flags_"+d,type:"USHORT",value:0}];for(var g=0;g<b.length;++g){var t=b[g].tag;c.push({name:"axis_"+
d+" "+t,type:"FIXED",value:a.coordinates[t]<<16})}return c}function bd(d,a,b,c){var g={};d=new H.Parser(d,a);g.name=c[d.parseUShort()]||{};d.skip("uShort",1);g.coordinates={};for(c=0;c<b.length;++c)g.coordinates[b[c].tag]=d.parseFixed();return g}function cd(d,a){require("fs").readFile(d,function(d,g){if(d)return a(d.message);a(null,Jb(g))})}function dd(d,a){var g=new XMLHttpRequest;g.open("get",d,!0);g.responseType="arraybuffer";g.onload=function(){return g.response?a(null,g.response):a("Font could not be loaded: "+
g.statusText)};g.onerror=function(){a("Font could not be loaded")};g.send()}function lc(d,a){for(var g=[],b=12,c=0;c<a;c+=1){var e=H.getTag(d,b),f=H.getULong(d,b+4),h=H.getULong(d,b+8),k=H.getULong(d,b+12);g.push({tag:e,checksum:f,offset:h,length:k,compression:!1});b+=16}return g}function U(d,a){if("WOFF"===a.compression){var g=new Uint8Array(d.buffer,a.offset+2,a.compressedLength-2);d=new Uint8Array(a.length);g=new f(g,d);do{var b=g;b.bitcount--||(b.tag=b.source[b.sourceIndex++],b.bitcount=7);var c=
b.tag&1;b.tag>>>=1;b=c;c=p(g,2,0);switch(c){case 0:for(c=g;8<c.bitcount;)c.sourceIndex--,c.bitcount-=8;var e=c.source[c.sourceIndex+1];e=256*e+c.source[c.sourceIndex];var l=c.source[c.sourceIndex+3];l=256*l+c.source[c.sourceIndex+2];if(e!==(~l&65535))c=-3;else{c.sourceIndex+=4;for(l=e;l;--l)c.dest[c.destLen++]=c.source[c.sourceIndex++];c=c.bitcount=0}break;case 1:c=m(g,mc,nc);break;case 2:var n;e=g;var w=g.ltree,r=g.dtree;l=p(e,5,257);c=p(e,5,1);var u=p(e,4,4);for(n=0;19>n;++n)ha[n]=0;for(n=0;n<u;++n){var q=
p(e,3,0);ha[ed[n]]=q}k(oc,ha,0,19);for(n=0;n<l+c;)switch(u=h(e,oc),u){case 16:q=ha[n-1];for(u=p(e,2,3);u;--u)ha[n++]=q;break;case 17:for(u=p(e,3,3);u;--u)ha[n++]=0;break;case 18:for(u=p(e,7,11);u;--u)ha[n++]=0;break;default:ha[n++]=u}k(w,ha,0,l);k(r,ha,l,c);c=m(g,g.ltree,g.dtree);break;default:c=-3}if(0!==c)throw Error("Data error");}while(!b);g.destLen<g.dest.length&&("function"===typeof g.dest.slice?g.dest.slice(0,g.destLen):g.dest.subarray(0,g.destLen));if(d.byteLength!==a.length)throw Error("Decompression error: "+
a.tag+" decompressed length doesn't match recorded length");return{data:new DataView(d.buffer,0),offset:0}}return{data:d,offset:a.offset}}function lb(d){var a=new R({empty:!0});d=new DataView(d,0);var b=H.getTag(d,0);if(b===String.fromCharCode(0,1,0,0)||"true"===b||"typ1"===b){a.outlinesFormat="truetype";b=H.getUShort(d,4);var c=lc(d,b)}else if("OTTO"===b)a.outlinesFormat="cff",b=H.getUShort(d,4),c=lc(d,b);else if("wOFF"===b){c=H.getTag(d,4);if(c===String.fromCharCode(0,1,0,0))a.outlinesFormat="truetype";
else if("OTTO"===c)a.outlinesFormat="cff";else throw Error("Unsupported OpenType flavor "+b);c=b=H.getUShort(d,12);for(var e=[],f=44,h=0;h<c;h+=1){var k=H.getTag(d,f),l=H.getULong(d,f+4),n=H.getULong(d,f+8),m=H.getULong(d,f+12);e.push({tag:k,offset:l,compression:n<m?"WOFF":!1,compressedLength:n,length:m});f+=20}c=e}else throw Error("Unsupported OpenType signature "+b);for(e=0;e<b;e+=1)switch(f=c[e],f.tag){case "cmap":h=U(d,f);a.tables.cmap=pc.parse(h.data,h.offset);a.encoding=new pb(a.tables.cmap);
break;case "cvt ":h=U(d,f);h=new H.Parser(h.data,h.offset);a.tables.cvt=h.parseShortList(f.length/2);break;case "fvar":var w=f;break;case "fpgm":h=U(d,f);h=new H.Parser(h.data,h.offset);a.tables.fpgm=h.parseByteList(f.length);break;case "head":h=U(d,f);a.tables.head=qc.parse(h.data,h.offset);a.unitsPerEm=a.tables.head.unitsPerEm;var p=a.tables.head.indexToLocFormat;break;case "hhea":h=U(d,f);a.tables.hhea=rc.parse(h.data,h.offset);a.ascender=a.tables.hhea.ascender;a.descender=a.tables.hhea.descender;
a.numberOfHMetrics=a.tables.hhea.numberOfHMetrics;break;case "hmtx":var r=f;break;case "ltag":h=U(d,f);var u=sc.parse(h.data,h.offset);break;case "maxp":h=U(d,f);a.tables.maxp=tc.parse(h.data,h.offset);a.numGlyphs=a.tables.maxp.numGlyphs;break;case "name":var q=f;break;case "OS/2":h=U(d,f);a.tables.os2=mb.parse(h.data,h.offset);break;case "post":h=U(d,f);a.tables.post=uc.parse(h.data,h.offset);a.glyphNames=new Ta(a.tables.post);break;case "prep":h=U(d,f);h=new H.Parser(h.data,h.offset);a.tables.prep=
h.parseByteList(f.length);break;case "glyf":var v=f;break;case "loca":var x=f;break;case "CFF ":var P=f;break;case "kern":var Q=f;break;case "GPOS":var N=f;break;case "GSUB":var C=f;break;case "meta":var G=f}q=U(d,q);a.tables.name=vc.parse(q.data,q.offset,u);a.names=a.tables.name;if(v&&x)p=0===p,x=U(d,x),x=fd.parse(x.data,x.offset,a.numGlyphs,p),v=U(d,v),a.glyphs=Nb.parse(v.data,v.offset,x,a);else if(P)v=U(d,P),wc.parse(v.data,v.offset,a);else throw Error("Font doesn't contain TrueType or CFF outlines.");
r=U(d,r);xc.parse(r.data,r.offset,a.numberOfHMetrics,a.numGlyphs,a.glyphs);v=a.tables.cmap.glyphIndexMap;x=Object.keys(v);for(p=0;p<x.length;p+=1)u=x[p],r=a.glyphs.get(v[u]),r.addUnicode(parseInt(u));for(v=0;v<a.glyphs.length;v+=1)r=a.glyphs.get(v),a.cffEncoding?r.name=a.isCIDFont?"gid"+v:a.cffEncoding.charset[v]:a.glyphNames.names&&(r.name=a.glyphNames.glyphIndexToName(v));Q?(Q=U(d,Q),a.kerningPairs=gd.parse(Q.data,Q.offset)):a.kerningPairs={};N&&(N=U(d,N),a.tables.gpos=hd.parse(N.data,N.offset),
a.position.init());C&&(C=U(d,C),a.tables.gsub=yc.parse(C.data,C.offset));w&&(w=U(d,w),a.tables.fvar=id.parse(w.data,w.offset,a.names));G&&(G=U(d,G),a.tables.meta=zc.parse(G.data,G.offset),a.metas=a.tables.meta);return a}String.prototype.codePointAt||function(){var d=function(){try{var d={},a=Object.defineProperty,g=a(d,d,d)&&a}catch(S){}return g}(),a=function(d){if(null==this)throw TypeError();var a=String(this),g=a.length,b=d?Number(d):0;b!=b&&(b=0);if(!(0>b||b>=g))return d=a.charCodeAt(b),55296<=
d&&56319>=d&&g>b+1&&(a=a.charCodeAt(b+1),56320<=a&&57343>=a)?1024*(d-55296)+a-56320+65536:d};d?d(String.prototype,"codePointAt",{value:a,configurable:!0,writable:!0}):String.prototype.codePointAt=a}();var mc=new b,nc=new b,Xa=new Uint8Array(30),Ya=new Uint16Array(30),sb=new Uint8Array(30),tb=new Uint16Array(30),ed=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oc=new b,ha=new Uint8Array(320),rb=new Uint16Array(16);(function(d,a){var g;for(g=0;7>g;++g)d.table[g]=0;d.table[7]=24;d.table[8]=
152;d.table[9]=112;for(g=0;24>g;++g)d.trans[g]=256+g;for(g=0;144>g;++g)d.trans[24+g]=g;for(g=0;8>g;++g)d.trans[168+g]=280+g;for(g=0;112>g;++g)d.trans[176+g]=144+g;for(g=0;5>g;++g)a.table[g]=0;a.table[5]=32;for(g=0;32>g;++g)a.trans[g]=g})(mc,nc);e(Xa,Ya,4,3);e(sb,tb,2,1);Xa[28]=0;Ya[28]=258;v.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};v.prototype.addPoint=function(d,a){if("number"===typeof d){if(isNaN(this.x1)||isNaN(this.x2))this.x2=this.x1=
d;d<this.x1&&(this.x1=d);d>this.x2&&(this.x2=d)}if("number"===typeof a){if(isNaN(this.y1)||isNaN(this.y2))this.y2=this.y1=a;a<this.y1&&(this.y1=a);a>this.y2&&(this.y2=a)}};v.prototype.addX=function(d){this.addPoint(d,null)};v.prototype.addY=function(d){this.addPoint(null,d)};v.prototype.addBezier=function(d,a,b,c,e,f,h,k){var g=[d,a];b=[b,c];e=[e,f];f=[h,k];this.addPoint(d,a);this.addPoint(h,k);for(d=0;1>=d;d++)a=6*g[d]-12*b[d]+6*e[d],h=-3*g[d]+9*b[d]-9*e[d]+3*f[d],k=3*b[d]-3*g[d],0===h?0!==a&&(a=
-k/a,0<a&&1>a&&(0===d&&this.addX(n(g[d],b[d],e[d],f[d],a)),1===d&&this.addY(n(g[d],b[d],e[d],f[d],a)))):(k=Math.pow(a,2)-4*k*h,0>k||(c=(-a+Math.sqrt(k))/(2*h),0<c&&1>c&&(0===d&&this.addX(n(g[d],b[d],e[d],f[d],c)),1===d&&this.addY(n(g[d],b[d],e[d],f[d],c))),a=(-a-Math.sqrt(k))/(2*h),0<a&&1>a&&(0===d&&this.addX(n(g[d],b[d],e[d],f[d],a)),1===d&&this.addY(n(g[d],b[d],e[d],f[d],a)))))};v.prototype.addQuad=function(d,a,b,c,e,f){b=d+2/3*(b-d);c=a+2/3*(c-a);this.addBezier(d,a,b,c,b+1/3*(e-d),c+1/3*(f-a),
e,f)};q.prototype.moveTo=function(d,a){this.commands.push({type:"M",x:d,y:a})};q.prototype.lineTo=function(d,a){this.commands.push({type:"L",x:d,y:a})};q.prototype.curveTo=q.prototype.bezierCurveTo=function(d,a,b,c,e,f){this.commands.push({type:"C",x1:d,y1:a,x2:b,y2:c,x:e,y:f})};q.prototype.quadTo=q.prototype.quadraticCurveTo=function(d,a,b,c){this.commands.push({type:"Q",x1:d,y1:a,x:b,y:c})};q.prototype.close=q.prototype.closePath=function(){this.commands.push({type:"Z"})};q.prototype.extend=function(d){if(d.commands)d=
d.commands;else if(d instanceof v){this.moveTo(d.x1,d.y1);this.lineTo(d.x2,d.y1);this.lineTo(d.x2,d.y2);this.lineTo(d.x1,d.y2);this.close();return}Array.prototype.push.apply(this.commands,d)};q.prototype.getBoundingBox=function(){for(var d=new v,a=0,b=0,c=0,e=0,f=0;f<this.commands.length;f++){var h=this.commands[f];switch(h.type){case "M":d.addPoint(h.x,h.y);a=c=h.x;b=e=h.y;break;case "L":d.addPoint(h.x,h.y);c=h.x;e=h.y;break;case "Q":d.addQuad(c,e,h.x1,h.y1,h.x,h.y);c=h.x;e=h.y;break;case "C":d.addBezier(c,
e,h.x1,h.y1,h.x2,h.y2,h.x,h.y);c=h.x;e=h.y;break;case "Z":c=a;e=b;break;default:throw Error("Unexpected path command "+h.type);}}d.isEmpty()&&d.addPoint(0,0);return d};q.prototype.draw=function(d){d.beginPath();for(var a=0;a<this.commands.length;a+=1){var b=this.commands[a];"M"===b.type?d.moveTo(b.x,b.y):"L"===b.type?d.lineTo(b.x,b.y):"C"===b.type?d.bezierCurveTo(b.x1,b.y1,b.x2,b.y2,b.x,b.y):"Q"===b.type?d.quadraticCurveTo(b.x1,b.y1,b.x,b.y):"Z"===b.type&&d.closePath()}this.fill&&(d.fillStyle=this.fill,
d.fill());this.stroke&&(d.strokeStyle=this.stroke,d.lineWidth=this.strokeWidth,d.stroke())};q.prototype.toPathData=function(d){function a(){for(var a=arguments,g="",b=0;b<arguments.length;b+=1){var c=a[b];0<=c&&0<b&&(g+=" ");c=Math.round(c)===c?""+Math.round(c):c.toFixed(d);g+=c}return g}d=void 0!==d?d:2;for(var b="",c=0;c<this.commands.length;c+=1){var e=this.commands[c];"M"===e.type?b+="M"+a(e.x,e.y):"L"===e.type?b+="L"+a(e.x,e.y):"C"===e.type?b+="C"+a(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type?
b+="Q"+a(e.x1,e.y1,e.x,e.y):"Z"===e.type&&(b+="Z")}return b};q.prototype.toSVG=function(d){d='<path d="'+this.toPathData(d);d+='"';this.fill&&"black"!==this.fill&&(d=null===this.fill?d+' fill="none"':d+(' fill="'+this.fill+'"'));this.stroke&&(d+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"');return d+"/>"};q.prototype.toDOMElement=function(d){d=this.toPathData(d);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",d);return a};var M={fail:F,argument:A,
assert:A},ya={},D={},L={};D.BYTE=function(d){M.argument(0<=d&&255>=d,"Byte value should be between 0 and 255.");return[d]};L.BYTE=x(1);D.CHAR=function(d){return[d.charCodeAt(0)]};L.CHAR=x(1);D.CHARARRAY=function(d){for(var a=[],b=0;b<d.length;b+=1)a[b]=d.charCodeAt(b);return a};L.CHARARRAY=function(d){return d.length};D.USHORT=function(d){return[d>>8&255,d&255]};L.USHORT=x(2);D.SHORT=function(d){32768<=d&&(d=-(65536-d));return[d>>8&255,d&255]};L.SHORT=x(2);D.UINT24=function(d){return[d>>16&255,d>>
8&255,d&255]};L.UINT24=x(3);D.ULONG=function(d){return[d>>24&255,d>>16&255,d>>8&255,d&255]};L.ULONG=x(4);D.LONG=function(d){2147483648<=d&&(d=-(4294967296-d));return[d>>24&255,d>>16&255,d>>8&255,d&255]};L.LONG=x(4);D.FIXED=D.ULONG;L.FIXED=L.ULONG;D.FWORD=D.SHORT;L.FWORD=L.SHORT;D.UFWORD=D.USHORT;L.UFWORD=L.USHORT;D.LONGDATETIME=function(d){return[0,0,0,0,d>>24&255,d>>16&255,d>>8&255,d&255]};L.LONGDATETIME=x(8);D.TAG=function(d){M.argument(4===d.length,"Tag should be exactly 4 ASCII characters.");
return[d.charCodeAt(0),d.charCodeAt(1),d.charCodeAt(2),d.charCodeAt(3)]};L.TAG=x(4);D.Card8=D.BYTE;L.Card8=L.BYTE;D.Card16=D.USHORT;L.Card16=L.USHORT;D.OffSize=D.BYTE;L.OffSize=L.BYTE;D.SID=D.USHORT;L.SID=L.USHORT;D.NUMBER=function(d){return-107<=d&&107>=d?[d+139]:108<=d&&1131>=d?(d-=108,[(d>>8)+247,d&255]):-1131<=d&&-108>=d?(d=-d-108,[(d>>8)+251,d&255]):-32768<=d&&32767>=d?D.NUMBER16(d):D.NUMBER32(d)};L.NUMBER=function(d){return D.NUMBER(d).length};D.NUMBER16=function(d){return[28,d>>8&255,d&255]};
L.NUMBER16=x(3);D.NUMBER32=function(d){return[29,d>>24&255,d>>16&255,d>>8&255,d&255]};L.NUMBER32=x(5);D.REAL=function(d){var a=d.toString(),b=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(a);b&&(a=parseFloat("1e"+((b[2]?+b[2]:0)+b[1].length)),a=(Math.round(d*a)/a).toString());d="";b=0;for(var c=a.length;b<c;b+=1){var e=a[b];d="e"===e?d+("-"===a[++b]?"c":"b"):"."===e?d+"a":"-"===e?d+"e":d+e}d+=d.length&1?"f":"ff";a=[30];b=0;for(c=d.length;b<c;b+=2)a.push(parseInt(d.substr(b,2),16));return a};
L.REAL=function(d){return D.REAL(d).length};D.NAME=D.CHARARRAY;L.NAME=L.CHARARRAY;D.STRING=D.CHARARRAY;L.STRING=L.CHARARRAY;ya.UTF8=function(d,a,b){for(var g=[],c=0;c<b;c++,a+=1)g[c]=d.getUint8(a);return String.fromCharCode.apply(null,g)};ya.UTF16=function(d,a,b){var g=[];b/=2;for(var c=0;c<b;c++,a+=2)g[c]=d.getUint16(a);return String.fromCharCode.apply(null,g)};D.UTF16=function(d){for(var a=[],b=0;b<d.length;b+=1){var c=d.charCodeAt(b);a[a.length]=c>>8&255;a[a.length]=c&255}return a};L.UTF16=function(d){return 2*
d.length};var nb={"x-mac-croatian":"\u00c4\u00c5\u00c7\u00c9\u00d1\u00d6\u00dc\u00e1\u00e0\u00e2\u00e4\u00e3\u00e5\u00e7\u00e9\u00e8\u00ea\u00eb\u00ed\u00ec\u00ee\u00ef\u00f1\u00f3\u00f2\u00f4\u00f6\u00f5\u00fa\u00f9\u00fb\u00fc\u2020\u00b0\u00a2\u00a3\u00a7\u2022\u00b6\u00df\u00ae\u0160\u2122\u00b4\u00a8\u2260\u017d\u00d8\u221e\u00b1\u2264\u2265\u2206\u00b5\u2202\u2211\u220f\u0161\u222b\u00aa\u00ba\u03a9\u017e\u00f8\u00bf\u00a1\u00ac\u221a\u0192\u2248\u0106\u00ab\u010c\u2026 \u00c0\u00c3\u00d5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\u00f7\u25ca\uf8ff\u00a9\u2044\u20ac\u2039\u203a\u00c6\u00bb\u2013\u00b7\u201a\u201e\u2030\u00c2\u0107\u00c1\u010d\u00c8\u00cd\u00ce\u00cf\u00cc\u00d3\u00d4\u0111\u00d2\u00da\u00db\u00d9\u0131\u02c6\u02dc\u00af\u03c0\u00cb\u02da\u00b8\u00ca\u00e6\u02c7",
"x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\u00b0\u0490\u00a3\u00a7\u2022\u00b6\u0406\u00ae\u00a9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\u00b1\u2264\u2265\u0456\u00b5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\u00ac\u221a\u0192\u2248\u2206\u00ab\u00bb\u2026 \u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\u00f7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e",
"x-mac-gaelic":"\u00c4\u00c5\u00c7\u00c9\u00d1\u00d6\u00dc\u00e1\u00e0\u00e2\u00e4\u00e3\u00e5\u00e7\u00e9\u00e8\u00ea\u00eb\u00ed\u00ec\u00ee\u00ef\u00f1\u00f3\u00f2\u00f4\u00f6\u00f5\u00fa\u00f9\u00fb\u00fc\u2020\u00b0\u00a2\u00a3\u00a7\u2022\u00b6\u00df\u00ae\u00a9\u2122\u00b4\u00a8\u2260\u00c6\u00d8\u1e02\u00b1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\u00e6\u00f8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\u00ab\u00bb\u2026 \u00c0\u00c3\u00d5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\u00ff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\u00b7\u1ef2\u1ef3\u204a\u00c2\u00ca\u00c1\u00cb\u00c8\u00cd\u00ce\u00cf\u00cc\u00d3\u00d4\u2663\u00d2\u00da\u00db\u00d9\u0131\u00dd\u00fd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83",
"x-mac-greek":"\u00c4\u00b9\u00b2\u00c9\u00b3\u00d6\u00dc\u0385\u00e0\u00e2\u00e4\u0384\u00a8\u00e7\u00e9\u00e8\u00ea\u00eb\u00a3\u2122\u00ee\u00ef\u2022\u00bd\u2030\u00f4\u00f6\u00a6\u20ac\u00f9\u00fb\u00fc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\u00df\u00ae\u00a9\u03a3\u03aa\u00a7\u2260\u00b0\u00b7\u0391\u00b1\u2264\u2265\u00a5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\u00ac\u039f\u03a1\u2248\u03a4\u00ab\u00bb\u2026 \u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\u00f7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\u00ad",
"x-mac-icelandic":"\u00c4\u00c5\u00c7\u00c9\u00d1\u00d6\u00dc\u00e1\u00e0\u00e2\u00e4\u00e3\u00e5\u00e7\u00e9\u00e8\u00ea\u00eb\u00ed\u00ec\u00ee\u00ef\u00f1\u00f3\u00f2\u00f4\u00f6\u00f5\u00fa\u00f9\u00fb\u00fc\u00dd\u00b0\u00a2\u00a3\u00a7\u2022\u00b6\u00df\u00ae\u00a9\u2122\u00b4\u00a8\u2260\u00c6\u00d8\u221e\u00b1\u2264\u2265\u00a5\u00b5\u2202\u2211\u220f\u03c0\u222b\u00aa\u00ba\u03a9\u00e6\u00f8\u00bf\u00a1\u00ac\u221a\u0192\u2248\u2206\u00ab\u00bb\u2026 \u00c0\u00c3\u00d5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u00f7\u25ca\u00ff\u0178\u2044\u20ac\u00d0\u00f0\u00de\u00fe\u00fd\u00b7\u201a\u201e\u2030\u00c2\u00ca\u00c1\u00cb\u00c8\u00cd\u00ce\u00cf\u00cc\u00d3\u00d4\uf8ff\u00d2\u00da\u00db\u00d9\u0131\u02c6\u02dc\u00af\u02d8\u02d9\u02da\u00b8\u02dd\u02db\u02c7",
"x-mac-inuit":"\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\u00b0\u14a1\u14a5\u14a6\u2022\u00b6\u14a7\u00ae\u00a9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026 \u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142",
"x-mac-ce":"\u00c4\u0100\u0101\u00c9\u0104\u00d6\u00dc\u00e1\u0105\u010c\u00e4\u010d\u0106\u0107\u00e9\u0179\u017a\u010e\u00ed\u010f\u0112\u0113\u0116\u00f3\u0117\u00f4\u00f6\u00f5\u00fa\u011a\u011b\u00fc\u2020\u00b0\u0118\u00a3\u00a7\u2022\u00b6\u00df\u00ae\u00a9\u2122\u0119\u00a8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\u00ac\u221a\u0144\u0147\u2206\u00ab\u00bb\u2026 \u0148\u0150\u00d5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\u00f7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\u00c1\u0164\u0165\u00cd\u017d\u017e\u016a\u00d3\u00d4\u016b\u016e\u00da\u016f\u0170\u0171\u0172\u0173\u00dd\u00fd\u0137\u017b\u0141\u017c\u0122\u02c7",
macintosh:"\u00c4\u00c5\u00c7\u00c9\u00d1\u00d6\u00dc\u00e1\u00e0\u00e2\u00e4\u00e3\u00e5\u00e7\u00e9\u00e8\u00ea\u00eb\u00ed\u00ec\u00ee\u00ef\u00f1\u00f3\u00f2\u00f4\u00f6\u00f5\u00fa\u00f9\u00fb\u00fc\u2020\u00b0\u00a2\u00a3\u00a7\u2022\u00b6\u00df\u00ae\u00a9\u2122\u00b4\u00a8\u2260\u00c6\u00d8\u221e\u00b1\u2264\u2265\u00a5\u00b5\u2202\u2211\u220f\u03c0\u222b\u00aa\u00ba\u03a9\u00e6\u00f8\u00bf\u00a1\u00ac\u221a\u0192\u2248\u2206\u00ab\u00bb\u2026 \u00c0\u00c3\u00d5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u00f7\u25ca\u00ff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\u00b7\u201a\u201e\u2030\u00c2\u00ca\u00c1\u00cb\u00c8\u00cd\u00ce\u00cf\u00cc\u00d3\u00d4\uf8ff\u00d2\u00da\u00db\u00d9\u0131\u02c6\u02dc\u00af\u02d8\u02d9\u02da\u00b8\u02dd\u02db\u02c7",
"x-mac-romanian":"\u00c4\u00c5\u00c7\u00c9\u00d1\u00d6\u00dc\u00e1\u00e0\u00e2\u00e4\u00e3\u00e5\u00e7\u00e9\u00e8\u00ea\u00eb\u00ed\u00ec\u00ee\u00ef\u00f1\u00f3\u00f2\u00f4\u00f6\u00f5\u00fa\u00f9\u00fb\u00fc\u2020\u00b0\u00a2\u00a3\u00a7\u2022\u00b6\u00df\u00ae\u00a9\u2122\u00b4\u00a8\u2260\u0102\u0218\u221e\u00b1\u2264\u2265\u00a5\u00b5\u2202\u2211\u220f\u03c0\u222b\u00aa\u00ba\u03a9\u0103\u0219\u00bf\u00a1\u00ac\u221a\u0192\u2248\u2206\u00ab\u00bb\u2026 \u00c0\u00c3\u00d5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u00f7\u25ca\u00ff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\u00b7\u201a\u201e\u2030\u00c2\u00ca\u00c1\u00cb\u00c8\u00cd\u00ce\u00cf\u00cc\u00d3\u00d4\uf8ff\u00d2\u00da\u00db\u00d9\u0131\u02c6\u02dc\u00af\u02d8\u02d9\u02da\u00b8\u02dd\u02db\u02c7",
"x-mac-turkish":"\u00c4\u00c5\u00c7\u00c9\u00d1\u00d6\u00dc\u00e1\u00e0\u00e2\u00e4\u00e3\u00e5\u00e7\u00e9\u00e8\u00ea\u00eb\u00ed\u00ec\u00ee\u00ef\u00f1\u00f3\u00f2\u00f4\u00f6\u00f5\u00fa\u00f9\u00fb\u00fc\u2020\u00b0\u00a2\u00a3\u00a7\u2022\u00b6\u00df\u00ae\u00a9\u2122\u00b4\u00a8\u2260\u00c6\u00d8\u221e\u00b1\u2264\u2265\u00a5\u00b5\u2202\u2211\u220f\u03c0\u222b\u00aa\u00ba\u03a9\u00e6\u00f8\u00bf\u00a1\u00ac\u221a\u0192\u2248\u2206\u00ab\u00bb\u2026 \u00c0\u00c3\u00d5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u00f7\u25ca\u00ff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\u00b7\u201a\u201e\u2030\u00c2\u00ca\u00c1\u00cb\u00c8\u00cd\u00ce\u00cf\u00cc\u00d3\u00d4\uf8ff\u00d2\u00da\u00db\u00d9\uf8a0\u02c6\u02dc\u00af\u02d8\u02d9\u02da\u00b8\u02dd\u02db\u02c7"};
ya.MACSTRING=function(d,a,b,c){c=nb[c];if(void 0!==c){for(var g="",t=0;t<b;t++){var e=d.getUint8(a+t);g=127>=e?g+String.fromCharCode(e):g+c[e&127]}return g}};var Pa="function"===typeof WeakMap&&new WeakMap,Qa;D.MACSTRING=function(d,a){a:{if(!Qa)for(g in Qa={},nb)Qa[g]=new String(g);var g=Qa[a];if(void 0!==g){if(Pa){var b=Pa.get(g);if(void 0!==b){g=b;break a}}a=nb[a];if(void 0!==a){b={};for(var c=0;c<a.length;c++)b[a.charCodeAt(c)]=c+128;Pa&&Pa.set(g,b);g=b;break a}}g=void 0}if(void 0!==g){a=[];for(b=
0;b<d.length;b++){c=d.charCodeAt(b);if(128<=c&&(c=g[c],void 0===c))return;a[b]=c}return a}};L.MACSTRING=function(d,a){d=D.MACSTRING(d,a);return void 0!==d?d.length:0};D.VARDELTAS=function(d){for(var a=0,b=[];a<d.length;){var c=d[a];if(0===c){c=a;a=0;for(var e=d.length;c<e&&64>a&&0===d[c];)++c,++a;b.push(128|a-1);a=c}else if(-128<=c&&127>=c){c=d;var f=a;a=b;var h=0,k=c.length;for(e=f;e<k&&64>h;){var l=c[e];if(!(-128<=l&&127>=l))break;if(0===l&&e+1<k&&0===c[e+1])break;++e;++h}for(a.push(h-1);f<e;++f)a.push(c[f]+
256&255);a=e}else{c=d;f=a;a=b;h=0;k=c.length;for(e=f;e<k&&64>h;){l=c[e];if(0===l)break;if(l=-128<=l&&127>=l&&e+1<k)l=c[e+1],l=-128<=l&&127>=l;if(l)break;++e;++h}for(a.push(64|h-1);f<e;++f)h=c[f],a.push(h+65536>>8&255,h+256&255);a=e}}return b};D.INDEX=function(d){for(var a=1,b=[a],c=[],e=0;e<d.length;e+=1){var f=D.OBJECT(d[e]);Array.prototype.push.apply(c,f);a+=f.length;b.push(a)}if(0===c.length)return[0,0];e=[];a=1+Math.floor(Math.log(a)/Math.log(2))/8|0;f=[void 0,D.BYTE,D.USHORT,D.UINT24,D.ULONG][a];
for(var h=0;h<b.length;h+=1){var k=f(b[h]);Array.prototype.push.apply(e,k)}return Array.prototype.concat(D.Card16(d.length),D.OffSize(a),e,c)};L.INDEX=function(d){return D.INDEX(d).length};D.DICT=function(d){for(var a=[],b=Object.keys(d),c=b.length,e=0;e<c;e+=1){var f=parseInt(b[e],0),h=d[f];a=a.concat(D.OPERAND(h.value,h.type));a=a.concat(D.OPERATOR(f))}return a};L.DICT=function(d){return D.DICT(d).length};D.OPERATOR=function(d){return 1200>d?[d]:[12,d-1200]};D.OPERAND=function(d,a){var b=[];if(Array.isArray(a))for(var g=
0;g<a.length;g+=1)M.argument(d.length===a.length,"Not enough arguments given for type"+a),b=b.concat(D.OPERAND(d[g],a[g]));else if("SID"===a)b=b.concat(D.NUMBER(d));else if("offset"===a)b=b.concat(D.NUMBER32(d));else if("number"===a)b=b.concat(D.NUMBER(d));else if("real"===a)b=b.concat(D.REAL(d));else throw Error("Unknown operand type "+a);return b};D.OP=D.BYTE;L.OP=L.BYTE;var Ra="function"===typeof WeakMap&&new WeakMap;D.CHARSTRING=function(d){if(Ra){var a=Ra.get(d);if(void 0!==a)return a}a=[];for(var b=
d.length,c=0;c<b;c+=1){var e=d[c];a=a.concat(D[e.type](e.value))}Ra&&Ra.set(d,a);return a};L.CHARSTRING=function(d){return D.CHARSTRING(d).length};D.OBJECT=function(d){var a=D[d.type];M.argument(void 0!==a,"No encoding function for type "+d.type);return a(d.value)};L.OBJECT=function(d){var a=L[d.type];M.argument(void 0!==a,"No sizeOf function for type "+d.type);return a(d.value)};D.TABLE=function(d){for(var a=[],b=d.fields.length,c=[],e=[],f=0;f<b;f+=1){var h=d.fields[f],k=D[h.type];M.argument(void 0!==
k,"No encoding function for field type "+h.type+" ("+h.name+")");var l=d[h.name];void 0===l&&(l=h.value);k=k(l);"TABLE"===h.type?(e.push(a.length),a=a.concat([0,0]),c.push(k)):a=a.concat(k)}for(b=0;b<c.length;b+=1)f=e[b],h=a.length,M.argument(65536>h,"Table "+d.tableName+" too big."),a[f]=h>>8,a[f+1]=h&255,a=a.concat(c[b]);return a};L.TABLE=function(d){for(var a=0,b=d.fields.length,c=0;c<b;c+=1){var e=d.fields[c],f=L[e.type];M.argument(void 0!==f,"No sizeOf function for field type "+e.type+" ("+e.name+
")");var h=d[e.name];void 0===h&&(h=e.value);a+=f(h);"TABLE"===e.type&&(a+=2)}return a};D.RECORD=D.TABLE;L.RECORD=L.TABLE;D.LITERAL=function(d){return d};L.LITERAL=function(d){return d.length};u.prototype.encode=function(){return D.TABLE(this)};u.prototype.sizeOf=function(){return L.TABLE(this)};B.prototype=Object.create(u.prototype);B.prototype.constructor=B;z.prototype=Object.create(u.prototype);z.prototype.constructor=z;w.prototype=Object.create(u.prototype);w.prototype.constructor=w;P.prototype=
Object.create(u.prototype);P.prototype.constructor=P;var J={Table:u,Record:u,Coverage:B,ScriptList:z,FeatureList:w,LookupList:P,ushortList:C,tableList:y,recordList:K},jd={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};l.prototype.parseByte=function(){var d=this.data.getUint8(this.offset+this.relativeOffset);this.relativeOffset+=1;return d};l.prototype.parseChar=function(){var d=this.data.getInt8(this.offset+this.relativeOffset);this.relativeOffset+=1;return d};l.prototype.parseCard8=
l.prototype.parseByte;l.prototype.parseUShort=function(){var d=this.data.getUint16(this.offset+this.relativeOffset);this.relativeOffset+=2;return d};l.prototype.parseCard16=l.prototype.parseUShort;l.prototype.parseSID=l.prototype.parseUShort;l.prototype.parseOffset16=l.prototype.parseUShort;l.prototype.parseShort=function(){var d=this.data.getInt16(this.offset+this.relativeOffset);this.relativeOffset+=2;return d};l.prototype.parseF2Dot14=function(){var d=this.data.getInt16(this.offset+this.relativeOffset)/
16384;this.relativeOffset+=2;return d};l.prototype.parseULong=function(){var d=la(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return d};l.prototype.parseOffset32=l.prototype.parseULong;l.prototype.parseFixed=function(){var d=sa(this.data,this.offset+this.relativeOffset);this.relativeOffset+=4;return d};l.prototype.parseString=function(d){var a=this.data,b=this.offset+this.relativeOffset,c="";this.relativeOffset+=d;for(var e=0;e<d;e++)c+=String.fromCharCode(a.getUint8(b+e));return c};
l.prototype.parseTag=function(){return this.parseString(4)};l.prototype.parseLongDateTime=function(){var d=la(this.data,this.offset+this.relativeOffset+4);this.relativeOffset+=8;return d-2082844800};l.prototype.parseVersion=function(d){var a=X(this.data,this.offset+this.relativeOffset),b=X(this.data,this.offset+this.relativeOffset+2);this.relativeOffset+=4;void 0===d&&(d=4096);return a+b/d/10};l.prototype.skip=function(d,a){void 0===a&&(a=1);this.relativeOffset+=jd[d]*a};l.prototype.parseULongList=
function(d){void 0===d&&(d=this.parseULong());for(var a=Array(d),b=this.data,c=this.offset+this.relativeOffset,e=0;e<d;e++)a[e]=b.getUint32(c),c+=4;this.relativeOffset+=4*d;return a};l.prototype.parseOffset16List=l.prototype.parseUShortList=function(d){void 0===d&&(d=this.parseUShort());for(var a=Array(d),b=this.data,c=this.offset+this.relativeOffset,e=0;e<d;e++)a[e]=b.getUint16(c),c+=2;this.relativeOffset+=2*d;return a};l.prototype.parseShortList=function(d){for(var a=Array(d),b=this.data,c=this.offset+
this.relativeOffset,e=0;e<d;e++)a[e]=b.getInt16(c),c+=2;this.relativeOffset+=2*d;return a};l.prototype.parseByteList=function(d){for(var a=Array(d),b=this.data,c=this.offset+this.relativeOffset,e=0;e<d;e++)a[e]=b.getUint8(c++);this.relativeOffset+=d;return a};l.prototype.parseList=function(d,a){a||(a=d,d=this.parseUShort());for(var b=Array(d),g=0;g<d;g++)b[g]=a.call(this);return b};l.prototype.parseList32=function(d,a){a||(a=d,d=this.parseULong());for(var b=Array(d),g=0;g<d;g++)b[g]=a.call(this);
return b};l.prototype.parseRecordList=function(d,a){a||(a=d,d=this.parseUShort());for(var b=Array(d),g=Object.keys(a),c=0;c<d;c++){for(var e={},f=0;f<g.length;f++){var h=g[f];e[h]=a[h].call(this)}b[c]=e}return b};l.prototype.parseRecordList32=function(d,a){a||(a=d,d=this.parseULong());for(var b=Array(d),g=Object.keys(a),c=0;c<d;c++){for(var e={},f=0;f<g.length;f++){var h=g[f];e[h]=a[h].call(this)}b[c]=e}return b};l.prototype.parseStruct=function(d){if("function"===typeof d)return d.call(this);for(var a=
Object.keys(d),b={},c=0;c<a.length;c++){var e=a[c];b[e]=d[e].call(this)}return b};l.prototype.parseValueRecord=function(d){void 0===d&&(d=this.parseUShort());if(0!==d){var a={};d&1&&(a.xPlacement=this.parseShort());d&2&&(a.yPlacement=this.parseShort());d&4&&(a.xAdvance=this.parseShort());d&8&&(a.yAdvance=this.parseShort());d&16&&(a.xPlaDevice=void 0,this.parseShort());d&32&&(a.yPlaDevice=void 0,this.parseShort());d&64&&(a.xAdvDevice=void 0,this.parseShort());d&128&&(a.yAdvDevice=void 0,this.parseShort());
return a}};l.prototype.parseValueRecordList=function(){for(var d=this.parseUShort(),a=this.parseUShort(),b=Array(a),c=0;c<a;c++)b[c]=this.parseValueRecord(d);return b};l.prototype.parsePointer=function(d){var a=this.parseOffset16();if(0<a)return(new l(this.data,this.offset+a)).parseStruct(d)};l.prototype.parsePointer32=function(d){var a=this.parseOffset32();if(0<a)return(new l(this.data,this.offset+a)).parseStruct(d)};l.prototype.parseListOfLists=function(d){for(var a=this.parseOffset16List(),b=a.length,
c=this.relativeOffset,e=Array(b),f=0;f<b;f++){var h=a[f];if(0===h)e[f]=void 0;else if(this.relativeOffset=h,d){for(var k=this.parseOffset16List(),l=Array(k.length),n=0;n<k.length;n++)this.relativeOffset=h+k[n],l[n]=d.call(this);e[f]=l}else e[f]=this.parseUShortList()}this.relativeOffset=c;return e};l.prototype.parseCoverage=function(){var d=this.offset+this.relativeOffset,a=this.parseUShort(),b=this.parseUShort();if(1===a)return{format:1,glyphs:this.parseUShortList(b)};if(2===a){d=Array(b);for(a=
0;a<b;a++)d[a]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:d}}throw Error("0x"+d.toString(16)+": Coverage format must be 1 or 2.");};l.prototype.parseClassDef=function(){var d=this.offset+this.relativeOffset,a=this.parseUShort();if(1===a)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===a)return{format:2,ranges:this.parseRecordList({start:l.uShort,end:l.uShort,classId:l.uShort})};throw Error("0x"+d.toString(16)+
": ClassDef format must be 1 or 2.");};l.list=function(d,a){return function(){return this.parseList(d,a)}};l.list32=function(d,a){return function(){return this.parseList32(d,a)}};l.recordList=function(d,a){return function(){return this.parseRecordList(d,a)}};l.recordList32=function(d,a){return function(){return this.parseRecordList32(d,a)}};l.pointer=function(d){return function(){return this.parsePointer(d)}};l.pointer32=function(d){return function(){return this.parsePointer32(d)}};l.tag=l.prototype.parseTag;
l.byte=l.prototype.parseByte;l.uShort=l.offset16=l.prototype.parseUShort;l.uShortList=l.prototype.parseUShortList;l.uLong=l.offset32=l.prototype.parseULong;l.uLongList=l.prototype.parseULongList;l.struct=l.prototype.parseStruct;l.coverage=l.prototype.parseCoverage;l.classDef=l.prototype.parseClassDef;var Ac={reserved:l.uShort,reqFeatureIndex:l.uShort,featureIndexes:l.uShortList};l.prototype.parseScriptList=function(){return this.parsePointer(l.recordList({tag:l.tag,script:l.pointer({defaultLangSys:l.pointer(Ac),
langSysRecords:l.recordList({tag:l.tag,langSys:l.pointer(Ac)})})}))||[]};l.prototype.parseFeatureList=function(){return this.parsePointer(l.recordList({tag:l.tag,feature:l.pointer({featureParams:l.offset16,lookupListIndexes:l.uShortList})}))||[]};l.prototype.parseLookupList=function(d){return this.parsePointer(l.list(l.pointer(function(){var a=this.parseUShort();M.argument(1<=a&&9>=a,"GPOS/GSUB lookup type "+a+" unknown.");var b=this.parseUShort(),c=b&16;return{lookupType:a,lookupFlag:b,subtables:this.parseList(l.pointer(d[a])),
markFilteringSet:c?this.parseUShort():void 0}})))||[]};l.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var d=this.parseUShort(),a=this.parseUShort();M.argument(1===d&&1>a,"GPOS/GSUB feature variations table unknown.");return this.parseRecordList32({conditionSetOffset:l.offset32,featureTableSubstitutionOffset:l.offset32})})||[]};var H={getByte:Q,getCard8:Q,getUShort:X,getCard16:X,getShort:function(d,a){return d.getInt16(a,!1)},getULong:la,getFixed:sa,getTag:function(d,
a){for(var b="",g=a;g<a+4;g+=1)b+=String.fromCharCode(d.getInt8(g));return b},getOffset:function(d,a,b){for(var g=0,c=0;c<b;c+=1)g<<=8,g+=d.getUint8(a+c);return g},getBytes:function(d,a,b){for(var g=[];a<b;a+=1)g.push(d.getUint8(a));return g},bytesToString:function(d){for(var a="",b=0;b<d.length;b+=1)a+=String.fromCharCode(d[b]);return a},Parser:l},pc={parse:function(d,a){var b={};b.version=H.getUShort(d,a);M.argument(0===b.version,"cmap table version should be 0.");b.numTables=H.getUShort(d,a+2);
for(var g=-1,c=b.numTables-1;0<=c;--c){var e=H.getUShort(d,a+4+8*c),f=H.getUShort(d,a+4+8*c+2);if(3===e&&(0===f||1===f||10===f)||0===e&&(0===f||1===f||2===f||3===f||4===f)){g=H.getULong(d,a+4+8*c+4);break}}if(-1===g)throw Error("No valid cmap sub-tables found.");c=new H.Parser(d,a+g);b.format=c.parseUShort();if(12===b.format)for(c.parseUShort(),b.length=c.parseULong(),b.language=c.parseULong(),b.groupCount=d=c.parseULong(),b.glyphIndexMap={},g=0;g<d;g+=1)for(a=c.parseULong(),e=c.parseULong(),f=c.parseULong();a<=
e;a+=1)b.glyphIndexMap[a]=f,f++;else if(4===b.format){var h=g;b.length=c.parseUShort();b.language=c.parseUShort();b.segCount=g=c.parseUShort()>>1;c.skip("uShort",3);b.glyphIndexMap={};c=new H.Parser(d,a+h+14);e=new H.Parser(d,a+h+16+2*g);f=new H.Parser(d,a+h+16+4*g);a=new H.Parser(d,a+h+16+6*g);for(h=0;h<g-1;h+=1)for(var k=c.parseUShort(),l=e.parseUShort(),n=f.parseShort(),m=a.parseUShort(),w=l;w<=k;w+=1){if(0!==m){var p=a.offset+a.relativeOffset-2;p+=m;p+=2*(w-l);p=H.getUShort(d,p);0!==p&&(p=p+n&
65535)}else p=w+n&65535;b.glyphIndexMap[w]=p}}else throw Error("Only format 4 and 12 cmap tables are supported (found format "+b.format+").");return b},make:function(d){var a=!0,b;for(b=d.length-1;0<b;--b)if(65535<d.get(b).unicode){console.log("Adding CMAP format 12 (needed!)");a=!1;break}var c=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:a?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:a?
12:20}];a||(c=c.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}]));c=c.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);c=new J.Table("cmap",c);c.segments=
[];for(b=0;b<d.length;b+=1){for(var e=d.get(b),f=0;f<e.unicodes.length;f+=1)G(c,e.unicodes[f],b);c.segments=c.segments.sort(function(d,a){return d.start-a.start})}c.segments.push({end:65535,start:65535,delta:1,offset:0});e=c.segments.length;f=0;var h=[],k=[],l=[],n=[],m=[];d=[];for(b=0;b<e;b+=1){var w=c.segments[b];65535>=w.end&&65535>=w.start?(h=h.concat({name:"end_"+b,type:"USHORT",value:w.end}),k=k.concat({name:"start_"+b,type:"USHORT",value:w.start}),l=l.concat({name:"idDelta_"+b,type:"SHORT",
value:w.delta}),n=n.concat({name:"idRangeOffset_"+b,type:"USHORT",value:w.offset}),void 0!==w.glyphId&&(m=m.concat({name:"glyph_"+b,type:"USHORT",value:w.glyphId}))):f+=1;a||void 0===w.glyphIndex||(d=d.concat({name:"cmap12Start_"+b,type:"ULONG",value:w.start}),d=d.concat({name:"cmap12End_"+b,type:"ULONG",value:w.end}),d=d.concat({name:"cmap12Glyph_"+b,type:"ULONG",value:w.glyphIndex}))}c.segCountX2=2*(e-f);c.searchRange=2*Math.pow(2,Math.floor(Math.log(e-f)/Math.log(2)));c.entrySelector=Math.log(c.searchRange/
2)/Math.log(2);c.rangeShift=c.segCountX2-c.searchRange;c.fields=c.fields.concat(h);c.fields.push({name:"reservedPad",type:"USHORT",value:0});c.fields=c.fields.concat(k);c.fields=c.fields.concat(l);c.fields=c.fields.concat(n);c.fields=c.fields.concat(m);c.cmap4Length=2*h.length+16+2*k.length+2*l.length+2*n.length+2*m.length;a||(a=16+4*d.length,c.cmap12Offset=20+c.cmap4Length,c.fields=c.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",
type:"ULONG",value:a},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:d.length/3}]),c.fields=c.fields.concat(d));return c}},La=".notdef;space;exclam;quotedbl;numbersign;dollar;percent;ampersand;quoteright;parenleft;parenright;asterisk;plus;comma;hyphen;period;slash;zero;one;two;three;four;five;six;seven;eight;nine;colon;semicolon;less;equal;greater;question;at;A;B;C;D;E;F;G;H;I;J;K;L;M;N;O;P;Q;R;S;T;U;V;W;X;Y;Z;bracketleft;backslash;bracketright;asciicircum;underscore;quoteleft;a;b;c;d;e;f;g;h;i;j;k;l;m;n;o;p;q;r;s;t;u;v;w;x;y;z;braceleft;bar;braceright;asciitilde;exclamdown;cent;sterling;fraction;yen;florin;section;currency;quotesingle;quotedblleft;guillemotleft;guilsinglleft;guilsinglright;fi;fl;endash;dagger;daggerdbl;periodcentered;paragraph;bullet;quotesinglbase;quotedblbase;quotedblright;guillemotright;ellipsis;perthousand;questiondown;grave;acute;circumflex;tilde;macron;breve;dotaccent;dieresis;ring;cedilla;hungarumlaut;ogonek;caron;emdash;AE;ordfeminine;Lslash;Oslash;OE;ordmasculine;ae;dotlessi;lslash;oslash;oe;germandbls;onesuperior;logicalnot;mu;trademark;Eth;onehalf;plusminus;Thorn;onequarter;divide;brokenbar;degree;thorn;threequarters;twosuperior;registered;minus;eth;multiply;threesuperior;copyright;Aacute;Acircumflex;Adieresis;Agrave;Aring;Atilde;Ccedilla;Eacute;Ecircumflex;Edieresis;Egrave;Iacute;Icircumflex;Idieresis;Igrave;Ntilde;Oacute;Ocircumflex;Odieresis;Ograve;Otilde;Scaron;Uacute;Ucircumflex;Udieresis;Ugrave;Yacute;Ydieresis;Zcaron;aacute;acircumflex;adieresis;agrave;aring;atilde;ccedilla;eacute;ecircumflex;edieresis;egrave;iacute;icircumflex;idieresis;igrave;ntilde;oacute;ocircumflex;odieresis;ograve;otilde;scaron;uacute;ucircumflex;udieresis;ugrave;yacute;ydieresis;zcaron;exclamsmall;Hungarumlautsmall;dollaroldstyle;dollarsuperior;ampersandsmall;Acutesmall;parenleftsuperior;parenrightsuperior;266 ff;onedotenleader;zerooldstyle;oneoldstyle;twooldstyle;threeoldstyle;fouroldstyle;fiveoldstyle;sixoldstyle;sevenoldstyle;eightoldstyle;nineoldstyle;commasuperior;threequartersemdash;periodsuperior;questionsmall;asuperior;bsuperior;centsuperior;dsuperior;esuperior;isuperior;lsuperior;msuperior;nsuperior;osuperior;rsuperior;ssuperior;tsuperior;ff;ffi;ffl;parenleftinferior;parenrightinferior;Circumflexsmall;hyphensuperior;Gravesmall;Asmall;Bsmall;Csmall;Dsmall;Esmall;Fsmall;Gsmall;Hsmall;Ismall;Jsmall;Ksmall;Lsmall;Msmall;Nsmall;Osmall;Psmall;Qsmall;Rsmall;Ssmall;Tsmall;Usmall;Vsmall;Wsmall;Xsmall;Ysmall;Zsmall;colonmonetary;onefitted;rupiah;Tildesmall;exclamdownsmall;centoldstyle;Lslashsmall;Scaronsmall;Zcaronsmall;Dieresissmall;Brevesmall;Caronsmall;Dotaccentsmall;Macronsmall;figuredash;hypheninferior;Ogoneksmall;Ringsmall;Cedillasmall;questiondownsmall;oneeighth;threeeighths;fiveeighths;seveneighths;onethird;twothirds;zerosuperior;foursuperior;fivesuperior;sixsuperior;sevensuperior;eightsuperior;ninesuperior;zeroinferior;oneinferior;twoinferior;threeinferior;fourinferior;fiveinferior;sixinferior;seveninferior;eightinferior;nineinferior;centinferior;dollarinferior;periodinferior;commainferior;Agravesmall;Aacutesmall;Acircumflexsmall;Atildesmall;Adieresissmall;Aringsmall;AEsmall;Ccedillasmall;Egravesmall;Eacutesmall;Ecircumflexsmall;Edieresissmall;Igravesmall;Iacutesmall;Icircumflexsmall;Idieresissmall;Ethsmall;Ntildesmall;Ogravesmall;Oacutesmall;Ocircumflexsmall;Otildesmall;Odieresissmall;OEsmall;Oslashsmall;Ugravesmall;Uacutesmall;Ucircumflexsmall;Udieresissmall;Yacutesmall;Thornsmall;Ydieresissmall;001.000;001.001;001.002;001.003;Black;Bold;Book;Light;Medium;Regular;Roman;Semibold".split(";"),
kd="                                space exclam quotedbl numbersign dollar percent ampersand quoteright parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore quoteleft a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde                                   exclamdown cent sterling fraction yen florin section currency quotesingle quotedblleft guillemotleft guilsinglleft guilsinglright fi fl  endash dagger daggerdbl periodcentered  paragraph bullet quotesinglbase quotedblbase quotedblright guillemotright ellipsis perthousand  questiondown  grave acute circumflex tilde macron breve dotaccent dieresis  ring cedilla  hungarumlaut ogonek caron emdash                 AE  ordfeminine     Lslash Oslash OE ordmasculine      ae    dotlessi   lslash oslash oe germandbls".split(" "),
ld="                                space exclamsmall Hungarumlautsmall  dollaroldstyle dollarsuperior ampersandsmall Acutesmall parenleftsuperior parenrightsuperior twodotenleader onedotenleader comma hyphen period fraction zerooldstyle oneoldstyle twooldstyle threeoldstyle fouroldstyle fiveoldstyle sixoldstyle sevenoldstyle eightoldstyle nineoldstyle colon semicolon commasuperior threequartersemdash periodsuperior questionsmall  asuperior bsuperior centsuperior dsuperior esuperior   isuperior   lsuperior msuperior nsuperior osuperior   rsuperior ssuperior tsuperior  ff fi fl ffi ffl parenleftinferior  parenrightinferior Circumflexsmall hyphensuperior Gravesmall Asmall Bsmall Csmall Dsmall Esmall Fsmall Gsmall Hsmall Ismall Jsmall Ksmall Lsmall Msmall Nsmall Osmall Psmall Qsmall Rsmall Ssmall Tsmall Usmall Vsmall Wsmall Xsmall Ysmall Zsmall colonmonetary onefitted rupiah Tildesmall                                   exclamdownsmall centoldstyle Lslashsmall   Scaronsmall Zcaronsmall Dieresissmall Brevesmall Caronsmall  Dotaccentsmall   Macronsmall   figuredash hypheninferior   Ogoneksmall Ringsmall Cedillasmall    onequarter onehalf threequarters questiondownsmall oneeighth threeeighths fiveeighths seveneighths onethird twothirds   zerosuperior onesuperior twosuperior threesuperior foursuperior fivesuperior sixsuperior sevensuperior eightsuperior ninesuperior zeroinferior oneinferior twoinferior threeinferior fourinferior fiveinferior sixinferior seveninferior eightinferior nineinferior centinferior dollarinferior periodinferior commainferior Agravesmall Aacutesmall Acircumflexsmall Atildesmall Adieresissmall Aringsmall AEsmall Ccedillasmall Egravesmall Eacutesmall Ecircumflexsmall Edieresissmall Igravesmall Iacutesmall Icircumflexsmall Idieresissmall Ethsmall Ntildesmall Ogravesmall Oacutesmall Ocircumflexsmall Otildesmall Odieresissmall OEsmall Oslashsmall Ugravesmall Uacutesmall Ucircumflexsmall Udieresissmall Yacutesmall Thornsmall Ydieresissmall".split(" "),
ta=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(" ");
N.prototype.charToGlyphIndex=function(d){d=d.codePointAt(0);var a=this.font.glyphs;if(a)for(var b=0;b<a.length;b+=1)for(var c=a.get(b),e=0;e<c.unicodes.length;e+=1)if(c.unicodes[e]===d)return b;return null};pb.prototype.charToGlyphIndex=function(d){return this.cmap.glyphIndexMap[d.codePointAt(0)]||0};Ja.prototype.charToGlyphIndex=function(d){d=d.codePointAt(0);return this.charset.indexOf(this.encoding[d])};Ta.prototype.nameToGlyphIndex=function(d){return this.names.indexOf(d)};Ta.prototype.glyphIndexToName=
function(d){return this.names[d]};var ua={line:function(d,a,b,c,e){d.beginPath();d.moveTo(a,b);d.lineTo(c,e);d.stroke()}};Y.prototype.bindConstructorValues=function(d){this.index=d.index||0;this.name=d.name||null;this.unicode=d.unicode||void 0;this.unicodes=d.unicodes||void 0!==d.unicode?[d.unicode]:[];d.xMin&&(this.xMin=d.xMin);d.yMin&&(this.yMin=d.yMin);d.xMax&&(this.xMax=d.xMax);d.yMax&&(this.yMax=d.yMax);d.advanceWidth&&(this.advanceWidth=d.advanceWidth);Object.defineProperty(this,"path",Gc(this,
d.path))};Y.prototype.addUnicode=function(d){0===this.unicodes.length&&(this.unicode=d);this.unicodes.push(d)};Y.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Y.prototype.getPath=function(d,a,b,c,e){d=void 0!==d?d:0;a=void 0!==a?a:0;b=void 0!==b?b:72;var g;c||(c={});var t=c.xScale,f=c.yScale;c.hinting&&e&&e.hinting&&(g=this.path&&e.hinting.exec(this,b));g?(c=e.hinting.getCommands(g),d=Math.round(d),a=Math.round(a),t=f=1):(c=this.path.commands,b*=1/this.path.unitsPerEm,void 0===
t&&(t=b),void 0===f&&(f=b));b=new q;for(e=0;e<c.length;e+=1)g=c[e],"M"===g.type?b.moveTo(d+g.x*t,a+-g.y*f):"L"===g.type?b.lineTo(d+g.x*t,a+-g.y*f):"Q"===g.type?b.quadraticCurveTo(d+g.x1*t,a+-g.y1*f,d+g.x*t,a+-g.y*f):"C"===g.type?b.curveTo(d+g.x1*t,a+-g.y1*f,d+g.x2*t,a+-g.y2*f,d+g.x*t,a+-g.y*f):"Z"===g.type&&b.closePath();return b};Y.prototype.getContours=function(){if(void 0===this.points)return[];for(var d=[],a=[],b=0;b<this.points.length;b+=1){var c=this.points[b];a.push(c);c.lastPointOfContour&&
(d.push(a),a=[])}M.argument(0===a.length,"There are still points left in the current contour.");return d};Y.prototype.getMetrics=function(){for(var d=this.path.commands,a=[],b=[],c=0;c<d.length;c+=1){var e=d[c];"Z"!==e.type&&(a.push(e.x),b.push(e.y));if("Q"===e.type||"C"===e.type)a.push(e.x1),b.push(e.y1);"C"===e.type&&(a.push(e.x2),b.push(e.y2))}d={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,b),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,b),leftSideBearing:this.leftSideBearing};
isFinite(d.xMin)||(d.xMin=0);isFinite(d.xMax)||(d.xMax=this.advanceWidth);isFinite(d.yMin)||(d.yMin=0);isFinite(d.yMax)||(d.yMax=0);d.rightSideBearing=this.advanceWidth-d.leftSideBearing-(d.xMax-d.xMin);return d};Y.prototype.draw=function(d,a,b,c,e){this.getPath(a,b,c,e).draw(d)};Y.prototype.drawPoints=function(d,a,b,c){function g(a,b,g,c){var e=2*Math.PI;d.beginPath();for(var t=0;t<a.length;t+=1)d.moveTo(b+a[t].x*c,g+a[t].y*c),d.arc(b+a[t].x*c,g+a[t].y*c,2,0,e,!1);d.closePath();d.fill()}a=void 0!==
a?a:0;b=void 0!==b?b:0;c=1/this.path.unitsPerEm*(void 0!==c?c:24);for(var e=[],t=[],f=this.path,h=0;h<f.commands.length;h+=1){var I=f.commands[h];void 0!==I.x&&e.push({x:I.x,y:-I.y});void 0!==I.x1&&t.push({x:I.x1,y:-I.y1});void 0!==I.x2&&t.push({x:I.x2,y:-I.y2})}d.fillStyle="blue";g(e,a,b,c);d.fillStyle="red";g(t,a,b,c)};Y.prototype.drawMetrics=function(d,a,b,c){a=void 0!==a?a:0;b=void 0!==b?b:0;c=1/this.path.unitsPerEm*(void 0!==c?c:24);d.lineWidth=1;d.strokeStyle="black";ua.line(d,a,-1E4,a,1E4);
ua.line(d,-1E4,b,1E4,b);var g=this.xMin||0,e=this.yMin||0,t=this.xMax||0,f=this.yMax||0,h=this.advanceWidth||0;d.strokeStyle="blue";ua.line(d,a+g*c,-1E4,a+g*c,1E4);ua.line(d,a+t*c,-1E4,a+t*c,1E4);ua.line(d,-1E4,b+-e*c,1E4,b+-e*c);ua.line(d,-1E4,b+-f*c,1E4,b+-f*c);d.strokeStyle="green";ua.line(d,a+h*c,-1E4,a+h*c,1E4)};Ua.prototype.get=function(d){"function"===typeof this.glyphs[d]&&(this.glyphs[d]=this.glyphs[d]());return this.glyphs[d]};Ua.prototype.push=function(d,a){this.glyphs[d]=a;this.length++};
var xa={GlyphSet:Ua,glyphLoader:function(d,a){return new Y({index:a,font:d})},ttfGlyphLoader:function(d,a,b,c,e,f){return function(){var g=new Y({index:a,font:d});g.path=function(){b(g,c,e);var a=f(d.glyphs,g);a.unitsPerEm=d.unitsPerEm;return a};Ka(g,"xMin","_xMin");Ka(g,"xMax","_xMax");Ka(g,"yMin","_yMin");Ka(g,"yMax","_yMax");return g}},cffGlyphLoader:function(d,a,b,c){return function(){var g=new Y({index:a,font:d});g.path=function(){var a=b(d,g,c);a.unitsPerEm=d.unitsPerEm;return a};return g}}},
vb=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",
op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:"real real real real real real".split(" "),value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,
type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],$a=[{name:"subrs",op:19,type:"offset",value:0},
{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}],wc={parse:function(d,a,b){b.tables.cff={};H.getCard8(d,a);H.getCard8(d,a+1);H.getCard8(d,a+2);H.getCard8(d,a+3);var g=ma(d,a+4,H.bytesToString);g=ma(d,g.endOffset);var c=ma(d,g.endOffset,H.bytesToString),e=ma(d,c.endOffset);b.gsubrs=e.objects;b.gsubrsBias=Va(b.gsubrs);g=ub(d,a,g.objects,c.objects);if(1!==g.length)throw Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+
g.length);g=g[0];b.tables.cff.topDict=g;g._privateDict&&(b.defaultWidthX=g._privateDict.defaultWidthX,b.nominalWidthX=g._privateDict.nominalWidthX);void 0!==g.ros[0]&&void 0!==g.ros[1]&&(b.isCIDFont=!0);if(b.isCIDFont){e=g.fdArray;var t=g.fdSelect;if(0===e||0===t)throw Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");e=ma(d,e+a);var f=ub(d,a,e.objects,c.objects);g._fdArray=f;e=b.numGlyphs;f=f.length;var h=[];t=new H.Parser(d,t+a);var k=t.parseCard8();if(0===
k)for(var l=0;l<e;l++){k=t.parseCard8();if(k>=f)throw Error("CFF table CID Font FDSelect has bad FD index value "+k+" (FD count "+f+")");h.push(k)}else if(3===k){var n=t.parseCard16(),w=t.parseCard16();if(0!==w)throw Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+w);for(var m=0;m<n;m++){k=t.parseCard8();l=t.parseCard16();if(k>=f)throw Error("CFF table CID Font FDSelect has bad FD index value "+k+" (FD count "+f+")");if(l>e)throw Error("CFF Table CID Font FDSelect format 3 range has bad GID "+
l);for(;w<l;w++)h.push(k);w=l}if(l!==e)throw Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+l);}else throw Error("CFF Table CID Font FDSelect table has unsupported format "+k);g._fdSelect=h}l=a+g.private[1];e=c.objects;f=Wa(d,l,g.private[0]);e=Za(f,$a,e);b.defaultWidthX=e.defaultWidthX;b.nominalWidthX=e.nominalWidthX;0!==e.subrs?(l=ma(d,l+e.subrs),b.subrs=l.objects,b.subrsBias=Va(b.subrs)):(b.subrs=[],b.subrsBias=0);l=ma(d,a+g.charStrings);b.nGlyphs=l.objects.length;e=b.nGlyphs;
f=c.objects;h=new H.Parser(d,a+g.charset);--e;c=[".notdef"];t=h.parseCard8();if(0===t)for(k=0;k<e;k+=1)t=h.parseSID(),c.push(Ba(f,t));else if(1===t)for(;c.length<=e;)for(t=h.parseSID(),k=h.parseCard8(),n=0;n<=k;n+=1)c.push(Ba(f,t)),t+=1;else if(2===t)for(;c.length<=e;)for(t=h.parseSID(),k=h.parseCard16(),n=0;n<=k;n+=1)c.push(Ba(f,t)),t+=1;else throw Error("Unknown charset format "+t);if(0===g.encoding)b.cffEncoding=new Ja(kd,c);else if(1===g.encoding)b.cffEncoding=new Ja(ld,c);else{e={};d=new H.Parser(d,
a+g.encoding);a=d.parseCard8();if(0===a)for(g=d.parseCard8(),f=0;f<g;f+=1)a=d.parseCard8(),e[a]=f;else if(1===a)for(g=d.parseCard8(),a=1,f=0;f<g;f+=1)for(h=d.parseCard8(),t=d.parseCard8(),k=h;k<=h+t;k+=1)e[k]=a,a+=1;else throw Error("Unknown encoding format "+a);d=new Ja(e,c);b.cffEncoding=d}b.encoding=b.encoding||b.cffEncoding;b.glyphs=new xa.GlyphSet(b);for(d=0;d<b.nGlyphs;d+=1)b.glyphs.push(d,xa.cffGlyphLoader(b,d,Ic,l.objects[d]))},make:function(d,a){var b=new J.Table("CFF ",[{name:"header",type:"RECORD"},
{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),g=1/a.unitsPerEm;g={version:a.version,fullName:a.fullName,familyName:a.familyName,weight:a.weightName,fontBBox:a.fontBBox||[0,0,0,0],fontMatrix:[g,0,0,g,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]};for(var c=[],e,f=1;f<d.length;f+=1)e=
d.get(f),c.push(e.name);e=[];b.header=new J.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]);a=[a.postScriptName];f=new J.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);f.names=[];for(var h=0;h<a.length;h+=1)f.names.push({name:"name_"+h,type:"NAME",value:a[h]});b.nameIndex=f;a=yb(g,e);b.topDictIndex=zb(a);b.globalSubrIndex=new J.Record("Global Subr INDEX",[{name:"subrs",
type:"INDEX",value:[]}]);a=new J.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(f=0;f<c.length;f+=1)h=wb(c[f],e),a.fields.push({name:"glyph_"+f,type:"SID",value:h});b.charsets=a;c=new J.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(a=0;a<d.length;a+=1){f=d.get(a);h=[];var k=f.path;h.push({name:"width",type:"NUMBER",value:f.advanceWidth});for(var l=0,n=0,w=0;w<k.commands.length;w+=1){var m=k.commands[w];if("Q"===m.type){var p=1/3,r=2/3;m={type:"C",x:m.x,
y:m.y,x1:p*l+r*m.x1,y1:p*n+r*m.y1,x2:p*m.x+r*m.x1,y2:p*m.y+r*m.y1}}if("M"===m.type)l=Math.round(m.x-l),n=Math.round(m.y-n),h.push({name:"dx",type:"NUMBER",value:l}),h.push({name:"dy",type:"NUMBER",value:n}),h.push({name:"rmoveto",type:"OP",value:21}),l=Math.round(m.x),n=Math.round(m.y);else if("L"===m.type)l=Math.round(m.x-l),n=Math.round(m.y-n),h.push({name:"dx",type:"NUMBER",value:l}),h.push({name:"dy",type:"NUMBER",value:n}),h.push({name:"rlineto",type:"OP",value:5}),l=Math.round(m.x),n=Math.round(m.y);
else if("C"===m.type){p=Math.round(m.x1-l);r=Math.round(m.y1-n);var u=Math.round(m.x2-m.x1),q=Math.round(m.y2-m.y1);l=Math.round(m.x-m.x2);n=Math.round(m.y-m.y2);h.push({name:"dx1",type:"NUMBER",value:p});h.push({name:"dy1",type:"NUMBER",value:r});h.push({name:"dx2",type:"NUMBER",value:u});h.push({name:"dy2",type:"NUMBER",value:q});h.push({name:"dx",type:"NUMBER",value:l});h.push({name:"dy",type:"NUMBER",value:n});h.push({name:"rrcurveto",type:"OP",value:8});l=Math.round(m.x);n=Math.round(m.y)}}h.push({name:"endchar",
type:"OP",value:14});c.charStrings.push({name:f.name,type:"CHARSTRING",value:h})}b.charStringsIndex=c;d=new J.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);d.dict=xb($a,{},e);b.privateDict=d;d=new J.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);d.strings=[];for(c=0;c<e.length;c+=1)d.strings.push({name:"string_"+c,type:"STRING",value:e[c]});b.stringIndex=d;d=b.header.sizeOf()+b.nameIndex.sizeOf()+b.topDictIndex.sizeOf()+b.stringIndex.sizeOf()+b.globalSubrIndex.sizeOf();
g.charset=d;g.encoding=0;g.charStrings=g.charset+b.charsets.sizeOf();g.private[1]=g.charStrings+b.charStringsIndex.sizeOf();a=yb(g,e);b.topDictIndex=zb(a);return b}},qc={parse:function(d,a){var b={};d=new H.Parser(d,a);b.version=d.parseVersion();b.fontRevision=Math.round(1E3*d.parseFixed())/1E3;b.checkSumAdjustment=d.parseULong();b.magicNumber=d.parseULong();M.argument(1594834165===b.magicNumber,"Font header has wrong magic number.");b.flags=d.parseUShort();b.unitsPerEm=d.parseUShort();b.created=
d.parseLongDateTime();b.modified=d.parseLongDateTime();b.xMin=d.parseShort();b.yMin=d.parseShort();b.xMax=d.parseShort();b.yMax=d.parseShort();b.macStyle=d.parseUShort();b.lowestRecPPEM=d.parseUShort();b.fontDirectionHint=d.parseShort();b.indexToLocFormat=d.parseShort();b.glyphDataFormat=d.parseShort();return b},make:function(d){var a=Math.round((new Date).getTime()/1E3)+2082844800,b=a;d.createdTimestamp&&(b=d.createdTimestamp+2082844800);return new J.Table("head",[{name:"version",type:"FIXED",value:65536},
{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1E3},{name:"created",type:"LONGDATETIME",value:b},{name:"modified",type:"LONGDATETIME",value:a},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",
type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],d)}},rc={parse:function(d,a){var b={};d=new H.Parser(d,a);b.version=d.parseVersion();b.ascender=d.parseShort();b.descender=d.parseShort();b.lineGap=d.parseShort();b.advanceWidthMax=d.parseUShort();b.minLeftSideBearing=d.parseShort();b.minRightSideBearing=d.parseShort();b.xMaxExtent=d.parseShort();b.caretSlopeRise=d.parseShort();b.caretSlopeRun=
d.parseShort();b.caretOffset=d.parseShort();d.relativeOffset+=8;b.metricDataFormat=d.parseShort();b.numberOfHMetrics=d.parseUShort();return b},make:function(d){return new J.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",
type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],d)}},xc={parse:function(d,a,b,c,e){d=new H.Parser(d,a);for(a=0;a<c;a+=1){if(a<b){var g=d.parseUShort();
var t=d.parseShort()}var f=e.get(a);f.advanceWidth=g;f.leftSideBearing=t}},make:function(d){for(var a=new J.Table("hmtx",[]),b=0;b<d.length;b+=1){var c=d.get(b),e=c.leftSideBearing||0;a.fields.push({name:"advanceWidth_"+b,type:"USHORT",value:c.advanceWidth||0});a.fields.push({name:"leftSideBearing_"+b,type:"SHORT",value:e})}return a}},sc={make:function(d){for(var a=new J.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:d.length}]),
b="",c=12+4*d.length,e=0;e<d.length;++e){var f=b.indexOf(d[e]);0>f&&(f=b.length,b+=d[e]);a.fields.push({name:"offset "+e,type:"USHORT",value:c+f});a.fields.push({name:"length "+e,type:"USHORT",value:d[e].length})}a.fields.push({name:"stringPool",type:"CHARARRAY",value:b});return a},parse:function(d,a){var b=new H.Parser(d,a),g=b.parseULong();M.argument(1===g,"Unsupported ltag table version.");b.skip("uLong",1);g=b.parseULong();for(var c=[],e=0;e<g;e++){for(var f="",h=a+b.parseUShort(),k=b.parseUShort(),
l=h;l<h+k;++l)f+=String.fromCharCode(d.getInt8(l));c.push(f)}return c}},tc={parse:function(d,a){var b={};d=new H.Parser(d,a);b.version=d.parseVersion();b.numGlyphs=d.parseUShort();1===b.version&&(b.maxPoints=d.parseUShort(),b.maxContours=d.parseUShort(),b.maxCompositePoints=d.parseUShort(),b.maxCompositeContours=d.parseUShort(),b.maxZones=d.parseUShort(),b.maxTwilightPoints=d.parseUShort(),b.maxStorage=d.parseUShort(),b.maxFunctionDefs=d.parseUShort(),b.maxInstructionDefs=d.parseUShort(),b.maxStackElements=
d.parseUShort(),b.maxSizeOfInstructions=d.parseUShort(),b.maxComponentElements=d.parseUShort(),b.maxComponentDepth=d.parseUShort());return b},make:function(d){return new J.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:d}])}},Bc="copyright fontFamily fontSubfamily uniqueID fullName version postScriptName trademark manufacturer designer description manufacturerURL designerURL license licenseURL reserved preferredFamily preferredSubfamily compatibleFullName sampleText postScriptFindFontName wwsFamily wwsSubfamily".split(" "),
Cc={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",
61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},
md={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,
129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Dc={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",
5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",
6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",
1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",
9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Kc={0:"macintosh",
1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",
31:"x-mac-extarabic"},Jc={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"},vc={parse:function(d,a,b){var g={};a=new H.Parser(d,a);for(var c=a.parseUShort(),e=a.parseUShort(),f=a.offset+a.parseUShort(),t=0;t<e;t++){var h=a.parseUShort(),k=a.parseUShort(),l=a.parseUShort(),n=a.parseUShort();n=Bc[n]||
n;var m=a.parseUShort(),w=a.parseUShort();a:{switch(h){case 0:if(65535===l){var p="und";break a}if(b){p=b[l];break a}break;case 1:p=Cc[l];break a;case 3:p=Dc[l];break a}p=void 0}h=Ab(h,k,l);void 0!==h&&void 0!==p&&(h="utf-16"===h?ya.UTF16(d,f+w,m):ya.MACSTRING(d,f+w,m,h))&&(k=g[n],void 0===k&&(k=g[n]={}),k[p]=h)}1===c&&a.parseUShort();return g},make:function(d,a){var b=[],g={},c=ab(Bc);for(f in d){var e=c[f];void 0===e&&(e=f);e=parseInt(e);if(isNaN(e))throw Error('Name table entry "'+f+'" does not exist, see nameTableNames for complete list.');
g[e]=d[f];b.push(e)}var f=ab(Cc);var h=ab(Dc);d=[];c=[];for(var k=0;k<b.length;k++){e=b[k];var l=g[e],n;for(n in l){var m=l[n],w=1,p=f[n],r=md[p],u=Ab(w,r,p);u=D.MACSTRING(m,u);void 0===u&&(w=0,p=a.indexOf(n),0>p&&(p=a.length,a.push(n)),r=4,u=D.UTF16(m));var q=Cb(u,c);d.push(Bb(w,r,p,e,u.length,q));w=h[n];void 0!==w&&(m=D.UTF16(m),p=Cb(m,c),d.push(Bb(3,1,w,e,m.length,p)))}}d.sort(function(d,a){return d.platformID-a.platformID||d.encodingID-a.encodingID||d.languageID-a.languageID||d.nameID-a.nameID});
a=new J.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:d.length},{name:"stringOffset",type:"USHORT",value:6+12*d.length}]);for(b=0;b<d.length;b++)a.fields.push({name:"record_"+b,type:"RECORD",value:d[b]});a.fields.push({name:"strings",type:"LITERAL",value:c});return a}},ob=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,
end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,
end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},
{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,
end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},
{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},
{begin:65936,end:65999},{begin:66E3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],mb={parse:function(d,a){var b={};d=new H.Parser(d,a);b.version=d.parseUShort();b.xAvgCharWidth=d.parseShort();b.usWeightClass=d.parseUShort();b.usWidthClass=d.parseUShort();b.fsType=d.parseUShort();b.ySubscriptXSize=d.parseShort();b.ySubscriptYSize=d.parseShort();b.ySubscriptXOffset=d.parseShort();b.ySubscriptYOffset=d.parseShort();b.ySuperscriptXSize=d.parseShort();b.ySuperscriptYSize=d.parseShort();
b.ySuperscriptXOffset=d.parseShort();b.ySuperscriptYOffset=d.parseShort();b.yStrikeoutSize=d.parseShort();b.yStrikeoutPosition=d.parseShort();b.sFamilyClass=d.parseShort();b.panose=[];for(a=0;10>a;a++)b.panose[a]=d.parseByte();b.ulUnicodeRange1=d.parseULong();b.ulUnicodeRange2=d.parseULong();b.ulUnicodeRange3=d.parseULong();b.ulUnicodeRange4=d.parseULong();b.achVendID=String.fromCharCode(d.parseByte(),d.parseByte(),d.parseByte(),d.parseByte());b.fsSelection=d.parseUShort();b.usFirstCharIndex=d.parseUShort();
b.usLastCharIndex=d.parseUShort();b.sTypoAscender=d.parseShort();b.sTypoDescender=d.parseShort();b.sTypoLineGap=d.parseShort();b.usWinAscent=d.parseUShort();b.usWinDescent=d.parseUShort();1<=b.version&&(b.ulCodePageRange1=d.parseULong(),b.ulCodePageRange2=d.parseULong());2<=b.version&&(b.sxHeight=d.parseShort(),b.sCapHeight=d.parseShort(),b.usDefaultChar=d.parseUShort(),b.usBreakChar=d.parseUShort(),b.usMaxContent=d.parseUShort());return b},make:function(d){return new J.Table("OS/2",[{name:"version",
type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",
type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",
type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",
value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],d)},unicodeRanges:ob,
getUnicodeRange:function(d){for(var a=0;a<ob.length;a+=1){var b=ob[a];if(d>=b.begin&&d<b.end)return a}return-1}},uc={parse:function(d,a){var b={};d=new H.Parser(d,a);b.version=d.parseVersion();b.italicAngle=d.parseFixed();b.underlinePosition=d.parseShort();b.underlineThickness=d.parseShort();b.isFixedPitch=d.parseULong();b.minMemType42=d.parseULong();b.maxMemType42=d.parseULong();b.minMemType1=d.parseULong();b.maxMemType1=d.parseULong();switch(b.version){case 1:b.names=ta.slice();break;case 2:b.numberOfGlyphs=
d.parseUShort();b.glyphNameIndex=Array(b.numberOfGlyphs);for(a=0;a<b.numberOfGlyphs;a++)b.glyphNameIndex[a]=d.parseUShort();b.names=[];for(a=0;a<b.numberOfGlyphs;a++)if(b.glyphNameIndex[a]>=ta.length){var g=d.parseChar();b.names.push(d.parseString(g))}break;case 2.5:for(b.numberOfGlyphs=d.parseUShort(),b.offset=Array(b.numberOfGlyphs),a=0;a<b.numberOfGlyphs;a++)b.offset[a]=d.parseChar()}return b},make:function(){return new J.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",
type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ca=Array(9);ca[1]=function(){var d=this.offset+this.relativeOffset,a=this.parseUShort();if(1===a)return{substFormat:1,coverage:this.parsePointer(l.coverage),deltaGlyphId:this.parseUShort()};
if(2===a)return{substFormat:2,coverage:this.parsePointer(l.coverage),substitute:this.parseOffset16List()};M.assert(!1,"0x"+d.toString(16)+": lookup type 1 format must be 1 or 2.")};ca[2]=function(){var d=this.parseUShort();M.argument(1===d,"GSUB Multiple Substitution Subtable identifier-format must be 1");return{substFormat:d,coverage:this.parsePointer(l.coverage),sequences:this.parseListOfLists()}};ca[3]=function(){var d=this.parseUShort();M.argument(1===d,"GSUB Alternate Substitution Subtable identifier-format must be 1");
return{substFormat:d,coverage:this.parsePointer(l.coverage),alternateSets:this.parseListOfLists()}};ca[4]=function(){var d=this.parseUShort();M.argument(1===d,"GSUB ligature table identifier-format must be 1");return{substFormat:d,coverage:this.parsePointer(l.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var za={sequenceIndex:l.uShort,lookupListIndex:l.uShort};ca[5]=function(){var d=this.offset+
this.relativeOffset,a=this.parseUShort();if(1===a)return{substFormat:a,coverage:this.parsePointer(l.coverage),ruleSets:this.parseListOfLists(function(){var d=this.parseUShort(),a=this.parseUShort();return{input:this.parseUShortList(d-1),lookupRecords:this.parseRecordList(a,za)}})};if(2===a)return{substFormat:a,coverage:this.parsePointer(l.coverage),classDef:this.parsePointer(l.classDef),classSets:this.parseListOfLists(function(){var d=this.parseUShort(),a=this.parseUShort();return{classes:this.parseUShortList(d-
1),lookupRecords:this.parseRecordList(a,za)}})};if(3===a){d=this.parseUShort();var b=this.parseUShort();return{substFormat:a,coverages:this.parseList(d,l.pointer(l.coverage)),lookupRecords:this.parseRecordList(b,za)}}M.assert(!1,"0x"+d.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};ca[6]=function(){var d=this.offset+this.relativeOffset,a=this.parseUShort();if(1===a)return{substFormat:1,coverage:this.parsePointer(l.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),
input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(za)}})};if(2===a)return{substFormat:2,coverage:this.parsePointer(l.coverage),backtrackClassDef:this.parsePointer(l.classDef),inputClassDef:this.parsePointer(l.classDef),lookaheadClassDef:this.parsePointer(l.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),
lookupRecords:this.parseRecordList(za)}})};if(3===a)return{substFormat:3,backtrackCoverage:this.parseList(l.pointer(l.coverage)),inputCoverage:this.parseList(l.pointer(l.coverage)),lookaheadCoverage:this.parseList(l.pointer(l.coverage)),lookupRecords:this.parseRecordList(za)};M.assert(!1,"0x"+d.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};ca[7]=function(){var d=this.parseUShort();M.argument(1===d,"GSUB Extension Substitution subtable identifier-format must be 1");d=this.parseUShort();
var a=new l(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:d,extension:ca[d].call(a)}};ca[8]=function(){var d=this.parseUShort();M.argument(1===d,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1");return{substFormat:d,coverage:this.parsePointer(l.coverage),backtrackCoverage:this.parseList(l.pointer(l.coverage)),lookaheadCoverage:this.parseList(l.pointer(l.coverage)),substitutes:this.parseUShortList()}};var Sa=Array(9);Sa[1]=function(d){return 1===
d.substFormat?new J.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new J.Coverage(d.coverage)},{name:"deltaGlyphID",type:"USHORT",value:d.deltaGlyphId}]):new J.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new J.Coverage(d.coverage)}].concat(J.ushortList("substitute",d.substitute)))};Sa[3]=function(d){M.assert(1===d.substFormat,"Lookup type 3 substFormat must be 1.");return new J.Table("substitutionTable",
[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new J.Coverage(d.coverage)}].concat(J.tableList("altSet",d.alternateSets,function(d){return new J.Table("alternateSetTable",J.ushortList("alternate",d))})))};Sa[4]=function(d){M.assert(1===d.substFormat,"Lookup type 4 substFormat must be 1.");return new J.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new J.Coverage(d.coverage)}].concat(J.tableList("ligSet",d.ligatureSets,
function(d){return new J.Table("ligatureSetTable",J.tableList("ligature",d,function(d){return new J.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:d.ligGlyph}].concat(J.ushortList("component",d.components,d.components.length+1)))}))})))};var yc={parse:function(d,a){d=new l(d,a||0);a=d.parseVersion(1);M.argument(1===a||1.1===a,"Unsupported GSUB table version.");return 1===a?{version:a,scripts:d.parseScriptList(),features:d.parseFeatureList(),lookups:d.parseLookupList(ca)}:{version:a,scripts:d.parseScriptList(),
features:d.parseFeatureList(),lookups:d.parseLookupList(ca),variations:d.parseFeatureVariationsList()}},make:function(d){return new J.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new J.ScriptList(d.scripts)},{name:"features",type:"TABLE",value:new J.FeatureList(d.features)},{name:"lookups",type:"TABLE",value:new J.LookupList(d.lookups,Sa)}])}},zc={parse:function(d,a){var b=new H.Parser(d,a),g=b.parseULong();M.argument(1===g,"Unsupported META table version.");
b.parseULong();b.parseULong();g=b.parseULong();for(var c={},e=0;e<g;e++){var f=b.parseTag(),h=b.parseULong(),k=b.parseULong();h=ya.UTF8(d,a+h,k);c[f]=h}return c},make:function(d){var a=Object.keys(d).length,b="",c=16+12*a;a=new J.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:c},{name:"numTags",type:"ULONG",value:a}]);for(var e in d){var f=b.length;b+=d[e];a.fields.push({name:"tag "+e,type:"TAG",value:e});a.fields.push({name:"offset "+
e,type:"ULONG",value:c+f});a.fields.push({name:"length "+e,type:"ULONG",value:d[e].length})}a.fields.push({name:"stringPool",type:"CHARARRAY",value:b});return a}},nd={make:Eb,fontToTable:function(d){for(var a=[],b=[],c=[],e=[],f=[],h=[],k=[],l,n=0,m=0,w=0,p=0,r=0,u=0;u<d.glyphs.length;u+=1){var q=d.glyphs.get(u),v=q.unicode|0;if(isNaN(q.advanceWidth))throw Error("Glyph "+q.name+" ("+u+"): advanceWidth is not a number.");(l>v||void 0===l)&&0<v&&(l=v);n<v&&(n=v);v=mb.getUnicodeRange(v);if(32>v)m|=1<<
v;else if(64>v)w|=1<<v-32;else if(96>v)p|=1<<v-64;else if(123>v)r|=1<<v-96;else throw Error("Unicode ranges bits > 123 are reserved for internal usage");".notdef"!==q.name&&(v=q.getMetrics(),a.push(v.xMin),b.push(v.yMin),c.push(v.xMax),e.push(v.yMax),h.push(v.leftSideBearing),k.push(v.rightSideBearing),f.push(q.advanceWidth))}a=Math.min.apply(null,a);b=Math.min.apply(null,b);c=Math.max.apply(null,c);e=Math.max.apply(null,e);u=Math.max.apply(null,f);for(v=q=0;v<f.length;v+=1)q+=f[v];e={xMin:a,yMin:b,
xMax:c,yMax:e,advanceWidthMax:u,advanceWidthAvg:q/f.length,minLeftSideBearing:Math.min.apply(null,h),maxLeftSideBearing:Math.max.apply(null,h),minRightSideBearing:Math.min.apply(null,k)};e.ascender=d.ascender;e.descender=d.descender;f=qc.make({flags:3,unitsPerEm:d.unitsPerEm,xMin:e.xMin,yMin:e.yMin,xMax:e.xMax,yMax:e.yMax,lowestRecPPEM:3,createdTimestamp:d.createdTimestamp});h=rc.make({ascender:e.ascender,descender:e.descender,advanceWidthMax:e.advanceWidthMax,minLeftSideBearing:e.minLeftSideBearing,
minRightSideBearing:e.minRightSideBearing,xMaxExtent:e.maxLeftSideBearing+(e.xMax-e.xMin),numberOfHMetrics:d.glyphs.length});k=tc.make(d.glyphs.length);l=mb.make({xAvgCharWidth:Math.round(e.advanceWidthAvg),usWeightClass:d.tables.os2.usWeightClass,usWidthClass:d.tables.os2.usWidthClass,usFirstCharIndex:l,usLastCharIndex:n,ulUnicodeRange1:m,ulUnicodeRange2:w,ulUnicodeRange3:p,ulUnicodeRange4:r,fsSelection:d.tables.os2.fsSelection,sTypoAscender:e.ascender,sTypoDescender:e.descender,sTypoLineGap:0,usWinAscent:e.yMax,
usWinDescent:Math.abs(e.yMin),ulCodePageRange1:1,sxHeight:Fb(d,"xyvw",{yMax:Math.round(e.ascender/2)}).yMax,sCapHeight:Fb(d,"HIKLEFJMNTZBDPRAGOQSUVWXY",e).yMax,usDefaultChar:d.hasChar(" ")?32:0,usBreakChar:d.hasChar(" ")?32:0});n=xc.make(d.glyphs);m=pc.make(d.glyphs);w=d.getEnglishName("fontFamily");p=d.getEnglishName("fontSubfamily");r=w+" "+p;(c=d.getEnglishName("postScriptName"))||(c=w.replace(/\s/g,"")+"-"+p);b={};for(var x in d.names)b[x]=d.names[x];b.uniqueID||(b.uniqueID={en:d.getEnglishName("manufacturer")+
":"+r});b.postScriptName||(b.postScriptName={en:c});b.preferredFamily||(b.preferredFamily=d.names.fontFamily);b.preferredSubfamily||(b.preferredSubfamily=d.names.fontSubfamily);a=[];x=vc.make(b,a);b=0<a.length?sc.make(a):void 0;a=uc.make();p=wc.make(d.glyphs,{version:d.getEnglishName("version"),fullName:r,familyName:w,weightName:p,postScriptName:c,unitsPerEm:d.unitsPerEm,fontBBox:[0,e.yMin,e.ascender,e.advanceWidthMax]});w=d.metas&&0<Object.keys(d.metas).length?zc.make(d.metas):void 0;x=[f,h,k,l,
x,m,a,p,n];b&&x.push(b);d.tables.gsub&&x.push(yc.make(d.tables.gsub));w&&x.push(w);d=Eb(x);x=d.encode();x=bb(x);l=d.fields;n=!1;for(m=0;m<l.length;m+=1)if("head table"===l[m].name){l[m].value.checkSumAdjustment=2981146554-x;n=!0;break}if(!n)throw Error("Could not find head table with checkSum to adjust.");return d},computeCheckSum:bb};Ca.prototype={searchTag:cb,binSearch:Gb,getTable:function(d){var a=this.font.tables[this.tableName];!a&&d&&(a=this.font.tables[this.tableName]=this.createDefaultTable());
return a},getScriptNames:function(){var d=this.getTable();return d?d.scripts.map(function(d){return d.tag}):[]},getDefaultScriptName:function(){var d=this.getTable();if(d){for(var a=!1,b=0;b<d.scripts.length;b++){var c=d.scripts[b].tag;if("DFLT"===c)return c;"latn"===c&&(a=!0)}if(a)return"latn"}},getScriptTable:function(d,a){var b=this.getTable(a);if(b){d=d||"DFLT";var c=b.scripts;b=cb(b.scripts,d);if(0<=b)return c[b].script;if(a)return d={tag:d,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,
featureIndexes:[]},langSysRecords:[]}},c.splice(-1-b,0,d),d.script}},getLangSysTable:function(d,a,b){if(d=this.getScriptTable(d,b)){if(!a||"dflt"===a||"DFLT"===a)return d.defaultLangSys;var c=cb(d.langSysRecords,a);if(0<=c)return d.langSysRecords[c].langSys;if(b)return a={tag:a,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}},d.langSysRecords.splice(-1-c,0,a),a.langSys}},getFeatureTable:function(d,a,b,c){if(d=this.getLangSysTable(d,a,c)){a=d.featureIndexes;for(var g=this.font.tables[this.tableName].features,
e=0;e<a.length;e++)if(d=g[a[e]],d.tag===b)return d.feature;if(c)return c=g.length,M.assert(0===c||b>=g[c-1].tag,"Features must be added in alphabetical order."),d={tag:b,feature:{params:0,lookupListIndexes:[]}},g.push(d),a.push(c),d.feature}},getLookupTables:function(a,b,c,e,f){b=this.getFeatureTable(a,b,c,f);a=[];if(b){c=b.lookupListIndexes;for(var d=this.font.tables[this.tableName].lookups,g=0;g<c.length;g++)b=d[c[g]],b.lookupType===e&&a.push(b);if(0===a.length&&f)return b={lookupType:e,lookupFlag:0,
subtables:[],markFilteringSet:void 0},e=d.length,d.push(b),c.push(e),[b]}return a},getGlyphClass:function(a,b){switch(a.format){case 1:return a.startGlyph<=b&&b<a.startGlyph+a.classes.length?a.classes[b-a.startGlyph]:0;case 2:return(a=Hb(a.ranges,b))?a.classId:0}},getCoverageIndex:function(a,b){switch(a.format){case 1:return b=Gb(a.glyphs,b),0<=b?b:-1;case 2:return(a=Hb(a.ranges,b))?a.index+b-a.start:-1}},expandCoverage:function(a){if(1===a.format)return a.glyphs;var d=[];a=a.ranges;for(var b=0;b<
a.length;b++){var c=a[b],e=c.end;for(c=c.start;c<=e;c++)d.push(c)}return d}};Da.prototype=Ca.prototype;Da.prototype.init=function(){var a=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(a)};Da.prototype.getKerningValue=function(a,b,c){for(var d=0;d<a.length;d++)for(var g=a[d].subtables,e=0;e<g.length;e++){var f=g[e],h=this.getCoverageIndex(f.coverage,b);if(!(0>h))switch(f.posFormat){case 1:f=f.pairSets[h];for(h=0;h<f.length;h++){var t=f[h];if(t.secondGlyph===c)return t.value1&&
t.value1.xAdvance||0}break;case 2:return a=this.getGlyphClass(f.classDef1,b),c=this.getGlyphClass(f.classDef2,c),c=f.classRecords[a][c],c.value1&&c.value1.xAdvance||0}}return 0};Da.prototype.getKerningTables=function(a,b){if(this.font.tables.gpos)return this.getLookupTables(a,b,"kern",2)};ba.prototype=Ca.prototype;ba.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],
lookups:[]}};ba.prototype.getSingle=function(a,b,c){var d=[];a=this.getLookupTables(b,c,a,1);for(b=0;b<a.length;b++){c=a[b].subtables;for(var g=0;g<c.length;g++){var e=c[g],f=this.expandCoverage(e.coverage);if(1===e.substFormat){var h=e.deltaGlyphId;for(e=0;e<f.length;e++){var t=f[e];d.push({sub:t,by:t+h})}}else for(h=e.substitute,e=0;e<f.length;e++)d.push({sub:f[e],by:h[e]})}}return d};ba.prototype.getAlternates=function(a,b,c){var d=[];a=this.getLookupTables(b,c,a,3);for(b=0;b<a.length;b++){c=a[b].subtables;
for(var g=0;g<c.length;g++){var e=c[g],f=this.expandCoverage(e.coverage);e=e.alternateSets;for(var h=0;h<f.length;h++)d.push({sub:f[h],by:e[h]})}}return d};ba.prototype.getLigatures=function(a,b,c){var d=[];a=this.getLookupTables(b,c,a,4);for(b=0;b<a.length;b++){c=a[b].subtables;for(var g=0;g<c.length;g++){var e=c[g],f=this.expandCoverage(e.coverage);e=e.ligatureSets;for(var h=0;h<f.length;h++)for(var t=f[h],k=e[h],l=0;l<k.length;l++){var n=k[l];d.push({sub:[t].concat(n.components),by:n.ligGlyph})}}}return d};
ba.prototype.addSingle=function(a,b,c,e){a=this.getLookupTables(c,e,a,1,!0)[0];a=Ib(a,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});M.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);c=b.sub;e=this.binSearch(a.coverage.glyphs,c);0>e&&(e=-1-e,a.coverage.glyphs.splice(e,0,c),a.substitute.splice(e,0,0));a.substitute[e]=b.by};ba.prototype.addAlternate=function(a,b,c,e){a=this.getLookupTables(c,e,a,3,!0)[0];a=Ib(a,1,{substFormat:1,coverage:{format:1,
glyphs:[]},alternateSets:[]});M.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);c=b.sub;e=this.binSearch(a.coverage.glyphs,c);0>e&&(e=-1-e,a.coverage.glyphs.splice(e,0,c),a.alternateSets.splice(e,0,0));a.alternateSets[e]=b.by};ba.prototype.addLigature=function(a,b,c,e){a=this.getLookupTables(c,e,a,4,!0)[0];c=a.subtables[0];c||(c={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},a.subtables[0]=c);M.assert(1===c.coverage.format,"Ligature: unable to modify coverage table format "+
c.coverage.format);e=b.sub[0];a=b.sub.slice(1);b={ligGlyph:b.by,components:a};var d=this.binSearch(c.coverage.glyphs,e);if(0<=d){c=c.ligatureSets[d];for(e=0;e<c.length;e++){a:{d=c[e].components;var g=d.length;if(g!==a.length)d=!1;else{for(var f=0;f<g;f++)if(d[f]!==a[f]){d=!1;break a}d=!0}}if(d)return}c.push(b)}else d=-1-d,c.coverage.glyphs.splice(d,0,e),c.ligatureSets.splice(d,0,[b])};ba.prototype.getFeature=function(a,b,c){if(/ss\d\d/.test(a))return this.getSingle(a,b,c);switch(a){case "aalt":case "salt":return this.getSingle(a,
b,c).concat(this.getAlternates(a,b,c));case "dlig":case "liga":case "rlig":return this.getLigatures(a,b,c)}};ba.prototype.add=function(a,b,c,e){if(/ss\d\d/.test(a))return this.addSingle(a,b,c,e);switch(a){case "aalt":case "salt":return"number"===typeof b.by?this.addSingle(a,b,c,e):this.addAlternate(a,b,c,e);case "dlig":case "liga":case "rlig":return this.addLigature(a,b,c,e)}};var Nb={getPath:Lb,parse:function(a,b,c,e){for(var d=new xa.GlyphSet(e),g=0;g<c.length-1;g+=1){var f=c[g];f!==c[g+1]?d.push(g,
xa.ttfGlyphLoader(e,g,Lc,a,b+f,Mc)):d.push(g,xa.glyphLoader(e,g))}return d}},Ec=function(a){var d=this.srPeriod,b=this.srPhase,c=this.srThreshold,e=1;0>a&&(a=-a,e=-1);a=Math.trunc((a+(c-b))/d)*d;a+=b;return 0>a?b*e:a*e},ea={x:1,y:0,axis:"x",distance:function(a,b,c,e){return(c?a.xo:a.x)-(e?b.xo:b.x)},interpolate:function(a,b,c,e){if(e&&e!==this){var d=e.distance(a,b,!0,!0);var g=e.distance(a,c,!0,!0);b=e.distance(b,b,!1,!0);c=e.distance(c,c,!1,!0);d=Math.abs(d);g=Math.abs(g);var f=d+g;0===f?ea.setRelative(a,
a,(b+c)/2,e,!0):ea.setRelative(a,a,(b*g+c*d)/f,e,!0)}else d=a.xo-b.xo,g=a.xo-c.xo,b=b.x-b.xo,c=c.x-c.xo,d=Math.abs(d),g=Math.abs(g),f=d+g,a.x=0===f?a.xo+(b+c)/2:a.xo+(b*g+c*d)/f},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(a,b,c,e,f){a.x=e&&e!==this?(f?b.xo:b.x)+c*e.x+(a.y-((f?b.yo:b.y)+c*e.y))/e.normalSlope:(f?b.xo:b.x)+c},slope:0,touch:function(a){a.xTouched=!0},touched:function(a){return a.xTouched},untouch:function(a){a.xTouched=!1}},ia={x:0,y:1,axis:"y",distance:function(a,b,c,
e){return(c?a.yo:a.y)-(e?b.yo:b.y)},interpolate:function(a,b,c,e){if(e&&e!==this){var d=e.distance(a,b,!0,!0);var g=e.distance(a,c,!0,!0);b=e.distance(b,b,!1,!0);c=e.distance(c,c,!1,!0);d=Math.abs(d);g=Math.abs(g);var f=d+g;0===f?ia.setRelative(a,a,(b+c)/2,e,!0):ia.setRelative(a,a,(b*g+c*d)/f,e,!0)}else d=a.yo-b.yo,g=a.yo-c.yo,b=b.y-b.yo,c=c.y-c.yo,d=Math.abs(d),g=Math.abs(g),f=d+g,a.y=0===f?a.yo+(b+c)/2:a.yo+(b*g+c*d)/f},normalSlope:0,setRelative:function(a,b,c,e,f){a.y=e&&e!==this?(f?b.yo:b.y)+
c*e.y+e.normalSlope*(a.x-((f?b.xo:b.x)+c*e.x)):(f?b.yo:b.y)+c},slope:Number.POSITIVE_INFINITY,touch:function(a){a.yTouched=!0},touched:function(a){return a.yTouched},untouch:function(a){a.yTouched=!1}};Object.freeze(ea);Object.freeze(ia);Ea.prototype.distance=function(a,b,c,e){return this.x*ea.distance(a,b,c,e)+this.y*ia.distance(a,b,c,e)};Ea.prototype.interpolate=function(a,b,c,e){var d=e.distance(a,b,!0,!0);var g=e.distance(a,c,!0,!0);b=e.distance(b,b,!1,!0);c=e.distance(c,c,!1,!0);d=Math.abs(d);
g=Math.abs(g);var f=d+g;0===f?this.setRelative(a,a,(b+c)/2,e,!0):this.setRelative(a,a,(b*g+c*d)/f,e,!0)};Ea.prototype.setRelative=function(a,b,c,e,f){e=e||this;var d=e.normalSlope,g=this.slope,h=a.x,t=a.y;a.x=(g*h-d*((f?b.xo:b.x)+c*e.x)+((f?b.yo:b.y)+c*e.y)-t)/(g-d);a.y=g*(a.x-h)+t};Ea.prototype.touch=function(a){a.xTouched=!0;a.yTouched=!0};ja.prototype.nextTouched=function(a){for(var d=this.nextPointOnContour;!a.touched(d)&&d!==this;)d=d.nextPointOnContour;return d};ja.prototype.prevTouched=function(a){for(var d=
this.prevPointOnContour;!a.touched(d)&&d!==this;)d=d.prevPointOnContour;return d};var Ga=Object.freeze(new ja(0,0)),od={cvCutIn:1.0625,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};Mb.prototype.exec=function(d,b){if("number"!==typeof b)throw Error("Point size is not a number!");if(!(2<this._errorState)){var c=this.font,g=this._prepState;if(!g||g.ppem!==b){g=this._fpgmState;if(!g){na.prototype=od;g=this._fpgmState=new na("fpgm",c.tables.fpgm);g.funcs=[];g.font=c;a.DEBUG&&(console.log("---EXEC FPGM---"),
g.step=-1);try{Aa(g)}catch(V){console.log("Hinting error in FPGM:"+V);this._errorState=3;return}}na.prototype=g;g=this._prepState=new na("prep",c.tables.prep);g.ppem=b;var e=c.tables.cvt;if(e){var f=g.cvt=Array(e.length);b/=c.unitsPerEm;for(c=0;c<e.length;c++)f[c]=e[c]*b}else g.cvt=[];a.DEBUG&&(console.log("---EXEC PREP---"),g.step=-1);try{Aa(g)}catch(V){2>this._errorState&&console.log("Hinting error in PREP:"+V),this._errorState=2}}if(!(1<this._errorState))try{return pd(d,g)}catch(V){1>this._errorState&&
(console.log("Hinting error:"+V),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var pd=function(d,b){var c=b.ppem/b.font.unitsPerEm,g=d.components;na.prototype=b;if(g){var e=b.font;var f=[];b=[];for(var h=0;h<g.length;h++){var k=g[h],l=e.glyphs.get(k.glyphIndex);var n=new na("glyf",l.instructions);a.DEBUG&&(console.log("---EXEC COMP "+h+"---"),n.step=-1);Fc(l,n,c,c);l=Math.round(k.dx*c);var m=Math.round(k.dy*c),w=n.gZone;k=n.contours;for(var p=0;p<w.length;p++){var r=
w[p];r.xTouched=r.yTouched=!1;r.xo=r.x+=l;r.yo=r.y+=m}l=f.length;f.push.apply(f,w);for(w=0;w<k.length;w++)b.push(k[w]+l)}d.instructions&&!n.inhibitGridFit&&(n=new na("glyf",d.instructions),n.gZone=n.z0=n.z1=n.z2=f,n.contours=b,f.push(new ja(0,0),new ja(Math.round(d.advanceWidth*c),0)),a.DEBUG&&(console.log("---EXEC COMPOSITE---"),n.step=-1),Aa(n),f.length-=2)}else n=new na("glyf",d.instructions),a.DEBUG&&(console.log("---EXEC GLYPH---"),n.step=-1),Fc(d,n,c,c),f=n.gZone;return f};var Fc=function(d,
b,c,e){for(var g=d.points||[],f=g.length,h=b.gZone=b.z0=b.z1=b.z2=[],k=b.contours=[],t,l=0;l<f;l++)t=g[l],h[l]=new ja(t.x*c,t.y*e,t.lastPointOfContour,t.onCurve);for(g=0;g<f;g++){t=h[g];if(!n){var n=t;k.push(g)}t.lastPointOfContour?(t.nextPointOnContour=n,n.prevPointOnContour=t,n=void 0):(e=h[g+1],t.nextPointOnContour=e,e.prevPointOnContour=t)}if(!b.inhibitGridFit){if(a.DEBUG)for(console.log("PROCESSING GLYPH",b.stack),k=0;k<f;k++)console.log(k,h[k].x,h[k].y);h.push(new ja(0,0),new ja(Math.round(d.advanceWidth*
c),0));Aa(b);h.length-=2;if(a.DEBUG)for(console.log("FINISHED GLYPH",b.stack),d=0;d<f;d++)console.log(d,h[d].x,h[d].y)}};var Aa=function(d){var b=d.prog;if(b){var c=b.length;for(d.ip=0;d.ip<c;d.ip++){a.DEBUG&&d.step++;var e=qd[b[d.ip]];if(!e)throw Error("unknown instruction: 0x"+Number(b[d.ip]).toString(16));e(d)}}};var qd=[Qb.bind(void 0,ia),Qb.bind(void 0,ea),Rb.bind(void 0,ia),Rb.bind(void 0,ea),Sb.bind(void 0,ia),Sb.bind(void 0,ea),Tb.bind(void 0,0),Tb.bind(void 0,1),Ub.bind(void 0,0),Ub.bind(void 0,
1),function(d){var b=d.stack,c=b.pop();b=b.pop();a.DEBUG&&console.log(d.step,"SPVFS[]",c,b);d.pv=d.dpv=Fa(b,c)},function(d){var b=d.stack,c=b.pop();b=b.pop();a.DEBUG&&console.log(d.step,"SPVFS[]",c,b);d.fv=Fa(b,c)},function(d){var b=d.stack,c=d.pv;a.DEBUG&&console.log(d.step,"GPV[]");b.push(16384*c.x);b.push(16384*c.y)},function(d){var b=d.stack,c=d.fv;a.DEBUG&&console.log(d.step,"GFV[]");b.push(16384*c.x);b.push(16384*c.y)},function(d){d.fv=d.pv;a.DEBUG&&console.log(d.step,"SFVTPV[]")},function(d){var b=
d.stack,c=b.pop(),e=b.pop(),f=b.pop(),h=b.pop(),k=b.pop(),l=d.z0;b=d.z1;var n=l[c],m=l[e];l=b[f];b=b[h];d=d.z2[k];a.DEBUG&&console.log("ISECT[], ",c,e,f,h,k);c=n.x;e=n.y;f=m.x;m=m.y;h=l.x;l=l.y;n=b.x;b=b.y;k=(c-f)*(l-b)-(e-m)*(h-n);var w=c*m-e*f,p=h*b-l*n;d.x=(w*(h-n)-p*(c-f))/k;d.y=(w*(l-b)-p*(e-m))/k},function(d){d.rp0=d.stack.pop();a.DEBUG&&console.log(d.step,"SRP0[]",d.rp0)},function(d){d.rp1=d.stack.pop();a.DEBUG&&console.log(d.step,"SRP1[]",d.rp1)},function(d){d.rp2=d.stack.pop();a.DEBUG&&console.log(d.step,
"SRP2[]",d.rp2)},function(d){var b=d.stack.pop();a.DEBUG&&console.log(d.step,"SZP0[]",b);d.zp0=b;switch(b){case 0:d.tZone||Ma(d);d.z0=d.tZone;break;case 1:d.z0=d.gZone;break;default:throw Error("Invalid zone pointer");}},function(d){var b=d.stack.pop();a.DEBUG&&console.log(d.step,"SZP1[]",b);d.zp1=b;switch(b){case 0:d.tZone||Ma(d);d.z1=d.tZone;break;case 1:d.z1=d.gZone;break;default:throw Error("Invalid zone pointer");}},function(d){var b=d.stack.pop();a.DEBUG&&console.log(d.step,"SZP2[]",b);d.zp2=
b;switch(b){case 0:d.tZone||Ma(d);d.z2=d.tZone;break;case 1:d.z2=d.gZone;break;default:throw Error("Invalid zone pointer");}},function(d){var b=d.stack.pop();a.DEBUG&&console.log(d.step,"SZPS[]",b);d.zp0=d.zp1=d.zp2=b;switch(b){case 0:d.tZone||Ma(d);d.z0=d.z1=d.z2=d.tZone;break;case 1:d.z0=d.z1=d.z2=d.gZone;break;default:throw Error("Invalid zone pointer");}},function(d){d.loop=d.stack.pop();a.DEBUG&&console.log(d.step,"SLOOP[]",d.loop)},function(d){a.DEBUG&&console.log(d.step,"RTG[]");d.round=Ob},
function(d){a.DEBUG&&console.log(d.step,"RTHG[]");d.round=Pc},function(d){var b=d.stack.pop();a.DEBUG&&console.log(d.step,"SMD[]",b);d.minDis=b/64},function(d){a.DEBUG&&console.log(d.step,"ELSE[]");Pb(d,!1)},function(d){var b=d.stack.pop();a.DEBUG&&console.log(d.step,"JMPR[]",b);d.ip+=b-1},function(d){var b=d.stack.pop();a.DEBUG&&console.log(d.step,"SCVTCI[]",b);d.cvCutIn=b/64},void 0,void 0,function(d){var b=d.stack;a.DEBUG&&console.log(d.step,"DUP[]");b.push(b[b.length-1])},eb,function(d){a.DEBUG&&
console.log(d.step,"CLEAR[]");d.stack.length=0},function(d){var b=d.stack,c=b.pop(),e=b.pop();a.DEBUG&&console.log(d.step,"SWAP[]");b.push(c);b.push(e)},function(d){var b=d.stack;a.DEBUG&&console.log(d.step,"DEPTH[]");b.push(b.length)},function(d){var b=d.stack,c=b.pop();a.DEBUG&&console.log(d.step,"CINDEX[]",c);b.push(b[b.length-c])},function(d){var b=d.stack,c=b.pop();a.DEBUG&&console.log(d.step,"MINDEX[]",c);b.push(b.splice(b.length-c,1)[0])},void 0,void 0,void 0,function(d){var b=d.stack,c=b.pop();
b=b.pop();a.DEBUG&&console.log(d.step,"LOOPCALL[]",c,b);var e=d.ip,f=d.prog;d.prog=d.funcs[c];for(c=0;c<b;c++)Aa(d),a.DEBUG&&console.log(++d.step,c+1<b?"next loopcall":"done loopcall",c);d.ip=e;d.prog=f},function(d){var b=d.stack.pop();a.DEBUG&&console.log(d.step,"CALL[]",b);var c=d.ip,e=d.prog;d.prog=d.funcs[b];Aa(d);d.ip=c;d.prog=e;a.DEBUG&&console.log(++d.step,"returning from",b)},function(d){if("fpgm"!==d.env)throw Error("FDEF not allowed here");var b=d.prog,c=d.ip,e=d.stack.pop(),f=c;for(a.DEBUG&&
console.log(d.step,"FDEF[]",e);45!==b[++c];);d.ip=c;d.funcs[e]=b.slice(f+1,c)},void 0,Vb.bind(void 0,0),Vb.bind(void 0,1),Wb.bind(void 0,ia),Wb.bind(void 0,ea),Xb.bind(void 0,0),Xb.bind(void 0,1),Yb.bind(void 0,0),Yb.bind(void 0,1),Zb.bind(void 0,0),Zb.bind(void 0,1),function(d){for(var b=d.stack,c=d.loop,e=d.fv,f=b.pop()/64,h=d.z2;c--;){var k=b.pop(),l=h[k];a.DEBUG&&console.log(d.step,(1<d.loop?"loop "+(d.loop-c)+": ":"")+"SHPIX[]",k,f);e.setRelative(l,l,f);e.touch(l)}d.loop=1},function(d){for(var b=
d.stack,c=d.rp1,e=d.rp2,f=d.loop,h=d.z0[c],k=d.z1[e],l=d.fv,n=d.dpv,m=d.z2;f--;){var w=b.pop(),p=m[w];a.DEBUG&&console.log(d.step,(1<d.loop?"loop "+(d.loop-f)+": ":"")+"IP[]",w,c,"<->",e);l.interpolate(p,h,k,n);l.touch(p)}d.loop=1},$b.bind(void 0,0),$b.bind(void 0,1),function(d){for(var b=d.stack,c=d.z0[d.rp0],e=d.loop,f=d.fv,h=d.pv,k=d.z1;e--;){var l=b.pop(),n=k[l];a.DEBUG&&console.log(d.step,(1<d.loop?"loop "+(d.loop-e)+": ":"")+"ALIGNRP[]",l);f.setRelative(n,c,0,h);f.touch(n)}d.loop=1},function(d){a.DEBUG&&
console.log(d.step,"RTDG[]");d.round=Oc},ac.bind(void 0,0),ac.bind(void 0,1),function(d){var b=d.prog,c=d.ip,e=d.stack,f=b[++c];a.DEBUG&&console.log(d.step,"NPUSHB[]",f);for(var h=0;h<f;h++)e.push(b[++c]);d.ip=c},function(d){var b=d.ip,c=d.prog,e=d.stack,f=c[++b];a.DEBUG&&console.log(d.step,"NPUSHW[]",f);for(var h=0;h<f;h++){var k=c[++b]<<8|c[++b];k&32768&&(k=-((k^65535)+1));e.push(k)}d.ip=b},function(b){var d=b.stack,c=b.store;c||(c=b.store=[]);var e=d.pop();d=d.pop();a.DEBUG&&console.log(b.step,
"WS",e,d);c[d]=e},function(b){var d=b.stack,c=b.store,e=d.pop();a.DEBUG&&console.log(b.step,"RS",e);d.push(c&&c[e]||0)},function(b){var d=b.stack,c=d.pop();d=d.pop();a.DEBUG&&console.log(b.step,"WCVTP",c,d);b.cvt[d]=c/64},function(b){var d=b.stack,c=d.pop();a.DEBUG&&console.log(b.step,"RCVT",c);d.push(64*b.cvt[c])},bc.bind(void 0,0),bc.bind(void 0,1),void 0,cc.bind(void 0,0),cc.bind(void 0,1),function(b){a.DEBUG&&console.log(b.step,"MPPEM[]");b.stack.push(b.ppem)},void 0,function(b){a.DEBUG&&console.log(b.step,
"FLIPON[]");b.autoFlip=!0},void 0,void 0,function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"LT[]",c,e);d.push(e<c?1:0)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"LTEQ[]",c,e);d.push(e<=c?1:0)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"GT[]",c,e);d.push(e>c?1:0)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"GTEQ[]",c,e);d.push(e>=c?1:0)},function(b){var d=b.stack,c=d.pop(),e=d.pop();
a.DEBUG&&console.log(b.step,"EQ[]",c,e);d.push(c===e?1:0)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"NEQ[]",c,e);d.push(c!==e?1:0)},function(b){var d=b.stack,c=d.pop();a.DEBUG&&console.log(b.step,"ODD[]",c);d.push(Math.trunc(c)%2?1:0)},function(b){var d=b.stack,c=d.pop();a.DEBUG&&console.log(b.step,"EVEN[]",c);d.push(Math.trunc(c)%2?0:1)},function(b){var d=b.stack.pop();a.DEBUG&&console.log(b.step,"IF[]",d);d||(Pb(b,!0),a.DEBUG&&console.log(b.step,"EIF[]"))},function(b){a.DEBUG&&
console.log(b.step,"EIF[]")},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"AND[]",c,e);d.push(c&&e?1:0)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"OR[]",c,e);d.push(c||e?1:0)},function(b){var d=b.stack,c=d.pop();a.DEBUG&&console.log(b.step,"NOT[]",c);d.push(c?0:1)},fb.bind(void 0,1),function(b){var d=b.stack.pop();a.DEBUG&&console.log(b.step,"SDB[]",d);b.deltaBase=d},function(b){var d=b.stack.pop();a.DEBUG&&console.log(b.step,"SDS[]",d);
b.deltaShift=Math.pow(.5,d)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"ADD[]",c,e);d.push(e+c)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"SUB[]",c,e);d.push(e-c)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"DIV[]",c,e);d.push(64*e/c)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"MUL[]",c,e);d.push(e*c/64)},function(b){var d=b.stack,c=d.pop();a.DEBUG&&console.log(b.step,"ABS[]",
c);d.push(Math.abs(c))},function(b){var d=b.stack,c=d.pop();a.DEBUG&&console.log(b.step,"NEG[]",c);d.push(-c)},function(b){var d=b.stack,c=d.pop();a.DEBUG&&console.log(b.step,"FLOOR[]",c);d.push(64*Math.floor(c/64))},function(b){var d=b.stack,c=d.pop();a.DEBUG&&console.log(b.step,"CEILING[]",c);d.push(64*Math.ceil(c/64))},Na.bind(void 0,0),Na.bind(void 0,1),Na.bind(void 0,2),Na.bind(void 0,3),void 0,void 0,void 0,void 0,function(b){var d=b.stack,c=d.pop();d=d.pop();a.DEBUG&&console.log(b.step,"WCVTF[]",
c,d);b.cvt[d]=c*b.ppem/b.font.unitsPerEm},fb.bind(void 0,2),fb.bind(void 0,3),gb.bind(void 0,1),gb.bind(void 0,2),gb.bind(void 0,3),function(b){var d=b.stack.pop();a.DEBUG&&console.log(b.step,"SROUND[]",d);b.round=Ec;switch(d&192){case 0:var c=.5;break;case 64:c=1;break;case 128:c=2;break;default:throw Error("invalid SROUND value");}b.srPeriod=c;switch(d&48){case 0:b.srPhase=0;break;case 16:b.srPhase=.25*c;break;case 32:b.srPhase=.5*c;break;case 48:b.srPhase=.75*c;break;default:throw Error("invalid SROUND value");
}d&=15;b.srThreshold=0===d?0:(d/8-.5)*c},function(b){var d=b.stack.pop();a.DEBUG&&console.log(b.step,"S45ROUND[]",d);b.round=Ec;switch(d&192){case 0:var c=Math.sqrt(2)/2;break;case 64:c=Math.sqrt(2);break;case 128:c=2*Math.sqrt(2);break;default:throw Error("invalid S45ROUND value");}b.srPeriod=c;switch(d&48){case 0:b.srPhase=0;break;case 16:b.srPhase=.25*c;break;case 32:b.srPhase=.5*c;break;case 48:b.srPhase=.75*c;break;default:throw Error("invalid S45ROUND value");}d&=15;b.srThreshold=0===d?0:(d/
8-.5)*c},void 0,void 0,function(b){a.DEBUG&&console.log(b.step,"ROFF[]");b.round=Nc},void 0,function(b){a.DEBUG&&console.log(b.step,"RUTG[]");b.round=Qc},function(b){a.DEBUG&&console.log(b.step,"RDTG[]");b.round=Rc},eb,eb,void 0,void 0,void 0,void 0,void 0,function(b){var d=b.stack.pop();a.DEBUG&&console.log(b.step,"SCANCTRL[]",d)},dc.bind(void 0,0),dc.bind(void 0,1),function(b){var d=b.stack,c=d.pop(),e=0;a.DEBUG&&console.log(b.step,"GETINFO[]",c);c&1&&(e=35);c&32&&(e|=4096);d.push(e)},void 0,function(b){var d=
b.stack,c=d.pop(),e=d.pop(),f=d.pop();a.DEBUG&&console.log(b.step,"ROLL[]");d.push(e);d.push(c);d.push(f)},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"MAX[]",c,e);d.push(Math.max(e,c))},function(b){var d=b.stack,c=d.pop(),e=d.pop();a.DEBUG&&console.log(b.step,"MIN[]",c,e);d.push(Math.min(e,c))},function(b){var d=b.stack.pop();a.DEBUG&&console.log(b.step,"SCANTYPE[]",d)},function(b){var d=b.stack.pop(),c=b.stack.pop();a.DEBUG&&console.log(b.step,"INSTCTRL[]",d,c);switch(d){case 1:b.inhibitGridFit=
!!c;break;case 2:b.ignoreCvt=!!c;break;default:throw Error("invalid INSTCTRL[] selector");}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,oa.bind(void 0,1),oa.bind(void 0,2),oa.bind(void 0,3),oa.bind(void 0,4),oa.bind(void 0,5),oa.bind(void 0,6),oa.bind(void 0,7),oa.bind(void 0,8),pa.bind(void 0,1),pa.bind(void 0,
2),pa.bind(void 0,3),pa.bind(void 0,4),pa.bind(void 0,5),pa.bind(void 0,6),pa.bind(void 0,7),pa.bind(void 0,8),E.bind(void 0,0,0,0,0,0),E.bind(void 0,0,0,0,0,1),E.bind(void 0,0,0,0,0,2),E.bind(void 0,0,0,0,0,3),E.bind(void 0,0,0,0,1,0),E.bind(void 0,0,0,0,1,1),E.bind(void 0,0,0,0,1,2),E.bind(void 0,0,0,0,1,3),E.bind(void 0,0,0,1,0,0),E.bind(void 0,0,0,1,0,1),E.bind(void 0,0,0,1,0,2),E.bind(void 0,0,0,1,0,3),E.bind(void 0,0,0,1,1,0),E.bind(void 0,0,0,1,1,1),E.bind(void 0,0,0,1,1,2),E.bind(void 0,0,
0,1,1,3),E.bind(void 0,0,1,0,0,0),E.bind(void 0,0,1,0,0,1),E.bind(void 0,0,1,0,0,2),E.bind(void 0,0,1,0,0,3),E.bind(void 0,0,1,0,1,0),E.bind(void 0,0,1,0,1,1),E.bind(void 0,0,1,0,1,2),E.bind(void 0,0,1,0,1,3),E.bind(void 0,0,1,1,0,0),E.bind(void 0,0,1,1,0,1),E.bind(void 0,0,1,1,0,2),E.bind(void 0,0,1,1,0,3),E.bind(void 0,0,1,1,1,0),E.bind(void 0,0,1,1,1,1),E.bind(void 0,0,1,1,1,2),E.bind(void 0,0,1,1,1,3),E.bind(void 0,1,0,0,0,0),E.bind(void 0,1,0,0,0,1),E.bind(void 0,1,0,0,0,2),E.bind(void 0,1,0,
0,0,3),E.bind(void 0,1,0,0,1,0),E.bind(void 0,1,0,0,1,1),E.bind(void 0,1,0,0,1,2),E.bind(void 0,1,0,0,1,3),E.bind(void 0,1,0,1,0,0),E.bind(void 0,1,0,1,0,1),E.bind(void 0,1,0,1,0,2),E.bind(void 0,1,0,1,0,3),E.bind(void 0,1,0,1,1,0),E.bind(void 0,1,0,1,1,1),E.bind(void 0,1,0,1,1,2),E.bind(void 0,1,0,1,1,3),E.bind(void 0,1,1,0,0,0),E.bind(void 0,1,1,0,0,1),E.bind(void 0,1,1,0,0,2),E.bind(void 0,1,1,0,0,3),E.bind(void 0,1,1,0,1,0),E.bind(void 0,1,1,0,1,1),E.bind(void 0,1,1,0,1,2),E.bind(void 0,1,1,0,
1,3),E.bind(void 0,1,1,1,0,0),E.bind(void 0,1,1,1,0,1),E.bind(void 0,1,1,1,0,2),E.bind(void 0,1,1,1,0,3),E.bind(void 0,1,1,1,1,0),E.bind(void 0,1,1,1,1,1),E.bind(void 0,1,1,1,1,2),E.bind(void 0,1,1,1,1,3)];wa.prototype.setState=function(a,b){this.state[a]=b;return this.activeState={key:a,value:this.state[a]}};wa.prototype.getState=function(a){return this.state[a]||null};T.prototype.inboundIndex=function(a){return 0<=a&&a<this.tokens.length};T.prototype.composeRUD=function(a){var b=this;a=a.map(function(a){return b[a[0]].apply(b,
a.slice(1).concat(!0))});var d=function(a){return"object"===typeof a&&a.hasOwnProperty("FAIL")};if(a.every(d))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:a.filter(d)};this.dispatch("composeRUD",[a.filter(function(a){return!d(a)})])};T.prototype.replaceRange=function(a,b,c,e){b=null!==b?b:this.tokens.length;var d=c.every(function(a){return a instanceof wa});return!isNaN(a)&&this.inboundIndex(a)&&d?(d=this.tokens.splice.apply(this.tokens,[a,b].concat(c)),e||
this.dispatch("replaceToken",[a,b,c]),[d,c]):{FAIL:"replaceRange: invalid tokens or startIndex."}};T.prototype.replaceToken=function(a,b,c){if(!isNaN(a)&&this.inboundIndex(a)&&b instanceof wa){var d=this.tokens.splice(a,1,b);c||this.dispatch("replaceToken",[a,b]);return[d[0],b]}return{FAIL:"replaceToken: invalid token or index."}};T.prototype.removeRange=function(a,b,c){b=isNaN(b)?this.tokens.length:b;var d=this.tokens.splice(a,b);c||this.dispatch("removeRange",[d,a,b]);return d};T.prototype.removeToken=
function(a,b){if(!isNaN(a)&&this.inboundIndex(a)){var d=this.tokens.splice(a,1);b||this.dispatch("removeToken",[d,a]);return d}return{FAIL:"removeToken: invalid token index."}};T.prototype.insertToken=function(a,b,c){return a.every(function(a){return a instanceof wa})?(this.tokens.splice.apply(this.tokens,[b,0].concat(a)),c||this.dispatch("insertToken",[a,b]),a):{FAIL:"insertToken: invalid token(s)."}};T.prototype.registerModifier=function(a,b,c){this.events.newToken.subscribe(function(d,e){var g=
[d,e];g=null===b||!0===b.apply(this,g);e=[d,e];g&&(e=c.apply(this,e),d.setState(a,e))});this.registeredModifiers.push(a)};Oa.prototype.subscribe=function(a){return"function"===typeof a?this.subscribers.push(a)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};Oa.prototype.unsubscribe=function(a){this.subscribers.splice(a,1)};fa.prototype.setCurrentIndex=function(a){this.index=a;this.current=this.context[a];this.backtrack=this.context.slice(0,a);this.lookahead=this.context.slice(a+1)};fa.prototype.get=
function(a){switch(!0){case 0===a:return this.current;case 0>a&&Math.abs(a)<=this.backtrack.length:return this.backtrack.slice(a)[0];case 0<a&&a<=this.lookahead.length:return this.lookahead[a-1];default:return null}};T.prototype.rangeToText=function(a){if(a instanceof hb)return this.getRangeTokens(a).map(function(a){return a.char}).join("")};T.prototype.getText=function(){return this.tokens.map(function(a){return a.char}).join("")};T.prototype.getContext=function(a){return(a=this.registeredContexts[a])?
a:null};T.prototype.on=function(a,b){return(a=this.events[a])?a.subscribe(b):null};T.prototype.dispatch=function(a,b){var d=this;a=this.events[a];a instanceof Oa&&a.subscribers.forEach(function(a){a.apply(d,b||[])})};T.prototype.registerContextChecker=function(a,b,c){if(this.getContext(a))return{FAIL:"context name '"+a+"' is already registered."};if("function"!==typeof b)return{FAIL:"missing context start check."};if("function"!==typeof c)return{FAIL:"missing context end check."};b=new Sc(a,b,c);
this.registeredContexts[a]=b;this.contextCheckers.push(b);return b};T.prototype.getRangeTokens=function(a){return[].concat(this.tokens.slice(a.startIndex,a.startIndex+a.endOffset))};T.prototype.getContextRanges=function(a){var b=this.getContext(a);return b?b.ranges:{FAIL:"context checker '"+a+"' is not registered."}};T.prototype.resetContextsRanges=function(){var a=this.registeredContexts,b;for(b in a)a.hasOwnProperty(b)&&(a[b].ranges=[])};T.prototype.updateContextsRanges=function(){this.resetContextsRanges();
for(var a=this.tokens.map(function(a){return a.char}),b=0;b<a.length;b++){var c=new fa(a,b);this.runContextCheck(c)}this.dispatch("updateContextsRanges",[this.registeredContexts])};T.prototype.setEndOffset=function(a,b){var d=this.getContext(b).openRange.startIndex;a=new hb(d,a,b);d=this.getContext(b).ranges;a.rangeId=b+"."+d.length;d.push(a);this.getContext(b).openRange=null;return a};T.prototype.runContextCheck=function(a){var b=this,d=a.index;this.contextCheckers.forEach(function(c){var e=c.contextName,
g=b.getContext(e).openRange;!g&&c.checkStart(a)&&(g=new hb(d,null,e),b.getContext(e).openRange=g,b.dispatch("contextStart",[e,d]));g&&c.checkEnd(a)&&(c=b.setEndOffset(d-g.startIndex+1,e),b.dispatch("contextEnd",[e,c]))})};T.prototype.tokenize=function(a){this.tokens=[];this.resetContextsRanges();a=Array.from(a);this.dispatch("start");for(var b=0;b<a.length;b++){var d=a[b],c=new fa(a,b);this.dispatch("next",[c]);this.runContextCheck(c);d=new wa(d);this.tokens.push(d);this.dispatch("newToken",[d,c])}this.dispatch("end",
[this.tokens]);return this.tokens};ka.prototype.setText=function(a){this.text=a};ka.prototype.contextChecks={arabicWordCheck:{arabicWordStartCheck:function(a){var b=a.current;a=a.get(-1);return null===a&&qa(b)||!qa(a)&&qa(b)},arabicWordEndCheck:function(a){a=a.get(1);return null===a||!qa(a)}},arabicSentenceCheck:{arabicSentenceStartCheck:function(a){var b=a.current;a=a.get(-1);return(qa(b)||ra(b))&&!qa(a)},arabicSentenceEndCheck:function(a){var b=a.get(1);switch(!0){case null===b:return!0;case !qa(b)&&
!ra(b):b=/\s/.test(b);if(!b||b&&(b=!1,b=a.lookahead.some(function(a){return qa(a)||ra(a)}),!b))return!0;break;default:return!1}}}};ka.prototype.subscribeArabicForms=function(a){var b=this;this.tokenizer.events.contextEnd.subscribe(function(d,c){if("arabicWord"===d)return fc.call(b.tokenizer,c,a)})};ka.prototype.applyFeatures=function(a){for(var b=0;b<a.length;b++){var d=a[b];if(d){var c=d.script;this.features[c]||(this.features[c]={});this.features[c][d.tag]=d}}};ka.prototype.registerModifier=function(a,
b,c){this.tokenizer.registerModifier(a,b,c)};ka.prototype.processText=function(a){this.text&&this.text===a||(this.setText(a),a=this.contextChecks.arabicWordCheck,this.tokenizer.registerContextChecker("arabicWord",a.arabicWordStartCheck,a.arabicWordEndCheck),a=this.contextChecks.arabicSentenceCheck,this.tokenizer.registerContextChecker("arabicSentence",a.arabicSentenceStartCheck,a.arabicSentenceEndCheck),this.tokenizer.tokenize(this.text),Vc.call(this),Wc.call(this),Uc.call(this))};ka.prototype.getBidiText=
function(a){this.processText(a);return this.tokenizer.getText()};ka.prototype.getTextGlyphs=function(a){this.processText(a);a=[];for(var b=0;b<this.tokenizer.tokens.length;b++){var d=this.tokenizer.tokens[b];d.state.deleted||(d=d.activeState.value,a.push(Array.isArray(d)?d[0]:d))}return a};var ib="ltr";ic.prototype.lookup=function(a,b){b=this.ligatureSets[b];for(var d=function(a,b){if(a.length>b.length)return null;for(var d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0},c=0;c<b.length;c++){var e=
b[c],g=a.lookahead.map(function(a){return a.activeState.value});"rtl"===ib&&g.reverse();if(d(e.components,g))return e}return null};jb.prototype.lookup=function(a){for(var b=[],d=0;d<this.subtables.length;d++){var c=this.subtables[d].lookup(a);if(null!==c||c.length)b=b.concat(c)}return b};jc.prototype.lookup=function(a){var b=[],d=this.lookupTable.lookupType,c=this.subtable.substFormat;if(1===d&&2===c){var e=a.current.activeState.value;e=Array.isArray(e)?e[0]:e;e=this.coverage.lookup(e);e=-1===e?[]:
[this.subtable.substitute[e]];0<e.length&&b.push({id:12,substitution:e})}6===d&&3===c&&(e=Yc.call(this,a),0<e.length&&b.push({id:63,substitution:e}));4===d&&1===c&&(d=this.coverage.lookup(a.current.activeState.value),a=-1===d?[]:(a=this.ligatureSets.lookup(a,d))?[a]:[],0<a.length&&b.push({id:41,substitution:a}));return b};Ia.prototype.lookup=function(a){if(!a)return-1;switch(this.table.format){case 1:return this.table.glyphs.indexOf(a);case 2:for(var b=this.table.ranges,d=0;d<b.length;d++){var c=
b[d];if(a>=c.start&&a<=c.end)return c.index+(a-c.start)}}return-1};hc.prototype.lookup=function(a){for(var b=[],d=0;d<this.lookups.length;d++){var c=this.lookups[d].lookup(a);if(null!==c||c.length)b=b.concat(c)}return b};Ha.prototype.getScriptFeaturesIndexes=function(a){if(!a||!this.font.tables.gsub)return[];for(var b=this.font.tables.gsub.scripts,d=0;d<b.length;d++){var c=b[d];if(c.tag===a)return c.script.defaultLangSys.featureIndexes;if(c=c.langSysRecords)for(var e=0;e<c.length;e++){var f=c[e];
if(f.tag===a)return f.langSys.featureIndexes}}return[]};Ha.prototype.mapTagsToFeatures=function(a,b){for(var d={},c=0;c<a.length;c++){var e=a[c].feature,g=a[c].tag,f=new Xc(this.font.tables.gsub.lookups,e.lookupListIndexes);d[g]=new hc(g,e,f,b)}this.features[b].tags=d};Ha.prototype.getScriptFeatures=function(a){var b=this.features[a];if(this.features.hasOwnProperty(a))return b;b=this.getScriptFeaturesIndexes(a);if(!b)return null;var d=this.font.tables.gsub;b=b.map(function(a){return d.features[a]});
this.features[a]=b;this.mapTagsToFeatures(b,a);return b};Ha.prototype.getFeature=function(a){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(a.script)||this.getScriptFeatures(a.script);return this.features[a.script].tags[a.tag]||null};R.prototype.hasChar=function(a){return null!==this.encoding.charToGlyphIndex(a)};R.prototype.charToGlyphIndex=function(a){return this.encoding.charToGlyphIndex(a)};R.prototype.charToGlyph=function(a){a=this.charToGlyphIndex(a);(a=this.glyphs.get(a))||
(a=this.glyphs.get(0));return a};R.prototype.stringToGlyphs=function(a,b){var d=this;b=b||this.defaultRenderOptions;var c=new ka;c.registerModifier("glyphIndex",null,function(a){return d.charToGlyphIndex(a.char)});var e=new Ha(this);c.applyFeatures(["init","medi","fina","rlig"].map(function(a){if(a=e.getFeature({tag:a,script:"arab"}))return a}));a=c.getTextGlyphs(a);c=a.length;if(b.features){var g=b.script||this.substitution.getDefaultScriptName(),f=[];b.features.liga&&(f=f.concat(this.substitution.getFeature("liga",
g,b.language)));b.features.rlig&&(f=f.concat(this.substitution.getFeature("rlig",g,b.language)));for(b=0;b<c;b+=1)for(g=0;g<f.length;g++){for(var h=f[g],k=h.sub,l=k.length,n=0;n<l&&k[n]===a[b+n];)n++;n===l&&(a.splice(b,l,h.by),c=c-l+1)}}f=Array(c);b=this.glyphs.get(0);for(g=0;g<c;g+=1)f[g]=d.glyphs.get(a[g])||b;return f};R.prototype.nameToGlyphIndex=function(a){return this.glyphNames.nameToGlyphIndex(a)};R.prototype.nameToGlyph=function(a){a=this.nameToGlyphIndex(a);(a=this.glyphs.get(a))||(a=this.glyphs.get(0));
return a};R.prototype.glyphIndexToName=function(a){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(a):""};R.prototype.getKerningValue=function(a,b){a=a.index||a;b=b.index||b;var d=this.position.defaultKerningTables;return d?this.position.getKerningValue(d,a,b):this.kerningPairs[a+","+b]||0};R.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}};R.prototype.forEachGlyph=function(a,b,c,e,f,h){b=void 0!==b?b:0;c=void 0!==c?c:0;e=void 0!==e?e:72;f=f||this.defaultRenderOptions;
var d=1/this.unitsPerEm*e;a=this.stringToGlyphs(a,f);if(f.kerning){var g=f.script||this.position.getDefaultScriptName();g=this.position.getKerningTables(g,f.language)}for(var k=0;k<a.length;k+=1){var l=a[k];h.call(this,l,b,c,e,f);l.advanceWidth&&(b+=l.advanceWidth*d);f.kerning&&k<a.length-1&&(l=g?this.position.getKerningValue(g,l.index,a[k+1].index):this.getKerningValue(l,a[k+1]),b+=l*d);f.letterSpacing?b+=f.letterSpacing*e:f.tracking&&(b+=f.tracking/1E3*e)}return b};R.prototype.getPath=function(a,
b,c,e,f){var d=new q;this.forEachGlyph(a,b,c,e,f,function(a,b,c,e){a=a.getPath(b,c,e,f,this);d.extend(a)});return d};R.prototype.getPaths=function(a,b,c,e,f){var d=[];this.forEachGlyph(a,b,c,e,f,function(a,b,c,e){a=a.getPath(b,c,e,f,this);d.push(a)});return d};R.prototype.getAdvanceWidth=function(a,b,c){return this.forEachGlyph(a,0,0,b,c,function(){})};R.prototype.draw=function(a,b,c,e,f,h){this.getPath(b,c,e,f,h).draw(a)};R.prototype.drawPoints=function(a,b,c,e,f,h){this.forEachGlyph(b,c,e,f,h,function(b,
d,c,e){b.drawPoints(a,d,c,e)})};R.prototype.drawMetrics=function(a,b,c,e,f,h){this.forEachGlyph(b,c,e,f,h,function(b,d,c,e){b.drawMetrics(a,d,c,e)})};R.prototype.getEnglishName=function(a){if(a=this.names[a])return a.en};R.prototype.validate=function(){function a(a){(a=b.getEnglishName(a))&&a.trim()}var b=this;a("fontFamily");a("weightName");a("manufacturer");a("copyright");a("version")};R.prototype.toTables=function(){return nd.fontToTable(this)};R.prototype.toBuffer=function(){console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead.");
return this.toArrayBuffer()};R.prototype.toArrayBuffer=function(){for(var a=this.toTables().encode(),b=new ArrayBuffer(a.length),c=new Uint8Array(b),e=0;e<a.length;e++)c[e]=a[e];return b};R.prototype.download=function(a){var b=this.getEnglishName("fontFamily"),d=this.getEnglishName("fontSubfamily");a=a||b.replace(/\s/g,"")+"-"+d+".otf";var c=this.toArrayBuffer();if("undefined"!==typeof window)window.URL=window.URL||window.webkitURL,window.URL?(b=new DataView(c),d=new Blob([b],{type:"font/opentype"}),
b=document.createElement("a"),b.href=window.URL.createObjectURL(d),b.download=a,a=document.createEvent("MouseEvents"),a.initEvent("click",!0,!1),b.dispatchEvent(a)):console.warn("Font file could not be downloaded. Try using a different browser.");else{b=require("fs");d=new Buffer(c.byteLength);c=new Uint8Array(c);for(var e=0;e<d.length;++e)d[e]=c[e];b.writeFileSync(a,d)}};R.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,
WWS:256,OBLIQUE:512};R.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};R.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var id={make:function(a,b){var d=new J.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},
{name:"axisCount",type:"USHORT",value:a.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:a.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*a.axes.length}]);d.offsetToData=d.sizeOf();for(var c=0;c<a.axes.length;c++)d.fields=d.fields.concat(Zc(c,a.axes[c],b));for(c=0;c<a.instances.length;c++)d.fields=d.fields.concat(ad(c,a.instances[c],a.axes,b));return d},parse:function(a,b,c){var d=new H.Parser(a,b),e=d.parseULong();M.argument(65536===
e,"Unsupported fvar table version.");var f=d.parseOffset16();d.skip("uShort",1);var g=d.parseUShort(),h=d.parseUShort();e=d.parseUShort();d=d.parseUShort();for(var k=[],l=0;l<g;l++)k.push($c(a,b+f+l*h,c));l=[];b=b+f+g*h;for(f=0;f<e;f++)l.push(bd(a,b+f*d,k,c));return{axes:k,instances:l}}},da=Array(10);da[1]=function(){var a=this.offset+this.relativeOffset,b=this.parseUShort();if(1===b)return{posFormat:1,coverage:this.parsePointer(l.coverage),value:this.parseValueRecord()};if(2===b)return{posFormat:2,
coverage:this.parsePointer(l.coverage),values:this.parseValueRecordList()};M.assert(!1,"0x"+a.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};da[2]=function(){var a=this.offset+this.relativeOffset,b=this.parseUShort();M.assert(1===b||2===b,"0x"+a.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");a=this.parsePointer(l.coverage);var c=this.parseUShort(),e=this.parseUShort();if(1===b)return{posFormat:b,coverage:a,valueFormat1:c,valueFormat2:e,pairSets:this.parseList(l.pointer(l.list(function(){return{secondGlyph:this.parseUShort(),
value1:this.parseValueRecord(c),value2:this.parseValueRecord(e)}})))};if(2===b){var f=this.parsePointer(l.classDef),h=this.parsePointer(l.classDef),k=this.parseUShort(),n=this.parseUShort();return{posFormat:b,coverage:a,valueFormat1:c,valueFormat2:e,classDef1:f,classDef2:h,class1Count:k,class2Count:n,classRecords:this.parseList(k,l.list(n,function(){return{value1:this.parseValueRecord(c),value2:this.parseValueRecord(e)}}))}}};da[3]=function(){return{error:"GPOS Lookup 3 not supported"}};da[4]=function(){return{error:"GPOS Lookup 4 not supported"}};
da[5]=function(){return{error:"GPOS Lookup 5 not supported"}};da[6]=function(){return{error:"GPOS Lookup 6 not supported"}};da[7]=function(){return{error:"GPOS Lookup 7 not supported"}};da[8]=function(){return{error:"GPOS Lookup 8 not supported"}};da[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var rd=Array(10),hd={parse:function(a,b){a=new l(a,b||0);b=a.parseVersion(1);M.argument(1===b||1.1===b,"Unsupported GPOS table version "+b);return 1===b?{version:b,scripts:a.parseScriptList(),
features:a.parseFeatureList(),lookups:a.parseLookupList(da)}:{version:b,scripts:a.parseScriptList(),features:a.parseFeatureList(),lookups:a.parseLookupList(da),variations:a.parseFeatureVariationsList()}},make:function(a){return new J.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new J.ScriptList(a.scripts)},{name:"features",type:"TABLE",value:new J.FeatureList(a.features)},{name:"lookups",type:"TABLE",value:new J.LookupList(a.lookups,rd)}])}},gd={parse:function(a,
b){a=new H.Parser(a,b);b=a.parseUShort();if(0===b){b={};a.skip("uShort");var d=a.parseUShort();M.argument(0===d,"Unsupported kern sub-table version.");a.skip("uShort",2);d=a.parseUShort();a.skip("uShort",3);for(var c=0;c<d;c+=1){var e=a.parseUShort(),f=a.parseUShort(),g=a.parseShort();b[e+","+f]=g}return b}if(1===b){b={};a.skip("uShort");1<a.parseULong()&&console.warn("Only the first kern subtable is supported.");a.skip("uLong");d=a.parseUShort()&255;a.skip("uShort");if(0===d)for(d=a.parseUShort(),
a.skip("uShort",3),c=0;c<d;c+=1)e=a.parseUShort(),f=a.parseUShort(),g=a.parseShort(),b[e+","+f]=g;return b}throw Error("Unsupported kern table version ("+b+").");}},fd={parse:function(a,b,c,e){a=new H.Parser(a,b);b=e?a.parseUShort:a.parseULong;for(var d=[],f=0;f<c+1;f+=1){var g=b.call(a);e&&(g*=2);d.push(g)}return d}};a.Font=R;a.Glyph=Y;a.Path=q;a.BoundingBox=v;a._parse=H;a.parse=lb;a.load=function(a,b){("undefined"===typeof window?cd:dd)(a,function(a,d){if(a)return b(a);try{var c=lb(d)}catch(S){return b(S,
null)}return b(null,c)})};a.loadSync=function(a){a=require("fs").readFileSync(a);return lb(Jb(a))};Object.defineProperty(a,"__esModule",{value:!0})});this.earcut=function(a,b){function c(a,b,c,e,f){for(var h,k=0,n=b,m=c-e;n<c;n+=e)k+=(a[m]-a[n])*(a[n+1]+a[m+1]),m=n;if(f===0<k)for(f=b;f<c;f+=e)h=y(f,a[f],a[f+1],h);else for(f=c-e;f>=b;f-=e)h=y(f,a[f],a[f+1],h);h&&A(h,h.next)&&(K(h),h=h.next);return h}function e(a,b){if(!a)return a;b||(b=a);do{var c=!1;if(a.steiner||!A(a,a.next)&&0!==F(a.prev,a,a.next))a=
a.next;else{K(a);a=b=a.prev;if(a===a.next)break;c=!0}}while(c||a!==b);return b}function k(a,b,c,f,h,p,l){if(a){if(!l&&p){var w=a,r=w;do null===r.z&&(r.z=n(r.x,r.y,f,h,p)),r.prevZ=r.prev,r=r.nextZ=r.next;while(r!==w);r.prevZ.nextZ=null;r.prevZ=null;w=r;var v,Q,P,B,X=1;do{r=w;var y=w=null;for(Q=0;r;){Q++;var z=r;for(v=P=0;v<X&&(P++,z=z.nextZ,z);v++);for(B=X;0<P||0<B&&z;)0!==P&&(0===B||!z||r.z<=z.z)?(v=r,r=r.nextZ,P--):(v=z,z=z.nextZ,B--),y?y.nextZ=v:w=v,v.prevZ=y,y=v;r=z}y.nextZ=null;X*=2}while(1<Q)}for(w=
a;a.prev!==a.next;){r=a.prev;z=a.next;if(p)y=m(a,f,h,p);else a:if(y=a,Q=y.prev,P=y,X=y.next,0<=F(Q,P,X))y=!1;else{for(v=y.next.next;v!==y.prev;){if(q(Q.x,Q.y,P.x,P.y,X.x,X.y,v.x,v.y)&&0<=F(v.prev,v,v.next)){y=!1;break a}v=v.next}y=!0}if(y)b.push(r.i/c),b.push(a.i/c),b.push(z.i/c),K(a),w=a=z.next;else if(a=z,a===w){if(!l)k(e(a),b,c,f,h,p,1);else if(1===l){l=b;w=c;r=a;do z=r.prev,y=r.next.next,!A(z,y)&&x(z,r,r.next,y)&&u(z,y)&&u(y,z)&&(l.push(z.i/w),l.push(r.i/w),l.push(y.i/w),K(r),K(r.next),r=a=y),
r=r.next;while(r!==a);a=r;k(a,b,c,f,h,p,2)}else if(2===l)a:{l=a;do{for(w=l.next.next;w!==l.prev;){if(r=l.i!==w.i){r=l;z=w;if(y=r.next.i!==z.i&&r.prev.i!==z.i){b:{y=r;do{if(y.i!==r.i&&y.next.i!==r.i&&y.i!==z.i&&y.next.i!==z.i&&x(y,y.next,r,z)){y=!0;break b}y=y.next}while(y!==r);y=!1}y=!y}if(y=y&&u(r,z)&&u(z,r)){y=r;Q=!1;P=(r.x+z.x)/2;z=(r.y+z.y)/2;do y.y>z!==y.next.y>z&&y.next.y!==y.y&&P<(y.next.x-y.x)*(z-y.y)/(y.next.y-y.y)+y.x&&(Q=!Q),y=y.next;while(y!==r);y=Q}r=y}if(r){a=C(l,w);l=e(l,l.next);a=
e(a,a.next);k(l,b,c,f,h,p);k(a,b,c,f,h,p);break a}w=w.next}l=l.next}while(l!==a)}break}}}}function m(a,b,c,e){var f=a.prev,h=a.next;if(0<=F(f,a,h))return!1;var k=f.x>a.x?f.x>h.x?f.x:h.x:a.x>h.x?a.x:h.x,m=f.y>a.y?f.y>h.y?f.y:h.y:a.y>h.y?a.y:h.y,r=n(f.x<a.x?f.x<h.x?f.x:h.x:a.x<h.x?a.x:h.x,f.y<a.y?f.y<h.y?f.y:h.y:a.y<h.y?a.y:h.y,b,c,e);b=n(k,m,b,c,e);c=a.prevZ;for(e=a.nextZ;c&&c.z>=r&&e&&e.z<=b;){if(c!==a.prev&&c!==a.next&&q(f.x,f.y,a.x,a.y,h.x,h.y,c.x,c.y)&&0<=F(c.prev,c,c.next))return!1;c=c.prevZ;
if(e!==a.prev&&e!==a.next&&q(f.x,f.y,a.x,a.y,h.x,h.y,e.x,e.y)&&0<=F(e.prev,e,e.next))return!1;e=e.nextZ}for(;c&&c.z>=r;){if(c!==a.prev&&c!==a.next&&q(f.x,f.y,a.x,a.y,h.x,h.y,c.x,c.y)&&0<=F(c.prev,c,c.next))return!1;c=c.prevZ}for(;e&&e.z<=b;){if(e!==a.prev&&e!==a.next&&q(f.x,f.y,a.x,a.y,h.x,h.y,e.x,e.y)&&0<=F(e.prev,e,e.next))return!1;e=e.nextZ}return!0}function h(a,b){return a.x-b.x}function r(a,b){var c=b,e=a.x,f=a.y,h=-Infinity;do{if(f<=c.y&&f>=c.next.y&&c.next.y!==c.y){var k=c.x+(f-c.y)*(c.next.x-
c.x)/(c.next.y-c.y);if(k<=e&&k>h){h=k;if(k===e){if(f===c.y)return c;if(f===c.next.y)return c.next}var n=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!n)return null;if(e===h)return n.prev;b=n;k=n.x;var m=n.y,r=Infinity;for(c=n.next;c!==b;){if(e>=c.x&&c.x>=k&&e!==c.x&&q(f<m?e:h,f,k,m,f<m?h:e,f,c.x,c.y)){var p=Math.abs(f-c.y)/(e-c.x);(p<r||p===r&&c.x>n.x)&&u(c,a)&&(n=c,r=p)}c=c.next}return n}function n(a,b,c,e,f){a=32767*(a-c)*f;b=32767*(b-e)*f;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&
858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function v(a){var b=a,c=a;do{if(b.x<c.x||b.x===c.x&&b.y<c.y)c=b;b=b.next}while(b!==a);return c}function q(a,b,c,e,f,h,k,n){return 0<=(f-k)*(b-n)-(a-k)*(h-n)&&0<=(a-k)*(e-n)-(c-k)*(b-n)&&0<=(c-k)*(h-n)-(f-k)*(e-n)}function F(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function A(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,e){return A(a,c)&&A(b,e)||A(a,e)&&A(c,b)?
!0:0<F(a,b,c)!==0<F(a,b,e)&&0<F(c,e,a)!==0<F(c,e,b)}function u(a,b){return 0>F(a.prev,a,a.next)?0<=F(a,b,a.next)&&0<=F(a,a.prev,b):0>F(a,b,a.prev)||0>F(a,a.next,b)}function C(a,b){var c=new B(a.i,a.x,a.y),e=new B(b.i,b.x,b.y),f=a.next,h=b.prev;a.next=b;b.prev=a;c.next=f;f.prev=c;e.next=c;c.prev=e;h.next=e;e.prev=h;return e}function y(a,b,c,e){a=new B(a,b,c);e?(a.next=e.next,a.prev=e,e.next.prev=a,e.next=a):(a.prev=a,a.next=a);return a}function K(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=
a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function B(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}var z=[];(function(a,b,f){f=f||2;var n=b&&b.length,m=n?b[0]*f:a.length,p=c(a,0,m,f,!0),l=[];if(!p||p.next===p.prev)return l;var u;if(n){var q=f;n=[];var w;var x=0;for(w=b.length;x<w;x++){var y=b[x]*q;var z=x<w-1?b[x+1]*q:a.length;y=c(a,y,z,q,!1);y===y.next&&(y.steiner=!0);n.push(v(y))}n.sort(h);for(x=0;x<n.length;x++){b=n[x];q=p;if(q=r(b,q))b=
C(q,b),e(b,b.next);p=e(p,p.next)}}if(a.length>80*f){var A=u=a[0];var B=n=a[1];for(q=f;q<m;q+=f)x=a[q],b=a[q+1],x<A&&(A=x),b<B&&(B=b),x>u&&(u=x),b>n&&(n=b);u=Math.max(u-A,n-B);u=0!==u?1/u:0}k(p,l,f,A,B,u);return l})(a,b).forEach(function(b){z=z.concat([a[2*b],a[2*b+1]])});return z};(function k(b,f,e){function c(n,m){if(!f[n]){if(!b[n]){var r="function"==typeof require&&require;if(!m&&r)return r(n,!0);if(h)return h(n,!0);m=Error("Cannot find module '"+n+"'");throw m.code="MODULE_NOT_FOUND",m;}m=f[n]=
{exports:{}};b[n][0].call(m.exports,function(e){var f=b[n][1][e];return c(f?f:e)},m,m.exports,k,b,f,e)}return f[n].exports}for(var h="function"==typeof require&&require,m=0;m<e.length;m++)c(e[m]);return c})({1:[function(c,f,e){function k(b,c,e){b=A.segments(b);c=A.segments(c);c=A.combine(b,c);e=e(c);return A.polygon(e)}var m=c("./lib/build-log");f=c("./lib/epsilon");var h=c("./lib/intersecter"),r=c("./lib/segment-chainer"),n=c("./lib/segment-selector"),q=c("./lib/geojson"),W=!1,F=f();var A={buildLog:function(b){!0===
b?W=m():!1===b&&(W=!1);return!1===W?!1:W.list},epsilon:function(b){return F.epsilon(b)},segments:function(b){var c=h(!0,F,W);b.regions.forEach(c.addRegion);return{segments:c.calculate(b.inverted),inverted:b.inverted}},combine:function(b,c){return{combined:h(!1,F,W).calculate(b.segments,b.inverted,c.segments,c.inverted),inverted1:b.inverted,inverted2:c.inverted}},selectUnion:function(b){return{segments:n.union(b.combined,W),inverted:b.inverted1||b.inverted2}},selectIntersect:function(b){return{segments:n.intersect(b.combined,
W),inverted:b.inverted1&&b.inverted2}},selectDifference:function(b){return{segments:n.difference(b.combined,W),inverted:b.inverted1&&!b.inverted2}},selectDifferenceRev:function(b){return{segments:n.differenceRev(b.combined,W),inverted:!b.inverted1&&b.inverted2}},selectXor:function(b){return{segments:n.xor(b.combined,W),inverted:b.inverted1!==b.inverted2}},polygon:function(b){return{regions:r(b.segments,F,W),inverted:b.inverted}},polygonFromGeoJSON:function(b){return q.toPolygon(A,b)},polygonToGeoJSON:function(b){return q.fromPolygon(A,
F,b)},union:function(b,c){return k(b,c,A.selectUnion)},intersect:function(b,c){return k(b,c,A.selectIntersect)},difference:function(b,c){return k(b,c,A.selectDifference)},differenceRev:function(b,c){return k(b,c,A.selectDifferenceRev)},xor:function(b,c){return k(b,c,A.selectXor)}};b.PolyBool=A},{"./lib/build-log":2,"./lib/epsilon":3,"./lib/geojson":4,"./lib/intersecter":5,"./lib/segment-chainer":7,"./lib/segment-selector":8}],2:[function(b,f,e){f.exports=function(){function b(b,e){c.list.push({type:b,
data:e?JSON.parse(JSON.stringify(e)):void 0});return c}var c,e=0,f=!1;return c={list:[],segmentId:function(){return e++},checkIntersection:function(c,e){return b("check",{seg1:c,seg2:e})},segmentChop:function(c,e){b("div_seg",{seg:c,pt:e});return b("chop",{seg:c,pt:e})},statusRemove:function(c){return b("pop_seg",{seg:c})},segmentUpdate:function(c){return b("seg_update",{seg:c})},segmentNew:function(c,e){return b("new_seg",{seg:c,primary:e})},segmentRemove:function(c){return b("rem_seg",{seg:c})},
tempStatus:function(c,e,f){return b("temp_status",{seg:c,above:e,below:f})},rewind:function(c){return b("rewind",{seg:c})},status:function(c,e,f){return b("status",{seg:c,above:e,below:f})},vert:function(e){if(e===f)return c;f=e;return b("vert",{x:e})},log:function(c){"string"!==typeof c&&(c=JSON.stringify(c,!1,"  "));return b("log",{txt:c})},reset:function(){return b("reset")},selected:function(c){return b("selected",{segs:c})},chainStart:function(c){return b("chain_start",{seg:c})},chainRemoveHead:function(c,
e){return b("chain_rem_head",{index:c,pt:e})},chainRemoveTail:function(c,e){return b("chain_rem_tail",{index:c,pt:e})},chainNew:function(c,e){return b("chain_new",{pt1:c,pt2:e})},chainMatch:function(c){return b("chain_match",{index:c})},chainClose:function(c){return b("chain_close",{index:c})},chainAddHead:function(c,e){return b("chain_add_head",{index:c,pt:e})},chainAddTail:function(c,e){return b("chain_add_tail",{index:c,pt:e})},chainConnect:function(c,e){return b("chain_con",{index1:c,index2:e})},
chainReverse:function(c){return b("chain_rev",{index:c})},chainJoin:function(c,e){return b("chain_join",{index1:c,index2:e})},done:function(){return b("done")}}}},{}],3:[function(b,f,e){f.exports=function(b){"number"!==typeof b&&(b=1E-10);var c={epsilon:function(c){"number"===typeof c&&(b=c);return b},pointAboveOrOnLine:function(c,e,f){var h=e[0];e=e[1];return(f[0]-h)*(c[1]-e)-(f[1]-e)*(c[0]-h)>=-b},pointBetween:function(c,e,f){var h=f[0]-e[0];f=f[1]-e[1];c=(c[0]-e[0])*h+(c[1]-e[1])*f;return c<b||
c-(h*h+f*f)>-b?!1:!0},pointsSameX:function(c,e){return Math.abs(c[0]-e[0])<b},pointsSameY:function(c,e){return Math.abs(c[1]-e[1])<b},pointsSame:function(b,e){return c.pointsSameX(b,e)&&c.pointsSameY(b,e)},pointsCompare:function(b,e){return c.pointsSameX(b,e)?c.pointsSameY(b,e)?0:b[1]<e[1]?-1:1:b[0]<e[0]?-1:1},pointsCollinear:function(c,e,f){return Math.abs((c[0]-e[0])*(e[1]-f[1])-(e[0]-f[0])*(c[1]-e[1]))<b},linesIntersect:function(c,e,f,k){var h=e[0]-c[0];e=e[1]-c[1];var n=k[0]-f[0],m=k[1]-f[1];
k=h*m-e*n;if(Math.abs(k)<b)return!1;var p=c[0]-f[0];f=c[1]-f[1];n=(n*f-m*p)/k;f=(h*f-e*p)/k;c={alongA:0,alongB:0,pt:[c[0]+n*h,c[1]+n*e]};c.alongA=n<=-b?-2:n<b?-1:n-1<=-b?0:n-1<b?1:2;c.alongB=f<=-b?-2:f<b?-1:f-1<=-b?0:f-1<b?1:2;return c},pointInsideRegion:function(c,e){var f=c[0];c=c[1];for(var h=e[e.length-1][0],k=e[e.length-1][1],m=!1,p=0;p<e.length;p++){var r=e[p][0],u=e[p][1];u-c>b!=k-c>b&&(h-r)*(c-u)/(k-u)+r-f>b&&(m=!m);h=r;k=u}return m}};return c}},{}],4:[function(b,f,e){f.exports={toPolygon:function(b,
c){function e(c){function e(c){c=c.slice(0,c.length-1);return b.segments({inverted:!1,regions:[c]})}if(0>=c.length)return b.segments({inverted:!1,regions:[]});for(var f=e(c[0]),h=1;h<c.length;h++)f=b.selectDifference(b.combine(f,e(c[h])));return f}if("Polygon"===c.type)return b.polygon(e(c.coordinates));if("MultiPolygon"===c.type){for(var f=b.segments({inverted:!1,regions:[]}),k=0;k<c.coordinates.length;k++)f=b.selectUnion(b.combine(f,e(c.coordinates[k])));return b.polygon(f)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");
},fromPolygon:function(b,c,e){function f(b,e){return c.pointInsideRegion([.5*(b[0][0]+b[1][0]),.5*(b[0][1]+b[1][1])],e)}function h(b,c){for(var e=0;e<b.children.length;e++){var k=b.children[e];if(f(c,k.region)){h(k,c);return}}var n={region:c,children:[]};for(e=0;e<b.children.length;e++)k=b.children[e],f(k.region,c)&&(n.children.push(k),b.children.splice(e,1),e--);b.children.push(n)}function k(b,c){for(var e=0,f=b[b.length-1][0],h=b[b.length-1][1],k=[],n=0;n<b.length;n++){var m=b[n][0],p=b[n][1];k.push([m,
p]);e+=p*f-m*h;f=m;h=p}0>e!==c&&k.reverse();k.push([k[0][0],k[0][1]]);return k}function m(b){var c=[k(b.region,!1)];u.push(c);for(var e=0;e<b.children.length;e++)c.push(p(b.children[e]))}function p(b){for(var c=0;c<b.children.length;c++)m(b.children[c]);return k(b.region,!0)}e=b.polygon(b.segments(e));b={region:null,children:[]};for(var q=0;q<e.regions.length;q++){var x=e.regions[q];3>x.length||h(b,x)}var u=[];for(q=0;q<b.children.length;q++)m(b.children[q]);return 0>=u.length?{type:"Polygon",coordinates:[]}:
1==u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}}},{}],5:[function(b,f,e){var c=b("./linked-list");f.exports=function(b,e,f){function h(b,c,e){return{id:f?f.segmentId():-1,start:b,end:c,myFill:{above:e.myFill.above,below:e.myFill.below},otherFill:null}}function k(b,c){q.insertBefore(b,function(f){var h=b.isStart;var k=f.isStart,m=f.pt;f=f.other.pt;var n=e.pointsCompare(b.pt,m);h=0!==n?n:e.pointsSame(c,f)?0:h!==k?h?1:-1:e.pointAboveOrOnLine(c,k?m:f,k?f:m)?1:-1;return 0>
h})}function m(b,e){var f=c.node({isStart:!0,pt:b.start,seg:b,primary:e,other:null,status:null});k(f,b.end);b=c.node({isStart:!1,pt:b.end,seg:b,primary:e,other:f,status:null});f.other=b;k(b,f.pt);return f}function p(b,c){var e=h(c,b.seg.end,b.seg);f&&f.segmentChop(b.seg,c);b.other.remove();b.seg.end=c;b.other.pt=c;k(b.other,b.pt);return m(e,b.primary)}function r(h,k){function m(b){return r.findTransition(function(c){var f=c.ev;c=b.seg.start;var h=b.seg.end,k=f.seg.start;f=f.seg.end;c=e.pointsCollinear(c,
k,f)?e.pointsCollinear(h,k,f)?1:e.pointAboveOrOnLine(h,k,f)?1:-1:e.pointAboveOrOnLine(c,k,f)?1:-1;return 0<c})}function n(b,c){var h=b.seg,k=c.seg,l=h.start,n=h.end,m=k.start,r=k.end;f&&f.checkIntersection(h,k);h=e.linesIntersect(l,n,m,r);if(!1===h){if(!e.pointsCollinear(l,n,m)||e.pointsSame(l,r)||e.pointsSame(n,m))return!1;h=e.pointsSame(l,m);k=e.pointsSame(n,r);if(h&&k)return c;var q=!h&&e.pointBetween(l,m,r);m=!k&&e.pointBetween(n,m,r);if(h)return m?p(c,n):p(b,r),c;q&&(k||(m?p(c,n):p(b,r)),p(c,
l))}else 0===h.alongA&&(-1===h.alongB?p(b,m):0===h.alongB?p(b,h.pt):1===h.alongB&&p(b,r)),0===h.alongB&&(-1===h.alongA?p(c,l):0===h.alongA?p(c,h.pt):1===h.alongA&&p(c,n));return!1}for(var r=c.create(),u=[];!q.isEmpty();){var v=q.getHead();f&&f.vert(v.pt[0]);if(v.isStart){f&&f.segmentNew(v.seg,v.primary);var x=m(v),C=x.before?x.before.ev:null,A=x.after?x.after.ev:null;f&&f.tempStatus(v.seg,C?C.seg:!1,A?A.seg:!1);var F=function(){if(C){var b=n(v,C);if(b)return b}return A?n(v,A):!1}();if(F){if(b){var W;
if(W=null===v.seg.myFill.below?!0:v.seg.myFill.above!==v.seg.myFill.below)F.seg.myFill.above=!F.seg.myFill.above}else F.seg.otherFill=v.seg.myFill;f&&f.segmentUpdate(F.seg);v.other.remove();v.remove()}if(q.getHead()!==v){f&&f.rewind(v.seg);continue}b?(W=null===v.seg.myFill.below?!0:v.seg.myFill.above!==v.seg.myFill.below,v.seg.myFill.below=A?A.seg.myFill.above:h,v.seg.myFill.above=W?!v.seg.myFill.below:v.seg.myFill.below):null===v.seg.otherFill&&(F=A?v.primary===A.primary?A.seg.otherFill.above:A.seg.myFill.above:
v.primary?k:h,v.seg.otherFill={above:F,below:F});f&&f.status(v.seg,C?C.seg:!1,A?A.seg:!1);v.other.status=x.insert(c.node({ev:v}))}else{x=v.status;if(null===x)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");r.exists(x.prev)&&r.exists(x.next)&&n(x.prev.ev,x.next.ev);f&&f.statusRemove(x.ev.seg);x.remove();v.primary||(x=v.seg.myFill,v.seg.myFill=v.seg.otherFill,v.seg.otherFill=x);u.push(v.seg)}q.getHead().remove()}f&&f.done();return u}var q=c.create();
return b?{addRegion:function(b){for(var c,h=b[b.length-1],k=0;k<b.length;k++){c=h;h=b[k];var n=e.pointsCompare(c,h);if(0!==n){var p=0>n?c:h;c=0>n?h:c;p={id:f?f.segmentId():-1,start:p,end:c,myFill:{above:null,below:null},otherFill:null};m(p,!0)}}},calculate:function(b){return r(b,!1)}}:{calculate:function(b,c,e,f){b.forEach(function(b){m(h(b.start,b.end,b),!0)});e.forEach(function(b){m(h(b.start,b.end,b),!1)});return r(c,f)}}}},{"./linked-list":6}],6:[function(b,f,e){f.exports={create:function(){var b=
{root:{root:!0,next:null},exists:function(c){return null===c||c===b.root?!1:!0},isEmpty:function(){return null===b.root.next},getHead:function(){return b.root.next},insertBefore:function(c,e){for(var f=b.root,h=b.root.next;null!==h;){if(e(h)){c.prev=h.prev;c.next=h;h.prev.next=c;h.prev=c;return}f=h;h=h.next}f.next=c;c.prev=f;c.next=null},findTransition:function(c){for(var e=b.root,f=b.root.next;null!==f&&!c(f);)e=f,f=f.next;return{before:e===b.root?null:e,after:f,insert:function(b){b.prev=e;b.next=
f;e.next=b;null!==f&&(f.prev=b);return b}}}};return b},node:function(b){b.prev=null;b.next=null;b.remove=function(){if(b.prev.next=b.next)b.next.prev=b.prev;b.prev=null;b.next=null};return b}}},{}],7:[function(b,f,e){f.exports=function(b,c,e){var f=[],h=[];b.forEach(function(b){function k(b,c,e){K.index=b;K.matches_head=c;K.matches_pt1=e;if(K===r)return K=v,!1;K=null;return!0}function m(b){e&&e.chainReverse(b);f[b].reverse()}function n(b,h){var k=f[b],l=f[h],m=k[k.length-1],n=k[k.length-2],p=l[0],
q=l[1];c.pointsCollinear(n,m,p)&&(e&&e.chainRemoveTail(b,m),k.pop(),m=n);c.pointsCollinear(m,p,q)&&(e&&e.chainRemoveHead(h,p),l.shift());e&&e.chainJoin(b,h);f[b]=k.concat(l);f.splice(h,1)}var p=b.start,q=b.end;if(c.pointsSame(p,q))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{e&&e.chainStart(b);for(var r={index:0,matches_head:!1,matches_pt1:!1},v={index:0,matches_head:!1,matches_pt1:!1},K=r,B=0;B<f.length;B++){b=f[B];var z=b[0];
b=b[b.length-1];if(c.pointsSame(z,p)){if(k(B,!0,!0))break}else if(c.pointsSame(z,q)){if(k(B,!0,!1))break}else if(c.pointsSame(b,p)){if(k(B,!1,!0))break}else if(c.pointsSame(b,q)&&k(B,!1,!1))break}if(K===r)f.push([p,q]),e&&e.chainNew(p,q);else if(K===v){e&&e.chainMatch(r.index);B=r.index;p=r.matches_pt1?q:p;q=r.matches_head;b=f[B];z=q?b[0]:b[b.length-1];var w=q?b[1]:b[b.length-2],P=q?b[b.length-1]:b[0],Q=q?b[b.length-2]:b[1];c.pointsCollinear(w,z,p)&&(q?(e&&e.chainRemoveHead(r.index,p),b.shift()):
(e&&e.chainRemoveTail(r.index,p),b.pop()),z=w);c.pointsSame(P,p)?(f.splice(B,1),c.pointsCollinear(Q,P,z)&&(q?(e&&e.chainRemoveTail(r.index,z),b.pop()):(e&&e.chainRemoveHead(r.index,z),b.shift())),e&&e.chainClose(r.index),h.push(b)):q?(e&&e.chainAddHead(r.index,p),b.unshift(p)):(e&&e.chainAddTail(r.index,p),b.push(p))}else b=r.index,B=v.index,e&&e.chainConnect(b,B),p=f[b].length<f[B].length,r.matches_head?v.matches_head?p?(m(b),n(b,B)):(m(B),n(B,b)):n(B,b):v.matches_head?n(b,B):p?(m(b),n(B,b)):(m(B),
n(b,B))}});return h}},{}],8:[function(b,f,e){function c(b,c,e){var f=[];b.forEach(function(b){var h=(b.myFill.above?8:0)+(b.myFill.below?4:0)+(b.otherFill&&b.otherFill.above?2:0)+(b.otherFill&&b.otherFill.below?1:0);0!==c[h]&&f.push({id:e?e.segmentId():-1,start:b.start,end:b.end,myFill:{above:1===c[h],below:2===c[h]},otherFill:null})});e&&e.selected(f);return f}f.exports={union:function(b,e){return c(b,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(b,e){return c(b,[0,0,0,0,0,2,0,2,0,0,1,
1,0,2,1,0],e)},difference:function(b,e){return c(b,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(b,e){return c(b,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(b,e){return c(b,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}}},{}]},{},[1])}};_canvas_.getVersionInformation=function(){return Object.keys(_canvas_).filter(function(q){return"getVersionInformation"!=q}).map(function(q){return{name:q,data:_canvas_[q].versionInformation}})};_canvas_.core=new function(){this.versionInformation={tick:0,
lastDateModified:{y:"????",m:"??",d:"??"}};var q=this,m=new function(b,a){var c=this;this.log=function(){};this.function={};this.delayedFunction={};var f=0,e={};b.onmessage=function(a){var f=a.data;f.outgoing?f.cargo.function in c.function?(void 0==f.cargo.arguments&&(f.cargo.arguments=[]),null==f.id?c.function[f.cargo.function].apply(c.function,$jscomp.arrayFromIterable(f.cargo.arguments)):b.postMessage({id:f.id,outgoing:!1,cargo:c.function[f.cargo.function].apply(c.function,$jscomp.arrayFromIterable(f.cargo.arguments))})):
f.cargo.function in c.delayedFunction&&(void 0==f.cargo.arguments&&(f.cargo.arguments=[]),null==f.id?c.delayedFunction[f.cargo.function].apply(c.delayedFunction,$jscomp.arrayFromIterable(f.cargo.arguments)):c.delayedFunction[f.cargo.function].apply(c.delayedFunction,$jscomp.arrayFromIterable([function(a){b.postMessage({id:f.id,outgoing:!1,cargo:a})}].concat(f.cargo.arguments)))):(e[f.id](f.cargo),delete e[f.id])};this.run=function(a,c,h,m){c=void 0===c?[]:c;var k=null;void 0!=h&&(k=f++,e[k]=h);b.postMessage({id:k,
outgoing:!0,cargo:{function:a,arguments:c}},m)}}(new Worker("js/core_engine.min.js"),"core_console");_canvas_.setAttribute("tabIndex",1);this.meta=new function(){this.areYouReady=function(){return new Promise(function(b,a){m.run("areYouReady",[],b)})};this.refresh=function(){m.run("refresh",[])};this.createSetAppend=function(b,a,c,f){return new Promise(function(e,k){m.run("createSetAppend",[b,a,c,f],e)})}};this._dump=new function(){this.elememt=function(){return new Promise(function(b,a){m.run("_dump.element",
[],b)})};this.arrangement=function(){return new Promise(function(b,a){m.run("_dump.arrangement",[],b)})};this.render=function(){return new Promise(function(b,a){m.run("_dump.render",[],b)})};this.viewport=function(){return new Promise(function(b,a){m.run("_dump.viewport",[],b)})};this.callback=function(){return new Promise(function(b,a){m.run("_dump.callback",[],b)})}};this.boatload=new function(){this.element=new function(){this.executeMethod=new function(){var b=[];this.load=function(a){b.push(a)};
this.ship=function(){m.run("boatload.element.executeMethod",[b]);b=[]}}}};this.element=new function(){this.getAvailableElements=function(){return new Promise(function(b,a){m.run("element.getAvailableElements",[],b)})};this.getCreatedElements=function(){return new Promise(function(b,a){m.run("element.getCreatedElements",[],b)})};this.create=function(b,a){return new Promise(function(c,f){m.run("element.create",[b,a],c)})};this.delete=function(b){m.run("element.delete",[b],resolve)};this.deleteAllCreated=
function(){m.run("element.deleteAllCreated",[],resolve)};this.getTypeById=function(b){return new Promise(function(a,c){m.run("element.getTypeById",[b],a)})};this.executeMethod=function(b,a,c){c=void 0===c?[]:c;return new Promise(function(f,e){m.run("element.executeMethod",[b,a,c],f)})}};this.arrangement=new function(){this.new=function(){m.run("arrangement.new")};this.prepend=function(b){m.run("arrangement.prepend",[b])};this.append=function(b){m.run("arrangement.append",[b])};this.remove=function(b){m.run("arrangement.remove",
[b])};this.clear=function(){m.run("arrangement.clear")};this.getElementAddress=function(b){return new Promise(function(a,c){m.run("arrangement.getElementAddress",[b],a)})};this.getElementByAddress=function(b){return new Promise(function(a,c){m.run("arrangement.getElementByAddress",[b],a)})};this.getElementsUnderPoint=function(b,a){return new Promise(function(c,f){m.run("arrangement.getElementsUnderPoint",[b,a],c)})};this.getElementsUnderArea=function(b){return new Promise(function(a,c){m.run("arrangement.getElementsUnderArea",
[b],a)})};this.printTree=function(b){m.run("arrangement.printTree",[b])}};this.render=new function(){this.refresh=function(){return new Promise(function(b,a){m.run("render.refresh",[],b)})};this.clearColour=function(b){return new Promise(function(a,c){m.run("render.clearColour",[b],a)})};this.adjustCanvasSize=function(b,a){m.run("render.adjustCanvasSize",[b,a])};this.getCanvasSize=function(){return new Promise(function(b,a){m.run("render.getCanvasSize",[],b)})};this.activeLimitToFrameRate=function(b){return new Promise(function(a,
c){m.run("render.activeLimitToFrameRate",[b],a)})};this.frameRateLimit=function(b){return new Promise(function(a,c){m.run("render.frameRateLimit",[b],a)})};this.frame=function(){m.run("render.frame",[])};this.active=function(b){return new Promise(function(a,c){m.run("render.active",[b],a)})}};this.viewport=new function(){this.refresh=function(){m.run("viewport.refresh",[])};this.position=function(b,a){return new Promise(function(c,f){m.run("viewport.position",[b,a],c)})};this.scale=function(b){return new Promise(function(a,
c){m.run("viewport.scale",[b],a)})};this.angle=function(b){return new Promise(function(a,c){m.run("viewport.angle",[b],a)})};this.getElementsUnderPoint=function(b,a){return new Promise(function(c,f){m.run("viewport.getElementsUnderPoint",[b,a],c)})};this.getElementsUnderArea=function(b){return new Promise(function(a,c){m.run("viewport.getElementsUnderArea",[b],a)})};this.getMousePosition=function(b,a){return new Promise(function(c,f){m.run("viewport.getMousePosition",[b,a],c)})};this.getBoundingBox=
function(){return new Promise(function(b,a){m.run("viewport.getBoundingBox",[],b)})};this.stopMouseScroll=function(b){return new Promise(function(a,c){m.run("viewport.stopMouseScroll",[b],a)})}};this.stats=new function(){this.active=function(b){return new Promise(function(a,c){m.run("stats.active",[b],a)})};this.getReport=function(){return new Promise(function(b,a){m.run("stats.getReport",[],b)})}};this.callback=new function(){this.listCallbackTypes=function(){return new Promise(function(a,b){m.run("callback.listCallbackTypes",
[],a)})};this.getCallbackTypeState=function(a){return new Promise(function(b,c){m.run("callback.getCallbackTypeState",[a],b)})};this.activateCallbackType=function(a){m.run("callback.activateCallbackType",[a])};this.disactivateCallbackType=function(a){m.run("callback.disactivateCallbackType",[a])};this.activateAllCallbackTypes=function(){m.run("callback.activateAllCallbackTypes",[])};this.disactivateAllCallbackTypes=function(){m.run("callback.disactivateAllCallbackTypes",[])};var b=new function(){var a=
{};this.register=function(b,c,k){b in a||(a[b]={});a[b][c]=k};this.remove=function(b,c){a[b][c]=void 0;delete a[b][c]};this.call=function(b,c,k,m,h){if(void 0!=b&&void 0!=a[b]&&void 0!=a[b][c])a[b][c](k,m,h)}};this.attachCallback=function(a,f,e){b.register(a,f,e);m.run("callback.attachCallback",[a,f])};this.removeCallback=function(a,f){b.remove(a,f);m.run("callback.removeCallback",[a,f])};var a=!1;this.allowDeepElementCallback=function(b){if(void 0==b)return a;a=b};this.functions={};this.listCallbackTypes().then(function(c){c.forEach(function(c){_canvas_[c]=
function(a){var b={};a instanceof KeyboardEvent?b={key:a.key,code:a.code,keyCode:a.keyCode,altKey:a.altKey,ctrlKey:a.ctrlKey,metaKey:a.metaKey,shiftKey:a.shiftKey}:a instanceof WheelEvent?b={X:a.offsetX,Y:a.offsetY,wheelDelta:a.wheelDelta,wheelDeltaX:a.wheelDeltaX,wheelDeltaY:a.wheelDeltaY}:a instanceof MouseEvent?b={X:a.offsetX,Y:a.offsetY}:console.warn("unknown event type: ",a);m.run("callback.coupling."+c,[b])};m.function["callback."+c]=function(e,f,m,h){a?h.forEach(function(a){b.call(a,c,e,f,
m)}):b.call(h[0],c,e,f,m);if(q.callback.functions[c])q.callback.functions[c](e,f,m,h)}})})};m.function.go=function(){q.meta.go&&q.meta.go()};m.function.printToScreen=function(b){_canvas_.getContext("bitmaprenderer").transferFromImageBitmap(b)};m.function.onViewportAdjust=function(b){console.log("onViewportAdjust -> ",b)};m.function.getCanvasAttributes=function(b,a){b=void 0===b?[]:b;a=void 0===a?[]:a;return b.map(function(b,f){return _canvas_.getAttribute((a[f]?__canvasPrefix:"")+b)})};m.function.setCanvasAttributes=
function(b,a){b=void 0===b?[]:b;a=void 0===a?[]:a;b.map(function(b,f){_canvas_.setAttribute((a[f]?__canvasPrefix:"")+b.name,b.value)})};m.function.getCanvasParentAttributes=function(b,a){b=void 0===b?[]:b;a=void 0===a?[]:a;return b.map(function(b,f){return _canvas_.parentElement[(a[f]?__canvasPrefix:"")+b]})};m.function.getDocumentAttributes=function(b){b=void 0===b?[]:b;return b.map(function(a){return eval("document."+a)})};m.function.setDocumentAttributes=function(b,a){b=void 0===b?[]:b;a=void 0===
a?[]:a;return b.map(function(b,f){eval("document."+b+' = "'+a[f]+'"')})};m.function.getWindowAttributes=function(b){b=void 0===b?[]:b;return b.map(function(a){return eval("window."+a)})};m.function.setWindowAttributes=function(b){b=void 0===b?[]:b;b.map(function(a,b){eval("window."+a.name+' = "'+a.value+'"')})}};$jscomp$loop$2.$jscomp$loop$prop$randomRectangleCount$3=5E3;_canvas_.core.meta.go=function(q){return function(){for(var m=[],b=0;b<q.$jscomp$loop$prop$randomRectangleCount$3;b++)m.push(_canvas_.core.meta.createSetAppend("rectangle",
"rect_"+b,{x:800*Math.random(),y:600*Math.random(),width:50*Math.random(),height:50*Math.random(),anchor:{x:Math.random(),y:Math.random()},angle:2*Math.PI*Math.random(),colour:{r:Math.random(),g:Math.random(),b:Math.random(),a:1}},-1));Promise.all(m).then(function(){_canvas_.core.render.frame()})}}($jscomp$loop$2)};
