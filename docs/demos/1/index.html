<!DOCTYPE html>
<html lang="en">
    
    <head>
        <title>curve</title>
        <meta charset="utf-8"></meta>
        <style>
            html, body{
                margin:0px;
                width:100%; height:100%;
                overflow-x: hidden; overflow-y: hidden;
            }
        </style>
    </head>

    <body>
        <section style='width:100%; height:100%;'>
            <svg workspace style='width:100%; height:100%;'></svg>
        </section>
    </body>

</html>

<script type='text/javascript' src='../../workspace.js'></script>
<!-- <script type='text/javascript' src='../../workspace.min.js'></script> -->




<script>
    var pulseGenerator_1 = objects.pulseGenerator(750, 140);
    __globals.panes.middleground.append( pulseGenerator_1 );
    var launchpad_1 = objects.launchpad(525, 150);
    __globals.panes.middleground.append( launchpad_1 );
    var oneShot_multi_multiTrack_1 = objects.oneShot_multi_multiTrack(200, 20);
    __globals.panes.middleground.append( oneShot_multi_multiTrack_1 );
    var audio_sink_1 = objects.audio_sink(20,20);
    __globals.panes.middleground.append( audio_sink_1 );
    //reverbUnit
        var reverbUnit_1 = objects.reverbUnit(50, 180);
        __globals.panes.middleground.append( reverbUnit_1 );

    pulseGenerator_1.io.out.connectTo(launchpad_1.io.pulse);
    for(var a = 0; a < 8; a++){ launchpad_1.io['out_'+a].connectTo(oneShot_multi_multiTrack_1.io['trigger_'+a]); }
    oneShot_multi_multiTrack_1.io.outRight.connectTo( audio_sink_1.io.right );
    oneShot_multi_multiTrack_1.io.outLeft.connectTo( audio_sink_1.io.left );


    var sounds = [
        'https://metasophiea.com/curve/demos/1/sounds/bass.mp3',
        'https://metasophiea.com/curve/demos/1/sounds/snare.mp3',
        'https://metasophiea.com/curve/demos/1/sounds/openHiHat.mp3',
        'https://metasophiea.com/curve/demos/1/sounds/closeHiHat.mp3',
        'https://metasophiea.com/curve/demos/1/sounds/crash.mp3'
    ];

    for(var a = 0; a < sounds.length; a++){
        document.getElementById('oneShot_multi_multiTrack').oneShot_multi_array[a].load('url',
            function(a){
                return function(){
                    document.getElementById('oneShot_multi_multiTrack').children['grapher_waveWorkspace_'+a].draw(document.getElementById('oneShot_multi_multiTrack').oneShot_multi_array[a].waveformSegment());
                };
            }(a)
        ,sounds[a]);
    }

    document.getElementById('launchpad').importData({
        data:[
            [
                [true, false,false,true, false,true, false,false],
                [false,false,true, false,false,false,true, false],
                [false,false,false,false,false,false,false,true ],
                [false,true, true, false,true, true, false,false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
            ],
            [
                [true, false,false,true, true, false,false,false],
                [false,false,true, false,false,false,true, false],
                [false,false,false,false,false,false,false,false],
                [true, false,true, false,true, false,true, false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
            ],
            [
                [true, false,false,true, true, true, false,false],
                [false,false,true, false,false,true, false,false],
                [false,false,false,false,false,false,true, false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
                [false,false,false,false,false,false,false,false],
            ],
        ]
    });

    document.getElementById('pulseGenerator').children.tempo.set(1)

</script>