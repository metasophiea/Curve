<!DOCTYPE html>
<html lang="en">
    
    <head>
        <title>curve</title>
        <meta charset="utf-8"></meta>
        <style>
            html, body{
                margin:0px;
                width:100%; height:100%;
                overflow-x: hidden; overflow-y: hidden;
            }
        </style>
    </head>

    <body>
        <section style='width:100%; height:100%;'>
            <svg workspace style='width:100%; height:100%;'></svg>
        </section>
    </body>

</html>

<!-- <script type='text/javascript' src='../../workspace.js'></script> -->
<script type='text/javascript' src='../../workspace.min.js'></script>

<script>
    //create objects
        var pulseGenerator_1 = __globals.utility.workspace.placeAndReturnObject( objects.pulseGenerator_hyper(1100, 155, 999) );
        var basicSequencer_1 = __globals.utility.workspace.placeAndReturnObject( objects.basicSequencer(280, 160) );
        var oneShot_multi_multiTrack = __globals.utility.workspace.placeAndReturnObject( objects.oneShot_multi_multiTrack(-20, 95) );
        var audio_sink = __globals.utility.workspace.placeAndReturnObject( objects.audio_sink(-265, 100) );
    //connect objects
        pulseGenerator_1.io.out.connectTo(basicSequencer_1.io.progress);
        basicSequencer_1.io.output_0.connectTo( oneShot_multi_multiTrack.io.trigger_0 );
        basicSequencer_1.io.output_1.connectTo( oneShot_multi_multiTrack.io.trigger_1 );
        basicSequencer_1.io.output_2.connectTo( oneShot_multi_multiTrack.io.trigger_2 );
        basicSequencer_1.io.output_3.connectTo( oneShot_multi_multiTrack.io.trigger_3 );
        basicSequencer_1.io.output_4.connectTo( oneShot_multi_multiTrack.io.trigger_4 );
        basicSequencer_1.io.output_5.connectTo( oneShot_multi_multiTrack.io.trigger_5 );
        basicSequencer_1.io.output_6.connectTo( oneShot_multi_multiTrack.io.trigger_6 );
        basicSequencer_1.io.output_7.connectTo( oneShot_multi_multiTrack.io.trigger_7 );
        oneShot_multi_multiTrack.io.outRight.connectTo( audio_sink.io.right );
        oneShot_multi_multiTrack.io.outLeft.connectTo( audio_sink.io.left );
    //setup objects
        basicSequencer_1.i.loopActive(true);
        basicSequencer_1.i.addNotes([
            {"line":0,"position":0,"length":1,"strength":1},
            {"line":3,"position":0,"length":1,"strength":1},
            {"line":3,"position":2,"length":1,"strength":1},
            {"line":1,"position":4,"length":1,"strength":1},
            {"line":0,"position":6,"length":1,"strength":1},
            {"line":0,"position":9,"length":1,"strength":1},
            {"line":3,"position":9,"length":1,"strength":1},
            {"line":1,"position":12,"length":1,"strength":1},
            {"line":0,"position":14,"length":1,"strength":1},
            {"line":0,"position":16,"length":1,"strength":1},
            {"line":3,"position":16,"length":1,"strength":1},
            {"line":3,"position":18,"length":1,"strength":1},
            {"line":1,"position":20,"length":1,"strength":1},
            {"line":2,"position":25,"length":1,"strength":1},
            {"line":1,"position":28,"length":1,"strength":1},
            {"line":2,"position":28,"length":1,"strength":1},
            {"line":1,"position":31,"length":1,"strength":1}
        ]);

        //load sounds from urls into the multi track
        var libURL = 'https://metasophiea.com/curve/demos/1/sounds/';
        var sounds = [
            libURL+'bass.mp3', 
            libURL+'snare.mp3', 
            libURL+'openHiHat.mp3', 
            libURL+'closeHiHat.mp3', 
            libURL+'crash.mp3',
        ];
        for(var a = 0; a < sounds.length; a++){ oneShot_multi_multiTrack.i.loadURL(a, sounds[a]); }
        oneShot_multi_multiTrack.i.area(0,0.022635858200536246, 0.3112601773120755);
        oneShot_multi_multiTrack.i.area(1,0.024827894657491516, 0.14734331790792068);
        oneShot_multi_multiTrack.i.area(2,0.008972957530965352, 0.18193590800215986);
        oneShot_multi_multiTrack.i.area(3,0.01041431545155863,  0.12139887533724177);
    //setup view
        // __globals.utility.workspace.gotoPosition(-80.5151, -162.899,1.1593, 0);

</script>